"use strict";JQX("jqx-tank",function(e){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"template",value:function(){return'<div id="container" class="jqx-container">\n                    <div id="scaleNear" class="jqx-scale jqx-scale-near"></div>\n                    <div id="track" class="jqx-track">\n                        <div id="fill" class="jqx-value">\n                            <div id="bubbleContainer" class="jqx-bubble-container"></div>\n                            <div id="tooltip" class="jqx-tooltip"><div id="tooltipContent" class="jqx-tooltip-content jqx-unselectable"></div></div>\n                            <div id="thumb" class="jqx-thumb">\n                                <div class="jqx-thumb-label-container">\n                                    <span id="thumbLabel" class="jqx-thumb-label"></span>\n                                </div>\n                            </div>\n                        </div>\n                        <div id="trackTicksContainer" class="jqx-track-ticks-container jqx-hidden"></div>\n                    </div>\n                    <div id="scaleFar" class="jqx-scale jqx-scale-far"></div>\n                    <input id="hiddenInput" type="hidden" name="[[name]]">\n                </div>'}},{key:"ready",value:function(){babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"ready",this).call(this),this._redefineProperty("customTicks"),this._createElement()}},{key:"_createElement",value:function(){var e=this;if(e.$.fill.style.transition="none","numeric"===e.mode?e._getEventValue=function(){return e.value}:e._handleDateScale(),e._setSettingsObject(),e._setDrawVariables(),e._getLayoutType(),e._numericProcessor=new JQX.Utilities.NumericProcessor(e,"scaleType"),e._numberRenderer=new JQX.Utilities.NumberRenderer,!e._isVisible())return void(e._renderingSuspended=!0);e._renderingSuspended=!1,e._setInitialComponentDisplay(),e._measurements={},e._wordLengthNumber=e._numericProcessor.getWordLength(e.wordLength),e._validateInitialPropertyValues(),e._setTicksAndInterval(),e._validate(!0),e._updateTooltipValue(e._drawValue),e._setFocusable(),e._setTrackSize(),e._setBubbles(),e.$.fill.style.transition="",e.$.hiddenInput.value=e._getEventValue()}},{key:"val",value:function(e){var a=this;if(void 0===e)return a._getEventValue();if("date"===a.mode){var t=JQX.Utilities.DateTime.validateDate(e);return t=t.getTimeStamp(),0!==t.compare(a.value)?void a._validate(!1,t,void 0,!0):a._valueDate}if(a.value.toString().toUpperCase()===e.toString().toUpperCase())return a.value="string"==typeof e?e:e.toString();e=e.toString().replace(/\s/g,""),a._numericProcessor.regexScientificNotation.test(e)&&(e=a._numericProcessor.scientificToDecimal(e));var i=a._discardDecimalSeparator(e.toString());a._validate(!1,i,void 0,!0),delete a._valueBeforeCoercion}},{key:"_setBubbles",value:function(){var e=this;if(e.hasAnimation){for(var a=document.createDocumentFragment(),t=void 0,i=0;i<5;i++)t=document.createElement("div"),t.classList.add("bubble"),t.classList.add("bubble"+(i+1)),a.appendChild(t);e.$.bubbleContainer.appendChild(a)}}},{key:"_setTrackSize",value:function(){var e=this;"vertical"===e.orientation?e._trackSize=e.$.track.offsetWidth:e._trackSize=e.$.track.offsetHeight}},{key:"getOptimalSize",value:function(){var e=this;if(e._renderingSuspended)return{width:0,height:0};var a=void 0,t=void 0,i=void 0;switch(e.labelsVisibility){case"all":t=e._numericProcessor._longestLabelSize;break;case"endPoints":t=Math.max(e._tickIntervalHandler.labelsSize.minLabelOtherSize,e._tickIntervalHandler.labelsSize.maxLabelOtherSize);break;case"none":t=0}switch(e.orientation){case"horizontal":return a={marginA:"marginBottom",marginB:"marginTop",nearScaleDistance:"bottom",farScaleDistance:"top",paddingA:"paddingBottom",paddingB:"paddingTop",offset:"offsetWidth",distance:"left"},e._orientationChanged&&(a.offset="offsetHeight",e._trackChanged=!0),i=e._getSize(t,a),{width:i.optimalOtherSize,height:i.optimalSize};case"vertical":return a={marginA:"marginLeft",marginB:"marginRight",nearScaleDistance:"right",farScaleDistance:"left",paddingA:"paddingLeft",paddingB:"paddingRight",offset:"offsetHeight",distance:"top"},e._orientationChanged&&(a.offset="offsetWidth",e._trackChanged=!0),i=e._getSize(t,a),{width:i.optimalSize,height:i.optimalOtherSize}}}},{key:"propertyChangedHandler",value:function(e,t,i){babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"propertyChangedHandler",this).call(this,e,t,i);var r=this;if(!r._isVisible()||r._renderingSuspended)return void(r._renderingSuspended=!0);if(i==t)return void(r[e]=t);switch(e){case"labelsVisibility":case"ticksVisibility":return void r._updateScaleWidth(r._numericProcessor._longestLabelSize);case"coerce":if(i){var n=r.value,o=i=r.logarithmicScale?Math.pow(10,r._numericProcessor.getCoercedValue(Math.log10(n))):r._numericProcessor.getCoercedValue(n);r._validate(!1,o,!0,!0),r._valueBeforeCoercion=n}else void 0!==r._valueBeforeCoercion&&r._validate(!1,r._valueBeforeCoercion,!1,!0);return;case"interval":r._numericProcessor.validateInterval(i);var l=i=r.logarithmicScale?Math.pow(10,r._numericProcessor.getCoercedValue(Math.log10(r.value))):r._numericProcessor.getCoercedValue(r.value);r._validate(!1,l,r.coerce,!0);break;case"min":case"max":"date"===r.mode&&(delete r._dateInterval,r[e]=JQX.Utilities.DateTime.validateDate(i).getTimeStamp()),r._validateMinMax(e,!1,t);var s=r._numericProcessor.createDescriptor(r._discardDecimalSeparator(r.value,r.decimalSeparator),void 0,!0,"strict"===r.validation);r._setTicksAndInterval(),r._numericProcessor.updateValue(s);var c=r.getOptimalSize(),d=r.getBoundingClientRect(),u=r.$.track.getBoundingClientRect();c.width>d.width&&u.width<20&&(r.style.width=c.width+"px",r.style.height=c.height+"px");break;case"inverted":r._getLayoutType(),r._normalLayout&&(r.$.fill.style[r._settings.margin]="0px");var m=r._numericProcessor.createDescriptor(r.value),v=r._numericProcessor.validate(m,r._minObject,r._maxObject);r._setTicksAndInterval(),r._numericProcessor.updateValue(v);break;case"orientation":var _=r.$.fill.style,g=r.$.container.style;switch(!0!==r._orientationChanged&&(r._orientationChanged=!0),r._tankSizeBeforeOrientation={width:r.offsetWidth,height:r.offsetHeight},r._setSettingsObject(),r._getLayoutType(),r.inverted&&(_.marginTop="0",_.marginLeft="0"),r.orientation){case"vertical":r.inverted||(_.marginTop="auto",_.marginLeft="0"),_.width="100%",g.paddingLeft="0",g.paddingRight="0";break;case"horizontal":r.inverted||(_.marginTop="0",_.marginLeft="auto"),_.height="100%",g.paddingTop="0",g.paddingBottom="0"}r._validateMinMax("both");var p=r._numericProcessor.createDescriptor(r.value),h=r._numericProcessor.validate(p,r._minObject,r._maxObject);r._setTicksAndInterval(),r._setTicksAndInterval(),r._numericProcessor.updateValue(h),r._trackChanged=!0;break;case"significantDigits":case"precisionDigits":if("date"===r.mode)return;if("precisionDigits"===e&&"integer"===r.scaleType&&r.error(r.localize("noInteger",{elementType:r.nodeName.toLowerCase(),property:e})),"significantDigits"===e&&null!==r.precisionDigits?r.precisionDigits=null:"precisionDigits"===e&&null!==r.significantDigits&&(r.significantDigits=null),r._validateInitialPropertyValues(),r._setTicksAndInterval(),"horizontal"===r.orientation&&r.inverted){var f=r._numericProcessor.valueToPx(r._numericProcessor.getCoercedValue(r._drawValue));r.updateFillSizeAndPosition(f,r._settings.margin,i,!1)}break;case"decimalSeparator":if("integer"===r.scaleType||"date"===r.mode)return;var b=r._discardDecimalSeparator(r.value,t),k=r._applyDecimalSeparator(b);r.value=b,delete r._valueBeforeCoercion,r._numericProcessor.addTicksAndLabels(),r._updateTooltipValue(k);break;case"value":if(r.value=t,null===i)return;if("date"===r.mode){var y=JQX.Utilities.DateTime.validateDate(i);return y=y.getTimeStamp(),void(0!==y.compare(t)&&r._validate(!1,y,void 0,!0))}if(i.toString().toUpperCase()!==t.toString().toUpperCase()){var w=void 0!==i?i.toString().replace(/\s/g,""):t.toString().replace(/\s/g,"");r._numericProcessor.regexScientificNotation.test(w)&&(w=r._numericProcessor.scientificToDecimal(w)),r._validate(!1,w,void 0,!0),delete r._valueBeforeCoercion}else r.value="string"==typeof i?i:i.toString();break;case"scaleType":if("date"===r.mode)return void(r.scaleType="integer");r._changeScaleType(t,i);break;case"disabled":case"unfocusable":r._setFocusable();break;case"showUnit":case"unit":r._setTicksAndInterval(),r._moveThumbBasedOnValue(r._drawValue);break;case"tooltipPosition":break;case"wordLength":if("date"===r.mode)return void(r.wordLength="uint64");r._wordLengthNumber=r._numericProcessor.getWordLength(i),r._validateMinMax("both");var T=r._numericProcessor.createDescriptor(r.value),S=r._numericProcessor.validate(T,r._minObject,r._maxObject);r._setTicksAndInterval(),r._numericProcessor.updateValue(S);break;case"scalePosition":r._setInitialComponentDisplay(),r._setTicksAndInterval(),r._moveThumbBasedOnValue(r._drawValue);break;case"labelFormatFunction":case"scientificNotation":if("date"===r.mode&&"scientificNotation"===e)return;var x=r._discardDecimalSeparator(r.value,r.decimalSeparator);r._setTicksAndInterval(),r._updateTooltipValue(x);break;case"logarithmicScale":if("date"===r.mode)return void(r.logarithmicScale=!1);r._validateMinMax("both"),r._setTicksAndInterval(),r._validate(!1,r.value,void 0,!0);break;case"ticksPosition":"scale"===i?(r.$trackTicksContainer.addClass("jqx-hidden"),r.$.trackTicksContainer.innerHTML=""):r.$trackTicksContainer.removeClass("jqx-hidden"),r._numericProcessor.addTicksAndLabels();break;case"customInterval":i?(r._customTicks&&(r.customTicks=r._customTicks),r._numericProcessor.validateCustomTicks()):"date"===r.mode&&(r._customTicks=r.customTicks),r._setTicksAndInterval(),r._coerceCustomInterval();break;case"customTicks":if("date"===r.mode&&!r.customInterval)return r._customTicks=i,void(r.customTicks=t);r._numericProcessor.validateCustomTicks(),r.customInterval&&(r._setTicksAndInterval(),r._coerceCustomInterval());break;case"dateLabelFormatString":"date"===r.mode&&r._setTicksAndInterval();break;case"mode":r.mode=t;break;case"showThumbLabel":i&&r.showTooltip&&(r.showTooltip=!1);break;case"showTooltip":i&&r.showThumbLabel&&(r.showThumbLabel=!1);break;case"validation":"strict"===i&&r._validate(!1,r.value)}}},{key:"_setSettingsObject",value:function(){var e=this;"horizontal"===e.orientation?e._settings={clientSize:"clientWidth",dimension:"width",leftOrTop:"left",margin:"marginLeft",offset:"offsetLeft",otherSize:"offsetHeight",size:"offsetWidth",page:"pageX"}:e._settings={clientSize:"clientHeight",dimension:"height",leftOrTop:"top",margin:"marginTop",offset:"offsetTop",otherSize:"offsetWidth",size:"offsetHeight",page:"pageY"}}},{key:"_setInitialComponentDisplay",value:function(){var e=this;switch(e.scalePosition){case"near":e.$scaleNear.removeClass("jqx-hidden"),e.$scaleFar.addClass("jqx-hidden");break;case"far":e.$scaleNear.addClass("jqx-hidden"),e.$scaleFar.removeClass("jqx-hidden");break;case"both":e.$scaleFar.removeClass("jqx-hidden"),e.$scaleNear.removeClass("jqx-hidden");break;case"none":e.$scaleFar.addClass("jqx-hidden"),e.$scaleNear.addClass("jqx-hidden")}e.$tooltip.addClass("jqx-hidden"),"track"===e.ticksPosition&&e.$trackTicksContainer.removeClass("jqx-hidden")}},{key:"_styleChangedHandler",value:function(){var e=this;return e._isVisible()?e._renderingSuspended?void e._createElement():void(e._renderingSuspended||(e._setTicksAndInterval(),e._moveThumbBasedOnValue(e._drawValue))):void(e._renderingSuspended=!0)}},{key:"_validateInitialPropertyValues",value:function(){var e=this,a=babelHelpers.typeof(e.value)===String?e.value.replace(/\s/g,""):e.value.toString().replace(/\s/g,"");"numeric"===e.mode&&e._numericProcessor.regexScientificNotation.test(a)&&(e.value=e._numericProcessor.scientificToDecimal(a),delete e._valueBeforeCoercion),e.significantDigits=null!==e.significantDigits?Math.min(Math.max(e.significantDigits,1),21):null,null===e.significantDigits&&null===e.precisionDigits?e.significantDigits=8:null!==e.significantDigits&&null!==e.precisionDigits&&e.error(e.localize("significantPrecisionDigits",{elementType:e.nodeName.toLowerCase()})),e._validateMinMax("both",!0),e.showTooltip&&e.showThumbLabel&&(e.showTooltip=!1)}},{key:"_validateMinMax",value:function(e,a,t){function i(e,t){r._numericProcessor.validateMinMax("min"===e||a,"max"===e||a);var i=r["_"+e+"Object"];("min"===e?r._numericProcessor.compare(r.max,i,!0)<=0:r._numericProcessor.compare(r.min,i,!0)>0)?t?(r._numberRenderer=new JQX.Utilities.NumberRenderer(t),"min"===e?n=!1:o=!1,r[e]=t,r["_"+e+"Object"]=t):r.error(r.localize("invalidMinOrMax",{elementType:r.nodeName.toLowerCase(),property:e})):(r._numberRenderer=new JQX.Utilities.NumberRenderer(i),r[e]=r["_"+e+"Object"])}var r=this,n="min"===e||"both"===e,o="max"===e||"both"===e;void 0===(void 0===a?"undefined":babelHelpers.typeof(a))&&(a=!1),"both"===e?(i("min",t),i("max",t)):i(e,t),r.logarithmicScale?r._validateOnLogarithmicScale(n,o,t):(r._drawMin=r.min,r._drawMax=r.max),r.min=r.min.toString(),r.max=r.max.toString(),r._minObject=r._numericProcessor.createDescriptor(r.min),r._maxObject=r._numericProcessor.createDescriptor(r.max),"date"===r.mode&&(r._minDate=JQX.Utilities.DateTime.fromFullTimeStamp(r.min),r._maxDate=JQX.Utilities.DateTime.fromFullTimeStamp(r.max)),r._numericProcessor.validateInterval(r.interval),r.customInterval&&r._numericProcessor.validateCustomTicks()}},{key:"_calculateTickInterval",value:function(){var e=this,a=e._tickIntervalHandler.getInterval("linear",e._drawMin,e._drawMax,e.$.track,e.logarithmicScale);a.major!==e._majorTicksInterval?(e._intervalHasChanged=!0,e._majorTicksInterval=a.major):e._intervalHasChanged=!0,e._minorTicksInterval=a.minor,"date"===e.mode&&e._calculateDateInterval(a.major)}},{key:"_calculateDateInterval",value:function(e){var a=this,t={month:"2628000000000000000000000000000",day:"86400000000000000000000000000",hour:"3600000000000000000000000000",minute:"60000000000000000000000000",second:"1000000000000000000000000"},i="year",r=new JQX.Utilities.BigNumber("31536000000000000000000000000000"),n=r.subtract(e).abs(),o=new JQX.Utilities.BigNumber(a.min).subtract(a.max).abs(),l=o.divide(e).toString();l<2&&(e=o.divide(3));for(var s in t)if(t.hasOwnProperty(s)){var c=new JQX.Utilities.BigNumber(t[s]),d=c.subtract(e).abs();if(-1!==d.compare(n))break;i=s,r=c,n=d}if("second"===i){if(a._numberRenderer.numericValue=parseFloat(e),a._numberRenderer.numericValue<1e3)return a._dateIncrementMethod="addYoctoseconds",void(a._dateIntervalNumber=1);var u=a._numberRenderer.toScientific(10);return u=u.charAt(u.length-1),a._dateIncrementMethod=a._unitToMethod[u],void(a._dateIntervalNumber=Math.pow(10,a._numericProcessor.prefixesToPowers[u]))}a._dateInterval=!0;var m=!a.customInterval,v=void 0,_=void 0,g=void 0;switch(m&&(v=[new JQX.Utilities.BigNumber(a.min)],_=o.divide(r).toString(),g=Math.max(1,Math.floor(_/l))),i){case"year":if(m)for(var p=a._minDate.year()+g;p<a._maxDate.year();p+=g)v.push(new JQX.Utilities.BigNumber(new JQX.Utilities.DateTime(p,1,1).getTimeStamp()));a._dateIncrementMethod="addYears";break;case"month":if(m)for(var h=new JQX.Utilities.DateTime(a._minDate.year(),a._minDate.month()+g,1);-1===h.compare(a._maxDate);h.addMonths(g,!1))v.push(new JQX.Utilities.BigNumber(h.getTimeStamp()));a._dateIncrementMethod="addMonths";break;case"day":if(m)for(var f=new JQX.Utilities.DateTime(a._minDate.year(),a._minDate.month(),a._minDate.day()+g);-1===f.compare(a._maxDate);f.addDays(g,!1))v.push(new JQX.Utilities.BigNumber(f.getTimeStamp()));a._dateIncrementMethod="addDays",a._dateIntervalNumber=8.64e28;break;case"hour":if(m)for(var b=new JQX.Utilities.DateTime(a._minDate.year(),a._minDate.month(),a._minDate.day(),a._minDate.hour()+g);-1===b.compare(a._maxDate);b.addHours(g,!1))v.push(new JQX.Utilities.BigNumber(b.getTimeStamp()));a._dateIncrementMethod="addHours",a._dateIntervalNumber=3.6e27;break;case"minute":if(m)for(var k=new JQX.Utilities.DateTime(a._minDate.year(),a._minDate.month(),a._minDate.day(),a._minDate.hour(),a._minDate.minute()+g);-1===k.compare(a._maxDate);k.addMinutes(g,!1))v.push(new JQX.Utilities.BigNumber(k.getTimeStamp()));a._dateIncrementMethod="addMinutes",a._dateIntervalNumber=6e25}m&&(-1===v[v.length-1].compare(a.max)&&v.push(new JQX.Utilities.BigNumber(a.max)),a.customTicks=v)}},{key:"_formatNumber",value:function(e){var a=this;if("date"===a.mode){return JQX.Utilities.DateTime.fromFullTimeStamp(e).toString(a.dateLabelFormatString)}var t=a._numberRenderer,i=parseFloat(e);if(t.numericValue=e,a.scientificNotation)i=a._numberRenderer.toScientific(a.significantDigits,a.precisionDigits);else switch(a.scaleType){case"floatingPoint":i=a._applyDecimalSeparator(t.toDigits(a.significantDigits,a.precisionDigits));break;case"integer":i=t.isENotation(i)?Math.round(t.largeExponentialToDecimal(i)):Math.round(i),i=t.toDigits(a.significantDigits,0)}return i}},{key:"_formatLabel",value:function(e,a){var t=this,i=void 0;return t.labelFormatFunction&&("date"===t.mode&&(e=JQX.Utilities.DateTime.fromFullTimeStamp(e)),void 0!==(i=t.labelFormatFunction(e))&&""!==i)?i:(i=t._formatNumber(e),t._numberRenderer=new JQX.Utilities.NumberRenderer(i),t.showUnit&&(i+=!1!==a?' <span class="jqx-unselectable">'+t.unit+"</span>":" "+t.unit),i)}},{key:"_layout",value:function(){var e=this,a=e.$.container.style,t=e._tickIntervalHandler.labelsSize.minLabelSize/2+"px",i=e._tickIntervalHandler.labelsSize.maxLabelSize/2+"px";switch(e.orientation){case"horizontal":if("none"===e.scalePosition){a.paddingLeft="",a.paddingRight="";break}e.inverted?(a.paddingLeft=i,a.paddingRight=t):(a.paddingLeft=t,a.paddingRight=i);break;case"vertical":if("none"===e.scalePosition){a.paddingTop="",a.paddingBottom="";break}e.inverted?(a.paddingBottom=i,a.paddingTop=t):(a.paddingBottom=t,a.paddingTop=i)}e._measurements.trackLength=e.$.track[this._settings.clientSize]}},{key:"_trackDownHandler",value:function(e){var a=this;a.disabled||a.readonly||!JQX.Utilities.Core.isMobile&&0!==e.button||("switchUntilReleased"===a.mechanicalAction&&(a._cachedValue={},a._cachedValue._number=a._number,a._cachedValue._drawValue=a._drawValue,a._cachedValue.value=a.value,a._valueDate&&(a._cachedValue._valueDate=a._valueDate)),a._getTrackStartAndEnd(),a._moveThumbBasedOnCoordinates(e,!0,"switchWhenReleased"!==a.mechanicalAction),a._thumbDragged=!0,a.$track.addClass("jqx-dragged"),a.showTooltip&&a.$tooltip.removeClass("jqx-hidden"))}},{key:"_trackMoveHandler",value:function(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}},{key:"_documentMoveHandler",value:function(e){var a=this;a._thumbDragged&&(e.originalEvent.preventDefault(),a._moveThumbBasedOnCoordinates(e,!0,"switchWhenReleased"!==a.mechanicalAction),a.$fill.addClass("disable-animation"))}},{key:"_documentUpHandler",value:function(e){var a=this;if(a._thumbDragged){if("switchWhenReleased"===a.mechanicalAction)a._moveThumbBasedOnCoordinates(e,!0,!0);else if("switchUntilReleased"===a.mechanicalAction&&a._numericProcessor.compare(a._number,a._cachedValue._number)){var t=a._getEventValue();a._number=a._cachedValue._number,a._drawValue=a._cachedValue._drawValue,a._cachedValue._valueDate&&(a._valueDate=a._cachedValue._valueDate),a.value=a._cachedValue.value,a._moveThumbBasedOnValue(a._drawValue);var i=a._getEventValue();a.$.fireEvent("change",{value:i,oldValue:t}),a.$.hiddenInput.value=i}a.showTooltip&&a.$tooltip.addClass("jqx-hidden"),a._thumbDragged=!1,a.$track.removeClass("jqx-dragged"),a.$fill.removeClass("disable-animation")}}},{key:"_selectStartHandler",value:function(e){this._thumbDragged&&e.preventDefault()}},{key:"_resizeHandler",value:function(){var e=this;return e._isVisible()?e._renderingSuspended?void e._createElement():void(e._renderingSuspended||(!0!==e._orientationChanged&&(e._setTicksAndInterval(),e._moveThumbBasedOnValue(e._drawValue)),e._trackChanged&&(e._measurements.trackLength=e.$.track[this._settings.clientSize],e._setTicksAndInterval(),e._moveThumbBasedOnValue(e._drawValue)),e._setTrackSize(),delete e._orientationChanged,delete e._trackChanged)):void(e._renderingSuspended=!0)}},{key:"_moveThumbBasedOnCoordinates",value:function(e,a,t){var i=this,r=a?Math.min(Math.max(e[i._settings.page],i._trackStart),i._trackEnd):e[i._settings.page],n=i._numericProcessor.pxToValue(r);i.logarithmicScale?(i._drawValue=Math.log10(n),n=i._numericProcessor.getCoercedValue(i._drawValue)):(i._drawValue=n,n=i._numericProcessor.getCoercedValue(n)),r=Math.min(Math.max(i._numericProcessor.valueToPx(n)+i._trackStart,i._trackStart),i._trackEnd);var o=r-i._trackStart;i.updateFillSizeAndPosition(o,i._settings.margin,n,!0,t),e.originalEvent&&e.originalEvent.stopPropagation()}},{key:"_moveThumbBasedOnValue",value:function(e){var a=this,t=a._numericProcessor.valueToPx(a._numericProcessor.getCoercedValue(e));a.updateFillSizeAndPosition(t,a._settings.margin,e,!0)}},{key:"updateFillSizeAndPosition",value:function(e,a,t,i,r){var n=this,o=n.$.fill.style;if(n._normalLayout?o[n._settings.dimension]=e+"px":(o[n._settings.dimension]=Math.min(n._measurements.trackLength,Math.max(0,n._measurements.trackLength-e))+"px",o[a]=e+"px"),i){var l=n.value;delete n._valueBeforeCoercion,n._numericProcessor.updateToolTipAndValue(t,l,r)}}},{key:"_updateTooltipValue",value:function(e){var a=this;void 0===e&&(e=a.value),a.logarithmicScale&&(e=Math.pow(10,e.toString())),e=a._formatLabel(e),a.$.tooltipContent.innerHTML=e,a.$.thumbLabel.innerHTML=e}},{key:"_getSize",value:function(e,a){function t(e,a){var t=e.getElementsByClassName("jqx-label");l=t[0],s=t[t.length-1];var i=window.getComputedStyle(t[0])[a];c+=parseFloat(i)}var i=this,r=window.getComputedStyle(i),n=window.getComputedStyle(i.$.track),o=i._trackSize+parseFloat(n[a.marginA])+parseFloat(n[a.marginB]),l=void 0,s=void 0,c=void 0,d=void 0;switch(c=o,i.scalePosition){case"none":return c+=parseFloat(r[a.paddingA])+parseFloat(r[a.paddingB]),d=void 0!==i._tankSizeBeforeOrientation?"horizontal"===i.orientation?i._tankSizeBeforeOrientation.height:i._tankSizeBeforeOrientation.width:"horizontal"===i.orientation?parseFloat(n.width):parseFloat(n.height),!0!==i._trackChanged&&(i._trackChanged=!0),{optimalSize:c,optimalOtherSize:d};case"near":c+=e,t(i.$.scaleNear,a.nearScaleDistance);break;case"far":c+=e,t(i.$.scaleFar,a.farScaleDistance);break;case"both":c+=2*e,t(i.$.scaleNear,a.nearScaleDistance),t(i.$.scaleFar,a.farScaleDistance)}var u=void 0,m=void 0,v=void 0;return c+=parseFloat(r[a.paddingA])+parseFloat(r[a.paddingB]),u=l.getBoundingClientRect(),m=s.getBoundingClientRect(),d=i[a.offset],v=u[a.distance]+l[a.offset]-m[a.distance],v>0&&(d=l[a.offset]+s[a.offset]),{optimalSize:c,optimalOtherSize:d}}},{key:"_getRange",value:function(){var e=this;if(e.logarithmicScale)return void(e._range=e._drawMax-e._drawMin);"floatingPoint"===e.scaleType?e._range=(e._drawMax-e._drawMin).toString():e._range=new JQX.Utilities.BigNumber(e._drawMax).subtract(e._drawMin).toString()}},{key:"_getTrackStartAndEnd",value:function(){var e=this,a=void 0,t=e.$.track.getBoundingClientRect();if("horizontal"===e.orientation){var i=document.body.scrollLeft||document.documentElement.scrollLeft;a=t.left+i}else{var r=document.body.scrollTop||document.documentElement.scrollTop;a=t.top+r}var n=a+e._measurements.trackLength,o=n-a;e._trackStart=a,e._trackEnd=n,e._valuePerPx=e._numericProcessor.getValuePerPx(e._range,o)}},{key:"_updateScaleWidth",value:function(e){var a=this,t="track"===a.ticksPosition?4:12;switch(a.labelsVisibility){case"all":e=a._numericProcessor._longestLabelSize;break;case"endPoints":e=Math.max(a._tickIntervalHandler.labelsSize.minLabelOtherSize,a._tickIntervalHandler.labelsSize.maxLabelOtherSize);break;case"none":e=0}var i=t+e,r=window.getComputedStyle(a.$.track);if(Boolean(r.getPropertyValue("--jqx-tank-scale-size")))a.$.container.style.setProperty("--jqx-tank-scale-size",i+"px");else{var n=window.getComputedStyle(a),o=a.$.scaleNear.style,l=a.$.scaleFar.style,s=a.$.track.style,c=parseFloat(r.getPropertyValue("min-width")),d=void 0,u=void 0,m=void 0,v=void 0,_=parseFloat(r.getPropertyValue("outline-width"))||0,g=parseFloat(r.getPropertyValue("outline-offset"))||0,p=_+g,h=void 0;switch(a.orientation){case"horizontal":d="height",u="width",m=a.offsetHeight,h=parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("padding-bottom")),v=parseFloat(r.getPropertyValue("margin-top"))+parseFloat(r.getPropertyValue("margin-bottom"));break;case"vertical":d="width",u="height",m=a.offsetWidth,h=parseFloat(n.getPropertyValue("padding-left"))+parseFloat(n.getPropertyValue("padding-right")),v=parseFloat(r.getPropertyValue("margin-left"))+parseFloat(r.getPropertyValue("margin-right"))}switch(a.scalePosition){case"near":o.setProperty(d,i+"px"),s.setProperty(d,Math.max(isNaN?0:c,m-h-i-4-v-p)+"px");break;case"far":l.setProperty(d,i+"px"),s.setProperty(d,Math.max(isNaN?0:c,m-h-i-4-v-p)+"px");break;case"both":o.setProperty(d,i+"px"),l.setProperty(d,i+"px"),s.setProperty(d,Math.max(isNaN?0:c,m-h-2*i-4-v-p)+"px");break;case"none":s.setProperty(d,"")}s.setProperty(u,"100%"),o.setProperty(u,"100%"),l.setProperty(u,"100%")}}},{key:"_appendTicksAndLabelsToScales",value:function(e,a){function t(t){t.innerHTML=a,"scale"===i.ticksPosition&&(t.innerHTML+=e)}var i=this;switch(i.scalePosition){case"near":t(i.$.scaleNear);break;case"far":t(i.$.scaleFar);break;case"both":t(i.$.scaleNear),t(i.$.scaleFar)}"track"===i.ticksPosition&&(i.$.trackTicksContainer.innerHTML=e)}},{key:"_discardDecimalSeparator",value:function(e,a){var t=this;if(void 0===a&&(a=t.decimalSeparator),"."!==a){var i=new RegExp(a,"g");return"string"==typeof e?e.replace(i,"."):e.toString().replace(i,".")}return e}},{key:"_applyDecimalSeparator",value:function(e){var a=this;return"string"!=typeof e&&(e=e.toString()),"."!==a.decimalSeparator&&(e=e.replace(/\./g,a.decimalSeparator)),e}},{key:"_validate",value:function(e,a,t,i){var r=this,n=void 0;r._programmaticValueIsSet=i&&"interaction"===r.validation,n=e?r.value:a;var o=void 0,l=void 0;!0!==t&&r.coerce?(o=r._numericProcessor.createDescriptor(n,!0,!0,!0),o=r.logarithmicScale?Math.pow(10,r._numericProcessor.getCoercedValue(Math.log10(o))):r._numericProcessor.getCoercedValue(o),l=o):"strict"===r.validation||!e&&!r._programmaticValueIsSet?(o=r._numericProcessor.createDescriptor(n,!0,!0,!0),l=o):(o=r._numericProcessor.createDescriptor(n,!0,!0,!1),l=r._numericProcessor.validate(o,r._minObject,r._maxObject)),r._numericProcessor.regexScientificNotation.test(l)&&(l=r._numericProcessor.scientificToDecimal(l)),l=r._discardDecimalSeparator(l,r.decimalSeparator),e?(r._number=l,r._drawValue=r.logarithmicScale?Math.log10(l):l,"numeric"===r.mode?r.value=o.toString():(r._valueDate=JQX.Utilities.DateTime.fromFullTimeStamp(o),r.value=o),delete r._valueBeforeCoercion,r._moveThumbBasedOnValue(r._drawValue)):r._numericProcessor.updateValue(o),r._programmaticValueIsSet=!1}},{key:"_changeScaleType",value:function(){var e=this;e._numericProcessor=new JQX.Utilities.NumericProcessor(e,"scaleType"),e._validateMinMax("both"),e._setTicksAndInterval(),e._scaleTypeChangedFlag=!0,e._validate(!0,e._number.toString()),e._scaleTypeChangedFlag=!1}},{key:"_setTicksAndInterval",value:function(){var e=this;if(!e._isVisible()||e._renderingSuspended)return void(e._renderingSuspended=!0);var a=e._formatLabel(e.min),t=e._formatLabel(e.max);e._getRange(),e._tickIntervalHandler=new JQX.Utilities.TickIntervalHandler(e,a,t,"jqx-label",e._settings.size,"integer"===e.scaleType,e.logarithmicScale),e._layout(),e.customInterval?("date"===e.mode&&e._calculateTickInterval(),e._intervalHasChanged=!0,e._numericProcessor.addCustomTicks()):(e._calculateTickInterval(),e._dateInterval?(e._intervalHasChanged=!0,e._numericProcessor.addCustomTicks()):e._numericProcessor.addTicksAndLabels())}},{key:"_setFocusable",value:function(){var e=this;if(e.disabled||e.unfocusable)return void e.removeAttribute("tabindex");e.tabIndex=e.tabIndex>0?e.tabIndex:0}},{key:"_keyIncrementDecrement",value:function(e,a){var t=this,i="add"===e?1:-1,r=void 0===a;if(r&&(a=t.logarithmicScale?new JQX.Utilities.BigNumber(t._drawValue):t._drawValue),t.customInterval&&t.coerce){r&&(t.logarithmicScale&&(a=t.value),"numeric"===t.mode&&(a=a.toString()));var n=void 0,o=void 0;"numeric"===t.mode?(n=-1!==t.customTicks.indexOf(t.min)?t.customTicks.slice(0):[t.min].concat(t.customTicks),o=n.indexOf(a)):(n=-1!==t.customTicks.findIndex(function(e){return 0===e.compare(t._drawMin)})?t.customTicks.slice(0):[t._drawMin].concat(t.customTicks),o=n.findIndex(function(e){return 0===e.compare(a)}));var l=n[o+1*i];return void 0!==l?l:a===t.max&&"subtract"===e?n[n.length-2]:a}if("numeric"===t.mode){var s=t._numericProcessor.incrementDecrement(a,e,t._validInterval);return t.logarithmicScale&&(t._drawValue=s,s=Math.pow(10,Math.round(s))),s}return"interaction"!==t.validation||-1!==t._valueDate.compare(t._minDate)&&1!==t._valueDate.compare(t._maxDate)||(t._valueDate=JQX.Utilities.DateTime.fromFullTimeStamp(t._drawValue)),t._valueDate[t._dateIncrementMethod](i*parseFloat(t.interval),!1),t._drawValue=new JQX.Utilities.BigNumber(t._valueDate.getTimeStamp()),-1===t._drawValue.compare(t._drawMin)&&(t._drawValue=new JQX.Utilities.BigNumber(t._drawMin),t._valueDate=JQX.Utilities.DateTime.fromFullTimeStamp(t._drawValue)),1===t._drawValue.compare(t._drawMax)&&(t._drawValue=new JQX.Utilities.BigNumber(t._drawMax),t._valueDate=JQX.Utilities.DateTime.fromFullTimeStamp(t._drawValue)),t._drawValue}},{key:"_keydownHandler",value:function(e){var a=this;if(!a.disabled&&!a.readonly){var t=e.charCode?e.charCode:e.which;if(-1!==[35,36,37,38,39,40].indexOf(t)){var i=[35,38,39].indexOf(t)>-1,r=[36,37,40].indexOf(t)>-1;if(e.preventDefault(),"floatingPoint"===a.scaleType){if(parseFloat(a.value)<=parseFloat(a.min)&&r||parseFloat(a.value)>=parseFloat(a.max)&&i)return}else{var n=new JQX.Utilities.BigNumber(a._drawValue);if(1!==n.compare(a._drawMin)&&r||-1!==n.compare(a._drawMax)&&i)return}var o=void 0;switch(t){case 40:case 37:o=a._keyIncrementDecrement("subtract");break;case 38:case 39:o=a._keyIncrementDecrement("add");break;case 36:a._drawValue=a._drawMin,o=a.min;break;case 35:a._drawValue=a._drawMax,o=a.max}return a._validate(!1,o,t),!1}}}},{key:"_setDrawVariables",value:function(){var e=this;e.logarithmicScale?(e._drawValue=Math.log10(e.value),e._drawMin=Math.log10(e.min),e._drawMax=Math.log10(e.max)):(e._drawValue=e.value,e._drawMin=e.min,e._drawMax=e.max)}},{key:"_validateOnLogarithmicScale",value:function(e,a){function t(e){return Math.pow(10,Math.round(Math.log10(e)-Math.log10(5.5)+.5))}var i=this;if(e)if(i.min<=0)i.min=1,i._drawMin=0;else if(Math.log10(i.min)%1!=0){var r=t(parseFloat(i.min));r>i.min&&(r/=10),i._drawMin=Math.log10(i.min)}else i._drawMin=Math.log10(i.min);if(a)if(i.max<=0)i.max=1,i._drawMax=0;else if(Math.log10(i.max)%1!=0){var n=t(parseFloat(i.max));n<i.max&&(n*=10),i._drawMax=Math.log10(i.max)}else i._drawMax=Math.log10(i.max);"integer"===i.scaleType&&(i._drawMin<0&&(i._drawMin=0,i.min=1),i._drawMax<0&&(i._drawMax=1,i.max=10)),i._drawMax===i._drawMin&&(i._drawMax=i._drawMin+1)}},{key:"_getLayoutType",value:function(){var e=this,a=e.orientation,t=e.inverted;e._normalLayout="horizontal"===a&&!t||"vertical"===a&&t}},{key:"_trackOnMouseEnterHandler",value:function(){var e=this;e.readonly||e.disabled||(e.$track.addClass("track-hovered"),e.$.track.setAttribute("hover",""))}},{key:"_trackOnMouseLeaveHandler",value:function(){var e=this;e.readonly||e.disabled||(e.$track.removeClass("track-hovered"),e.$.track.removeAttribute("hover"))}},{key:"_isVisible",value:function(){var e=this;return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}},{key:"_coerceCustomInterval",value:function(){var e=this;if(e.coerce){
var a=e._valueBeforeCoercion,t=e.logarithmicScale?Math.pow(10,e._numericProcessor.getCoercedValue(Math.log10(e.value))):e._numericProcessor.getCoercedValue(e.value);e._validate(!1,t,!0,!0),e._valueBeforeCoercion=a}}},{key:"_handleDateScale",value:function(){var e=this,a=JQX.Utilities.DateTime;a||e.error(e.localize("missingReference",{elementType:e.nodeName.toLowerCase(),files:"jqxdate.js"})),e._customTicks=e.customTicks,e._unitToMethod={Y:"addSeconds",Z:"addMilliseconds",E:"addMicroseconds",P:"addNanoseconds",T:"addPicoseconds",G:"addFemtoseconds",M:"addAttoseconds",k:"addZeptoseconds"},e._minDate=a.validateDate(e.min),e.min=e._minDate.getTimeStamp(),e._maxDate=a.validateDate(e.max),e.max=e._maxDate.getTimeStamp(),e.rangeSlider||(e._valueDate=a.validateDate(e.value),e.value=e._valueDate.getTimeStamp()),e._properties.min.serialize="_serializeMin",e._properties.max.serialize="_serializeMax",e._properties.value.serialize="_serializeValue",e.scaleType="integer",e.logarithmicScale=!1,e.wordLength="uint64";for(var t=["min","max","value"],i=0;i<t.length;i++)!function(a){var i=t[a];Object.defineProperty(e,i,{get:function(){return e.context===e?e.properties[i].value:e["_"+i+"Date"]},set:function(a){e.updateProperty(e,e._properties[i],a)}})}(i);e._getEventValue=function(){return e._valueDate.clone()}}},{key:"_serializeMin",value:function(){return this._minDate.toString()}},{key:"_serializeMax",value:function(){return this._maxDate.toString()}},{key:"_serializeValue",value:function(){return this._valueDate.toString()}},{key:"_redefineProperty",value:function(e){var a=this;Object.defineProperty(a,e,{get:function(){return a.properties[e].value},set:function(t){function i(e,a){return a instanceof JQX.Utilities.BigNumber?a.toString():a}var r=a.properties[e].value;if(JSON.stringify(r,i)!==JSON.stringify(t,i)&&(a.properties[e].value=t,a.isReady&&(!a.ownerElement||a.ownerElement&&a.ownerElement.isReady)&&a.context!==a)){var n=a.context;a.context=a,a.propertyChangedHandler(e,r,t),a.context=n}}})}}],[{key:"properties",get:function(){return{coerce:{value:!1,type:"boolean"},customInterval:{value:!1,type:"boolean"},customTicks:{reflectToAttribute:!1,value:["0","50","100"],type:"array"},dateLabelFormatString:{value:"d",type:"string"},decimalSeparator:{value:".",type:"string"},interval:{value:"1",type:"any"},inverted:{value:!1,type:"boolean"},labelFormatFunction:{value:null,type:"function?"},labelsVisibility:{value:"all",allowedValues:["all","endPoints","none"],type:"string"},logarithmicScale:{value:!1,type:"boolean"},max:{value:"100",type:"any"},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},messages:{value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}.",significantPrecisionDigits:"{{elementType}}: the properties significantDigits and precisionDigits cannot be set at the same time.",invalidMinOrMax:"{{elementType}}: Invalid {{property}} value. Max cannot be lower than Min.",noInteger:'{{elementType}}: precisionDigits could be set only on "floatingPoint" scaleType.'}},type:"object",extend:!0},min:{value:"0",type:"any"},mode:{value:"numeric",allowedValues:["numeric","date"],type:"string"},name:{value:"",type:"string"},orientation:{value:"vertical",allowedValues:["horizontal","vertical"],type:"string"},precisionDigits:{value:null,type:"number?"},scalePosition:{value:"near",allowedValues:["near","far","both","none"],type:"string"},scaleType:{value:"floatingPoint",allowedValues:["floatingPoint","integer"],type:"string"},scientificNotation:{value:!1,type:"boolean"},showThumbLabel:{value:!1,type:"boolean"},showTooltip:{value:!1,type:"boolean"},showUnit:{value:!1,type:"boolean"},significantDigits:{value:null,type:"number?"},thumbLabelPosition:{value:"near",allowedValues:["near","far"],type:"string"},ticksPosition:{value:"scale",allowedValues:["scale","track"],type:"string"},ticksVisibility:{value:"minor",allowedValues:["major","minor","none"],type:"string"},tooltipPosition:{value:"near",allowedValues:["near","far"],type:"string"},unit:{value:"kg",type:"string"},validation:{value:"strict",allowedValues:["strict","interaction"],type:"string"},value:{value:"0",type:"any"},wordLength:{value:"int32",allowedValues:["int8","uint8","int16","uint16","int32","uint32","int64","uint64"],type:"string"}}}},{key:"listeners",get:function(){return{"track.down":"_trackDownHandler","track.move":"_trackMoveHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler",keydown:"_keydownHandler",resize:"_resizeHandler",styleChanged:"_styleChangedHandler","document.selectstart":"_selectStartHandler","track.mouseenter":"_trackOnMouseEnterHandler","track.mouseleave":"_trackOnMouseLeaveHandler"}}},{key:"requires",get:function(){return{"JQX.Utilities.BigNumber":"jqxmath.js","JQX.Utilities.NumericProcessor":"jqxnumeric.js","JQX.Utilities.TickIntervalHandler":"jqxtickintervalhandler.js"}}},{key:"styleUrls",get:function(){return["jqx.tank.css"]}}]),a}(JQX.BaseElement));
//# sourceMappingURL=jqxtank.js.map
