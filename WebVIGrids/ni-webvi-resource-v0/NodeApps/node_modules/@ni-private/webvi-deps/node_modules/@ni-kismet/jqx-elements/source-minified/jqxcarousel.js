"use strict";JQX("jqx-carousel",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="itemsContainer" inner-h-t-m-l="[[innerHTML]]" class="jqx-items-container"><content></content></div>\n                    <jqx-repeat-button initial-delay="0" delay="[[delay]]" id="arrowLeft" animation="[[animation]]" unfocusable class="jqx-arrow jqx-arrow-left"></jqx-repeat-button>\n                    <jqx-repeat-button initial-delay="0" delay="[[delay]]" id="arrowRight" animation="[[animation]]" unfocusable class="jqx-arrow jqx-arrow-right"></jqx-repeat-button>\n                    <div id="indicatorsContainer" class="jqx-indicators-container"></div>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,a,n){var r=this;switch(babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,a,n),e){case"disabled":r._setFocusable();break;case"dataSource":if(r._generateIndicators(),r._generateItems(),r._handleIndicatorsState(0,0),r._handleItemsState(0,0),r._handle3dMode(0),!1!==r.autoPlay){var i=parseInt(r.autoPlay);i?setTimeout(function(){r.play()},i):r.play()}r._animationTrigger(r._currentIndex);break;case"itemTemplate":r._generateItems(),r._handleItemsState(r._currentIndex,r._currentIndex+1);break;case"indicatorTemplate":r._generateIndicators(),r._handleIndicatorsState(r._currentIndex,r._currentIndex+1);break;case"interval":r.pause(),r.play();break;case"loop":r._handleArrowsActiveState(r._currentIndex,r._currentIndex);break;case"hideArrows":n||r._handleArrowsActiveState(r._currentIndex,r._currentIndex);break;case"displayMode":"multiple"===a&&r.$.itemsContainer.removeAttribute("style")}}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);var e=this;if(e._setInitialState(),e._generateIndicators(),e._generateItems(),e._handleIndicatorsState(0,0),e._handleItemsState(0,0),e._handle3dMode(0),!1!==e.autoPlay){var a=parseInt(e.autoPlay);a?setTimeout(function(){e.play()},a):e.play()}e._setFocusable(),e._animationTrigger(e._currentIndex)}},{key:"next",value:function(){var e=this,t=e.dataSource.length;if(!e.disabled&&0!==t){var a=e._currentIndex;a=e.loop?a>=t-1?0:a+1:a>=t-1?a:a+1,e._goToItem(a)}}},{key:"pause",value:function(){var e=this;e._handleRotation(),e._rotate=!1}},{key:"slideTo",value:function(e){var t=this;e=e?parseInt(e):0,t.disabled||e<0||e>t._items.length||t._goToItem(e)}},{key:"prev",value:function(){var e=this,t=e.dataSource.length;if(!e.disabled&&0!==t){var a=e._currentIndex;a=e.loop?a<=0?t-1:a-1:a<=0?0:a-1,e._goToItem(a)}}},{key:"play",value:function(){var e=this;!e.disabled&&e.slideShow&&(e._rotationInterval&&clearInterval(e._rotationInterval),e._handleRotation(!0),e._rotate=!0)}},{key:"_animationTrigger",value:function(e){for(var t=this,a=0;a<t._items.length;a++)a!==e&&t._items[a].classList.add("jqx-animate-trigger")}},{key:"_handle3dMode",value:function(e){var t=this,a=t.dataSource.length;if(!t.disabled&&a&&"3d"===t.displayMode){e=e||0;for(var n=0;n<a;n++){var r=n-e;r?t._items[n].setAttribute("position",r):t._items[n].removeAttribute("position")}}}},{key:"_handleArrowsActiveState",value:function(e,t){var a=this,n=a.dataSource.length;a.loop?a.$.arrowLeft.disabled=a.$.arrowRight.disabled=!1:(0===t&&(a.$.arrowLeft.disabled=!1),t===n-1&&(a.$.arrowRight.disabled=!1),0===e&&(a.$.arrowLeft.disabled=!0),e===n-1&&(a.$.arrowRight.disabled=!0))}},{key:"_handleArrowClick",value:function(e){var t=this,a=t._currentIndex;t.disabled||(t.$.arrowLeft.contains(e.target)?t.prev():t.next(),t._changeEvent(a,t._currentIndex))}},{key:"_handleDefaultInnerHTML",value:function(){var e=this;if(!(e.dataSource&&e.dataSource.length>0)&&e.$.itemsContainer.innerHTML.indexOf("<ul")>=0)for(var t=e.$.itemsContainer.getElementsByTagName("ul")[0],a=t.getElementsByTagName("li"),n=0;n<a.length;n++){var r={HTMLcontent:a[n].innerHTML};e.dataSource.push(r)}}},{key:"_handleIndicatorsState",value:function(e,t){var a=this;a.disabled||0===a._indicators.length||!e&&0!==e||!t&&0!==t||(e!==t&&a._indicators[e].classList.remove("jqx-active"),a._indicators[t].classList.add("jqx-active"))}},{key:"_handleItemClick",value:function(e){var t=this,a=e.target.closest(".jqx-carousel-item");if(!t.disabled&&a&&"3d"===t.displayMode&&!t.disableItemClick){var n=parseInt(a.getAttribute("item-id")),r=parseInt(a.getAttribute("position"));Math.abs(r)>3||t._goToItem(n)}}},{key:"_handleItemsState",value:function(e,t){var a=this;a.disabled||0===a._items.length||!e&&0!==e||!t&&0!==t||(e!==t&&(a._items[e].classList.remove("jqx-active"),a._items[e].classList.add("jqx-out")),a._items[t].classList.add("jqx-active"))}},{key:"_handleIndicatorsContainerClick",value:function(e){var t=this,a=e.target.closest(".jqx-indicator"),n=t._currentIndex;if(!t.disabled&&a){var r=parseInt(a.getAttribute("indicator-id"));n!==r&&(t._goToItem(r),t._changeEvent(n,t._currentIndex))}}},{key:"_handleMultipleMode",value:function(e){var t=this;if("multiple"===t.displayMode){var a=t._items[e],n=a.offsetWidth,r=t.$.container.offsetWidth,i=t.$.itemsContainer.offsetWidth,o=0;if(0===e)return void(t.$.itemsContainer.style.marginLeft="0px");if(e===t._items.length-1)return void(t.$.itemsContainer.style.marginLeft="-"+(i-r)+"px");for(var l=0;l<e;l++)o+=t._items[e].offsetWidth;o+n/2>=r/2&&o+n<i&&(t.$.itemsContainer.style.marginLeft="-"+(o+n/2-r/2)+"px")}}},{key:"_changeEvent",value:function(e,t){if(e!==t){var a=this;a.$.fireEvent("changing",{index:t,previousIndex:e}),a.hasAnimation||a.$.fireEvent("change",{index:t,previousIndex:e})}}},{key:"_handleKeyDown",value:function(e){var t=this,a=e.key,n=t._currentIndex,r=["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","Home","End"," ","Enter"];if(!t.disabled&&t.keyboard&&-1!==r.indexOf(a)){switch(a){case"ArrowLeft":case"ArrowDown":t.prev();break;case"ArrowUp":case"ArrowRight":t.next();break;case"Home":t._goToItem(0);break;case"End":t._goToItem(t.dataSource.length-1);break;case" ":t._rotate?t.pause():t.play();break;case"Enter":t.play()}t._changeEvent(n,t._currentIndex)}}},{key:"_handleMouseWheel",value:function(e){var t=this,a=t._currentIndex;!t.disabled&&t.wheel&&document.activeElement===t&&(e.stopPropagation(),e.preventDefault(),e.deltaY>0?t.next():t.prev(),t._changeEvent(a,t._currentIndex))}},{key:"_handleRotation",value:function(e){var t=this;e?t._rotationInterval=setInterval(function(){t.slideShow&&t.next()},t.interval):clearInterval(t._rotationInterval)}},{key:"_handleSwipe",value:function(e){var t=this;!t.disabled&&t.swipe&&(e.stopPropagation(),e.preventDefault(),"swipeleft"===e.type?t.prev():t.next())}},{key:"_generateIndicator",value:function(e){var t=this,a=document.createElement("span"),n=e||0;if(t.indicatorTemplate){var r=t._validateTemplate(t.indicatorTemplate);a.innerHTML=t._processItemTemplate(r.content,t.dataSource[n])}return a.classList.add("jqx-indicator"),a.setAttribute("indicator-id",n),a}},{key:"_generateIndicators",value:function(){for(var e=this,t=e.dataSource.length,a=[],n=document.createDocumentFragment(),r=0;r<t;r++){var i=e._generateIndicator(r);a.push(i),n.appendChild(i)}e._indicators=a;for(var o=e.$.indicatorsContainer;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(n)}},{key:"_generateItem",value:function(e){var t=this,a=document.createElement("div"),n=e||0;if(t.itemTemplate){var r=t._validateTemplate(t.itemTemplate);a.innerHTML=t._processItemTemplate(r.content,t.dataSource[n])}else{var i=t.dataSource[n];"string"==typeof i?a.style.backgroundImage='url("'+i+'")':a.innerHTML='<div class="jqx-carousel-item-container" style="background-image:url(\''+(i.image||"")+'\')">\n                        <h2 class="jqx-carousel-item-label">'+(i.label||"")+'</h2>\n                        <p class="jqx-carousel-item-content">'+(i.content||"")+'</p>\n                    </div>\n                    <div class="jqx-carousel-html-content">'+(i.HTMLcontent||"")+"</div>\n                </div>"}return a.classList.add("jqx-carousel-item"),a.setAttribute("item-id",n),a}},{key:"_processItemTemplate",value:function(e,t){var a=/{{\w+}}/g,n=e.match(a),r=e;return n&&0!==n.length?(n.forEach(function(e){var a=e.replace("{{","").replace("}}","");r=r.replace(e,t[a]||"")}),r):r}},{key:"_generateItems",value:function(){for(var e=this,t=e.dataSource.length,a=[],n=document.createDocumentFragment(),r=0;r<t;r++){var i=e._generateItem(r);a.push(i),n.appendChild(i)}e._items=a;for(var o=e.$.itemsContainer;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(n)}},{key:"_goToItem",value:function(e,t){var a=this,n=a.dataSource.length,r=a._currentIndex,i=e;e<0?i=0:e>n-1&&(i=n-1),a._removeFadeOut(),a._animationTrigger(),a._handleIndicatorsState(r,i),a._handleItemsState(r,i),a._currentIndex=i,t&&a._changeEvent(r,i),a._handle3dMode(i),a._handleMultipleMode(i),a._handleArrowsActiveState(i,r)}},{key:"_setFocusable",value:function(){var e=this;if(e.disabled||e.unfocusable)return e.removeAttribute("tabindex"),void(e.tabIndex=-1);var t=e.tabIndex>0?e.tabIndex:0;e.setAttribute("tabindex",t),e.tabIndex=t}},{key:"_setInitialState",value:function(){var e=this;e._currentIndex=0,e._indicators=[],e._items=[],e._rotate=!1,e._handleDefaultInnerHTML()}},{key:"_validateTemplate",value:function(e){var t=this,a="",n=!1,r=/{{\w+}}/g;return"function"==typeof e&&(a=e()),"content"in document.createElement("template")?(e instanceof HTMLElement?a=e.innerHTML:(e=document.getElementById(e),a=e?e.innerHTML:""),r.exec(a)&&(n=!0),{content:a,hasBindings:n}):(t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()})),void(t.itemTemplate=null))}},{key:"_handleTransitionEnd",value:function(e){if(e.target.classList.contains("jqx-carousel-item")&&!e.target.getAttribute("position")){var t=this,a=e.target.getAttribute("item-id");t._lastTransitionEndId!==a&&(t._removeFadeOut(),this.$.fireEvent("change",{index:a,previousIndex:t._lastTransitionEndId}),t._lastTransitionEndId=a)}}},{key:"_removeFadeOut",value:function(){var e=this,t=e.$.itemsContainer.getElementsByClassName("jqx-out");if(t.length)for(var a=0;a<t.length;a++)t[a].classList.remove("jqx-out")}}],[{key:"properties",get:function(){return{autoPlay:{value:!1,type:"any"},dataSource:{value:[],type:"array",reflectToAttribute:!1},delay:{value:200,type:"number"},displayMode:{allowedValues:["default","multiple","3d"],value:"default",type:"string"},disableItemClick:{value:!1,type:"boolean"},hideArrows:{value:!1,type:"boolean"},hideIndicators:{value:!1,type:"boolean"},indicatorTemplate:{value:null,type:"any"},interval:{value:5e3,type:"number"},itemTemplate:{value:null,type:"any"},keyboard:{value:!1,type:"boolean"},loop:{value:!1,type:"boolean"},messages:{value:{en:{htmlTemplateNotSuported:"{{elementType}}:  Browser doesn't support HTMLTemplate elements."}},type:"object",extend:!0},slideShow:{value:!1,type:"boolean"},swipe:{value:!1,type:"boolean"},wheel:{value:!1,type:"boolean"}}}},{key:"listeners",get:function(){return{"arrowLeft.click":"_handleArrowClick","arrowRight.click":"_handleArrowClick","indicatorsContainer.click":"_handleIndicatorsContainerClick",keydown:"_handleKeyDown",swipeleft:"_handleSwipe",swiperight:"_handleSwipe",wheel:"_handleMouseWheel","itemsContainer.click":"_handleItemClick","itemsContainer.transitionend":"_handleTransitionEnd"}}},{key:"requires",get:function(){return{"JQX.RepeatButton":"jqxbutton.js"}}},{key:"styleUrls",get:function(){return["jqx.button.css","jqx.carousel.css"]}}]),t}(JQX.ContentElement));
//# sourceMappingURL=jqxcarousel.js.map
