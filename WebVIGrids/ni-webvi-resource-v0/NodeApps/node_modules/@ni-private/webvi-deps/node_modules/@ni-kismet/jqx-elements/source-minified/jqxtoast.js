"use strict";JQX("jqx-toast",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return""}},{key:"propertyChangedHandler",value:function(e,n,o){var a=this;switch(e){case"value":var i=a._instances[a._instances.length-1];i&&((a.enableShadowDOM?i.shadowRoot:i).querySelector(".jqx-toast-item-content").innerHTML=o);break;case"appendTo":case"modal":case"position":a._handleContainers();break;default:babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,n,o)}}},{key:"attached",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attached",this).call(this);for(var e=this,n=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"],o=0;o<n.length;o++){var a=e.$["toastContainer"+n[o]];a&&a.children.length&&("Custom"===n[o]?e._appendTo.appendChild(e._container):document.body.appendChild(a))}}},{key:"detached",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detached",this).call(this);for(var e=this,n=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"],o=0;o<n.length;o++){var a=e.$["toastContainer"+n[o]];a&&(e._removeContainerListeners(a),a.parentElement.removeChild(a)),e.closeAll()}}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);var e=this;e.value=e.innerHTML=e.value?e.value:e.innerHTML,e._instances=[],e.autoOpen&&e.open()}},{key:"closeAll",value:function(){for(var e=this,t=e._instances.length-1;t>-1;t--)e._close(e._instances[t])}},{key:"closeItem",value:function(e){var t=this;e&&0!==t._instances.length&&("string"==typeof e?e=document.getElementById(e):e instanceof HTMLElement&&(e=e.closest(".jqx-toast-item")),e&&-1!==t._instances.indexOf(e)&&t._close(e))}},{key:"closeLast",value:function(){var e=this;e._instances.length>0&&e._close(e._instances[e._instances.length-1])}},{key:"open",value:function(){var e=this;if(!e.disabled){e._handleContainers();var t=document.createElement("div");t.className="jqx-toast-item",e.value instanceof HTMLElement?(t.innerHTML=e._defaultItemTemplate(""),t.getElementsByClassName("jqx-toast-item-content")[0].appendChild(e.value)):t.innerHTML=e._handleItemTemplate()||e._defaultItemTemplate(e.value),e.showCloseButton&&t.setAttribute("show-close-button","");for(var n=0;n<e.classList.length;n++)e.classList[n].indexOf("jqx-")<0&&t.classList.add(e.classList[n]);if(e.type&&t.classList.add(e.type),t.setAttribute("animation",e.animation),e.enableShadowDOM&&!t.shadowRoot){for(var o=document.createDocumentFragment();t.childNodes.length;)o.appendChild(t.firstChild);t.attachShadow({mode:"open"});for(var a=[].slice.call(e.shadowRoot.children).filter(function(e){return"LINK"===e.tagName}),i=0;i<a.length;i++)t.shadowRoot.insertBefore(a[i].cloneNode(),t.shadowRoot.firstChild);t.shadowRoot.appendChild(o)}e._container.appendChild(t),t._parent=e._container,e._instances.push(t),e.$.fireEvent("open",{instance:t}),setTimeout(function(){t.setAttribute("opened","")},10),e.autoClose&&(t._autoCloseTimeout=setTimeout(function(){e._close(t)},e.autoCloseDelay))}}},{key:"_containerClickHandler",value:function(e){var t=this,n=t.enableShadowDOM?e.composedPath()[0]:e.target,o=n.closest(".jqx-toast-item-close-button"),a=(n.getRootNode().host||n).closest(".jqx-toast-item");o||a?(t.$.fireEvent("click",{instance:a}),o&&t._close(a)):t.modal&&t.closeAll()}},{key:"_close",value:function(e){var t=this;if(t._instances.indexOf(e)>-1){var n=window.getComputedStyle(e,null).getPropertyValue("transition-duration"),o=n.indexOf("ms")>-1?parseInt(n):1e3*parseFloat(n);e.removeAttribute("opened"),t._instances.splice(t._instances.indexOf(e),1),setTimeout(function(){clearTimeout(e._autoCloseTimeout),t.$.fireEvent("close",{instance:e}),e.parentNode&&e.parentNode.removeChild(e);var n=e._parent;n&&!n.children.length&&n.parentElement&&(t._removeContainerListeners(n),n.parentElement.removeChild(n))},o)}}},{key:"_defaultItemTemplate",value:function(e){return'<div class ="jqx-toast-item-header">\n                    <span class ="jqx-toast-item-close-button"></span>\n                </div>\n                <div class ="jqx-toast-item-container">\n                    <span class ="jqx-toast-item-icon"></span><span class ="jqx-toast-item-content">'+e+"</span>\n                </div>"}},{key:"_handleContainers",value:function(){var e=this,t=void 0;if("string"==typeof e.appendTo?t=document.getElementById(e.appendTo):e.appendTo instanceof HTMLElement&&(t=e.appendTo),e._container=e._getToastContainer(t),t)return e._appendTo=t,void(e._container.parentElement||(e._addContainerListeners(e._container),e._appendTo.appendChild(e._container)));t||!e.$.toastContainerCustom||e.$.toastContainerCustom.children.length||(e._removeContainerListeners(e.$.toastContainerCustom),e.$.toastContainerCustom.parentElement&&e.$.toastContainerCustom.parentElement.removeChild(e.$.toastContainerCustom)),e._container.parentElement||(e._addContainerListeners(e._container),document.body.appendChild(e._container))}},{key:"_addContainerListeners",value:function(e){var t=this;if(e){var n=e.getAttribute("jqx-id"),o=t["$"+n];o&&(o.listen("click",t._containerClickHandler.bind(t)),o.listen("swipeleft",t._swipeHandler.bind(t)),o.listen("swiperight",t._swipeHandler.bind(t)),o.listen("swipetop",t._swipeHandler.bind(t)),o.listen("swipebottom",t._swipeHandler.bind(t)))}}},{key:"_removeContainerListeners",value:function(e){var t=this;if(e){var n=e.getAttribute("jqx-id"),o=t["$"+n];o&&(o.unlisten("click"),o.unlisten("swipeleft"),o.unlisten("swiperight"),o.unlisten("swipetop"),o.unlisten("swipebottom"))}}},{key:"_getToastContainer",value:function(e){var t=this,n=void 0;e?n="Custom":t.modal?n="Modal":(n=JQX.Utilities.Core.toCamelCase(t.position),n=n.charAt(0).toUpperCase()+n.slice(1));var o="toastContainer"+n;if(!t.$[o]){var a=document.createElement("div");a.setAttribute("jqx-id",o),a.classList.add("jqx-toast-container"),a.classList.add("jqx-toast-container-"+JQX.Utilities.Core.toDash(n)),t.$["toastContainer"+n]=a,t["$toastContainer"+n]=JQX.Utilities.Extend(a)}return t.$[o]}},{key:"_handleItemTemplate",value:function(){var e=this,t=e.itemTemplate;if(!("content"in document.createElement("template")))return void e.error(e.localize("htmlTemplateNotSuported",{elementType:e.nodeName.toLowerCase()}));if(!t)return e._defaultItemTemplate(e.value);if(null===(t=document.getElementById(t))||!("content"in t))return void e.error(e.localize("invalidTemplate",{elementType:e.nodeName.toLowerCase(),property:"template"}));var n=t.innerHTML,o=/{{\w+}}/g;return n.replace(o,e.value)}},{key:"_swipeHandler",value:function(e){var t=this,n=e.originalEvent.target.closest(".jqx-toast-item");e.stopPropagation(),n&&t.$.fireEvent(e.type,{instance:n})}}],[{key:"properties",get:function(){return{appendTo:{value:null,type:"any"},autoClose:{value:!1,type:"boolean"},autoCloseDelay:{value:3e3,type:"number"},autoOpen:{value:!1,type:"boolean"},itemTemplate:{value:null,type:"string?"},modal:{value:!1,type:"boolean"},position:{allowedValues:["top-left","top-right","bottom-left","bottom-right"],value:"top-right",type:"string"},showCloseButton:{value:!1,type:"boolean"},type:{allowedValues:["info","warning","success","error","mail","time",null],value:"info",type:"string?"},value:{value:"",type:"any"}}}},{key:"styleUrls",get:function(){return["jqx.toast.css"]}}]),t}(JQX.ContentElement));
//# sourceMappingURL=jqxtoast.js.map
