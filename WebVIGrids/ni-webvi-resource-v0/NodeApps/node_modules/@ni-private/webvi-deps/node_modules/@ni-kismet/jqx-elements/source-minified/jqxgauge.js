"use strict";JQX("jqx-gauge",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                <div id="svgContainer" class="jqx-svg-container"></div>\n                <div class="jqx-digital-display-container">\n                    <jqx-numeric-text-box id="digitalDisplay"\n                                            class="jqx-digital-display"\n                                            decimal-separator="[[decimalSeparator]]"\n                                            max="[[max]]"\n                                            min="[[min]]"\n                                            name="[[name]]"\n                                            readonly\n                                            input-format="[[scaleType]]"\n                                            scientific-notation="[[scientificNotation]]"\n                                            show-unit="[[showUnit]]"\n                                            unit="[[unit]]"\n                                            unfocusable\n                                            validation="interaction"\n                                            word-length="[[wordLength]]">\n                    </jqx-numeric-text-box>\n                </div>\n            </div>'}},{key:"attached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attached",this).call(this),e.isCompleted&&(e._trackListener&&(e._trackListener=new JQX.Utilities.InputEvents(e._track),e._trackListener.down(function(t){e._SVGElementDownHandler(t)})),e._fillListener&&(e._fillListener=new JQX.Utilities.InputEvents(e._fill),e._fillListener.down(function(t){e._SVGElementDownHandler(t)})),e._lineListener&&(e._lineListener=new JQX.Utilities.InputEvents(e._line),e._lineListener.down(function(t){e._SVGElementDownHandler(t)})))}},{key:"detached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detached",this).call(this),e._unlisten()}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this)}},{key:"getOptimalSize",value:function(){var e=this;return e._renderingSuspended?{width:0,height:0}:"circle"===e.sizeMode?{width:e.offsetWidth,height:e._updateSize(!0)}:{width:e.offsetWidth,height:e.offsetHeight}}},{key:"val",value:function(e){var t=this;if(void 0===e)return t._getEventValue();if("date"===t.mode&&(e=JQX.Utilities.DateTime.validateDate(e),e=e.getTimeStamp()),t._numericProcessor.compare(e,t.value)){var i=t.value;if(t._validateValue(e,t.value),!t._isVisible()||t._renderingSuspended)return void(t._renderingSuspended=!0);t._animate(i)}}},{key:"_createElement",value:function(){var e=this;if("numeric"===e.mode?e._getEventValue=function(){return e.value}:(e._handleDateScale(),e.digitalDisplay=!1),e._numericProcessor=new JQX.Utilities.NumericProcessor(e,"scaleType"),e._numberRenderer=new JQX.Utilities.NumberRenderer,e._draw=new JQX.Utilities.Draw(e.$.svgContainer),!e._isVisible())return void(e._renderingSuspended=!0);e._renderingSuspended=!1,e._setSettingsObject(),e._wordLengthNumber=e._numericProcessor.getWordLength(e.wordLength),e._measurements={},e._validateInitialPropertyValues(),e._getMeasurements(),e._setDrawVariables(),e._getRange(),e._numericProcessor.getAngleRangeCoefficient(),"numeric"!==e.mode&&e.coerce?e._coerceInitialDateValue=!0:e._validateValue(),e._initTickIntervalHandler(),e._renderAnalogItems(),delete e._preventResizeHandler,e._setFocusable(),e._setUpdatePointerMethod()}},{key:"propertyChangedHandler",value:function(e,i,a){function n(t,a,n,l){var o=t&&a?"both":e;r._validateMinMax(o,!1,i),"logarithmicScale"!==e&&"scaleType"!==e&&("wordLength"!==e&&r[e]===i||"wordLength"===e&&r.min===n&&r.max===l)||(r._setDrawVariables(),r._getRange(),r._numericProcessor.getAngleRangeCoefficient(),r._initTickIntervalHandler(),r._renderAnalogItems(),r._validateValue(r.value,r.value),r._updatePointer())}var r=this;if(!r._isVisible()||r._renderingSuspended)return void(r._renderingSuspended=!0);switch(e){case"analogDisplayType":delete r._customSVGElements,r._getMeasurements(),"needle"===a&&"center"===r.digitalDisplayPosition?r.digitalDisplayPosition="bottom":"needle"===i&&"bottom"===r.digitalDisplayPosition&&(r.digitalDisplayPosition="center"),r._renderAnalogItems(),r._setUpdatePointerMethod();break;case"coerce":if(a){var l=r.value;r._validateValue(l),r._updatePointer(),r._valueBeforeCoercion=l}else void 0!==r._valueBeforeCoercion&&(r._validateValue(r._valueBeforeCoercion),r._updatePointer());break;case"customInterval":a?(r._customTicks&&(r.customTicks=r._customTicks),r._numericProcessor.validateCustomTicks()):"date"===r.mode&&(r._customTicks=r.customTicks),r._initTickIntervalHandler(),r._renderAnalogItems(),r._coerceCustomInterval();break;case"customTicks":if("date"===r.mode&&!r.customInterval)return r._customTicks=a,void(r.customTicks=i);r._numericProcessor.validateCustomTicks(),r.customInterval&&(r._initTickIntervalHandler(),r._renderAnalogItems(),r._coerceCustomInterval());break;case"dateLabelFormatString":case"showUnit":case"unit":r._initTickIntervalHandler(),r._renderAnalogItems();break;case"decimalSeparator":case"scientificNotation":if("date"===r.mode)return;r._initTickIntervalHandler(),r._renderAnalogItems();break;case"digitalDisplay":case"digitalDisplayPosition":if("date"===r.mode)return void("digitalDisplay"===e&&(r.digitalDisplay=!1));r._updateSize();break;case"mechanicalAction":case"messages":case"readonly":break;case"disabled":case"unfocusable":r._setFocusable();break;case"drawNeedle":if("needle"!==r.analogDisplayType)return;null===i&&r._draw.removeElement(r._needle),null!==a?r._updatePointer():(r._renderAnalogItems(),delete r._customSVGElements);break;case"endAngle":case"startAngle":r._validateAngles(),r._numericProcessor.getAngleRangeCoefficient(),r._renderAnalogItems();break;case"interval":r._numericProcessor.validateInterval(r.interval),r._validateValue(),r._updatePointer();break;case"inverted":case"labelFormatFunction":case"showRanges":r._renderAnalogItems();break;case"labelsVisibility":if("all"===i&&"endPoints"===a||"endPoints"===i&&"all"===a)return;r._getMeasurements(),r._renderAnalogItems();break;case"logarithmicScale":if("date"===r.mode)return void(r.logarithmicScale=!1);r._initTickIntervalHandler(),n(!0,!0);break;case"max":case"min":"date"===r.mode&&(delete r._dateInterval,r[e]=JQX.Utilities.DateTime.validateDate(a).getTimeStamp()),n("min"===e,"max"===e);break;case"mode":r.mode=i;break;case"needlePosition":"needle"===r.analogDisplayType&&r._updatePointer();break;case"precisionDigits":case"significantDigits":if("date"===r.mode)return;"precisionDigits"===e&&"integer"===r.scaleType&&r.error(r.localize("noInteger",{elementType:r.nodeName.toLowerCase(),property:e})),"significantDigits"===e&&null!==r.precisionDigits?r.precisionDigits=null:"precisionDigits"===e&&null!==r.significantDigits&&(r.significantDigits=null),null!==a&&(r.$.digitalDisplay.precisionDigits=r.precisionDigits,r.$.digitalDisplay.significantDigits=r.significantDigits),r._initTickIntervalHandler(),r._renderAnalogItems();break;case"ranges":if(!r.showRanges)return;r._renderAnalogItems();break;case"scaleType":if("date"===r.mode)return void(r.scaleType="integer");r._numericProcessor=new JQX.Utilities.NumericProcessor(r,"scaleType"),n(!0,!0);break;case"scalePosition":case"ticksPosition":r._getMeasurements(),r._renderAnalogItems();break;case"sizeMode":r._preventResizeHandler=!0,"circle"===a?(r.$.container.removeAttribute("style"),r.style.height=r.offsetWidth+"px",r._measurements.cachedHeight=r.offsetHeight):(r.$.container.style.height=r.offsetWidth+"px",r._updateSize());break;case"theme":babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,i,a),r._getMeasurements(),r._renderAnalogItems();break;case"ticksVisibility":if("minor"===i&&"major"===a||"major"===i&&"minor"===a)return;r._getMeasurements(),r._renderAnalogItems();break;case"validation":"strict"===a&&r._validateValue(r.value,r.value);break;case"value":"date"===r.mode&&(a=JQX.Utilities.DateTime.validateDate(a),a=a.getTimeStamp()),r._validateValue(a,i);var o=a.toString();r.value.toString()===o&&(r._drawValue=r.logarithmicScale?Math.log10(o).toString():o),r._animate(i);break;case"wordLength":if("date"===r.mode)return void(r.wordLength="uint64");r._wordLengthNumber=r._numericProcessor.getWordLength(r.wordLength),"integer"===r.scaleType&&n(!0,!0,r.min,r.max)}}},{key:"_addAnalogDisplay",value:function(){var e=this,t=e._measurements,i=t.radius,a=e._draw;if("needle"===e.analogDisplayType){e._drawNeedle(!1);var n=(t.needleWidth+5)/2;e._centralCircle=a.circle(i,i,n,{class:"jqx-needle-central-circle"}),e._minCoordinates.push(i-n),e._maxCoordinates.push(i+n)}else{var r=i-e._distance.trackDistance-t.trackBorderWidth/2-1;e._track=a.pieslice(i,i,r-t.trackWidth,r,e.startAngle,e.endAngle,0,{class:"jqx-track"}),e._trackListener=new JQX.Utilities.InputEvents(e._track),e._trackListener.down(function(t){e._SVGElementDownHandler(t)})}}},{key:"_calculateTickAndLabelDistance",value:function(){var e=this,t=e._measurements;if("none"===e.scalePosition)return e._plotLabels=!1,e._plotTicks=!1,t.innerRadius=t.radius,{majorTickDistance:0,minorTickDistance:0,labelDistance:0,needleDistance:0,trackDistance:0};var i=e._tickIntervalHandler.labelsSize,a=e._largestLabelSize||Math.max(i.minLabelSize,i.minLabelOtherSize,i.maxLabelSize,i.maxLabelOtherSize),n=1,r=void 0,l=void 0,o=void 0,s=0;return e._largestLabelSize=a,"outside"===e.scalePosition&&(n=a,r=n+t.majorTickSize-t.minorTickSize,l=0),"needle"===e.analogDisplayType?(o="outside"===e.scalePosition?n+t.majorTickSize:n+t.majorTickSize+a,"none"===e.ticksVisibility&&(l=0,o-=t.majorTickSize),"none"===e.labelsVisibility&&(o-=a,"outside"===e.scalePosition&&(n-=a,r-=a))):"none"===e.labelsVisibility&&"none"===e.ticksVisibility?s=0:"outside"===e.scalePosition?"scale"===e.ticksPosition?("none"===e.labelsVisibility&&(n=1,r=1+t.majorTickSize-t.minorTickSize),s="none"!==e.ticksVisibility?n+t.majorTickSize+2:a):"none"!==e.labelsVisibility?(r-=(t.trackWidth+t.trackBorderWidth)/4,s=n-1):(n=1,r=(t.trackWidth+t.trackBorderWidth)/4+1,s=0):"scale"===e.ticksPosition?(n=t.trackWidth+1.5*t.trackBorderWidth+2,"none"===e.ticksVisibility&&(l=n)):r=(t.trackWidth+t.trackBorderWidth)/4+1,void 0===r&&(r=n),void 0===l&&(l=n+t.majorTickSize),t.innerRadius=t.radius-l,delete e._plotLabels,delete e._plotTicks,delete e._equalToHalfRadius,"inside"===e.scalePosition?t.innerRadius<a&&(e._plotLabels=!1,"scale"===e.ticksPosition?"needle"!==e.analogDisplayType&&t.innerRadius<t.majorTickSize&&(e._plotTicks=!1):(e._equalToHalfRadius=!0,t.innerRadius=t.radius/2)):t.radius-s-t.trackBorderWidth<t.trackWidth&&(t.trackWidth=t.radius-s-t.trackBorderWidth,t.lineSize=t.trackWidth+t.trackBorderWidth,"track"===e.ticksPosition&&(t.majorTickSize=t.lineSize,t.minorTickSize=t.majorTickSize/2,r=n+(t.majorTickSize-t.minorTickSize)/2)),{majorTickDistance:n,minorTickDistance:r,labelDistance:l,needleDistance:o,trackDistance:s}}},{key:"_calculateTickInterval",value:function(){var e=this,t=e._tickIntervalHandler.getInterval("radial",e._drawMin,e._drawMax,e.$.container,e.logarithmicScale);t.major!==e._majorTicksInterval?(e._intervalHasChanged=!0,e._majorTicksInterval=t.major):e._intervalHasChanged=!0,e._minorTicksInterval=t.minor,"date"===e.mode&&e._calculateDateInterval(t.major)}},{key:"_computeNeedlePointsCenter",value:function(e,t){var i=this,a=i._measurements,n=a.innerRadius,r=a.radius,l=Math.sin(t),o=Math.cos(t),s=void 0;return s="inside"===i.scalePosition?.9*(n-i._largestLabelSize):.9*(n-i._distance.needleDistance),"M "+(r+e*o)+","+(r-e*l)+" L "+(r-e*o)+","+(r+e*l)+" L "+(r+s*l)+","+(r+s*o)+" Z"}},{key:"_computeNeedlePointsEdge",value:function(e,t,i){var a=this,n=a._measurements.radius,r=n-a._distance.needleDistance,l=r-i,o=Math.sin(t),s=Math.cos(t),d=n+l*o,c=n+l*s;return"M "+(d+e*s)+","+(c-e*o)+" L "+(d-e*s)+","+(c+e*o)+" L "+(n+r*o)+","+(n+r*s)+" Z"}},{key:"_documentMoveHandler",value:function(e){if(this._dragging){var t=this,i=t._getAngleByCoordinate(e.pageX,e.pageY),a=t._getQuadrant(i),n=t._getRotationDirection();if(t._normalizedStartAngle===t.endAngle){var r=void 0;t.inverted?t._lockCW&&"cw"===n?(r=t._normalizedStartAngle,t._unlockRotation("_lockCW",i,a,r,{firstCondition:i<r,secondCondition:i>r})):t._lockCCW&&"ccw"===n&&(r=t.endAngle,t._unlockRotation("_lockCCW",i,a,r,{firstCondition:i>r,secondCondition:i<r})):t._lockCW&&"ccw"===n?(r=t.endAngle,t._unlockRotation("_lockCW",i,a,r,{firstCondition:i>r,secondCondition:i<r})):t._lockCCW&&"cw"===n&&(r=t._normalizedStartAngle,t._unlockRotation("_lockCCW",i,a,r,{firstCondition:i<r,secondCondition:i>r}))}else t._lockCW&&"ccw"===n&&!t._outsideRange&&t._numericProcessor._getAngleDifference(i,t._normalizedStartAngle)<10?t._lockCW=!1:t._lockCCW&&"cw"===n&&!t._outsideRange&&t._numericProcessor._getAngleDifference(i,t.endAngle)<10&&(t._lockCCW=!1);if(t._angle=i,t._quadrant=a,e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault()),!t._lockCW&&!t._lockCCW){var l=t._numericProcessor.getValueByAngle(i);if(t._normalizedStartAngle===t.endAngle){var o=t._numericProcessor.lockRotation("cw"===n&&!t.inverted||"ccw"===n&&t.inverted,l);void 0!==o&&(l=o)}else"ccw"===n&&t._outsideEnd?t._lockCCW=!0:"cw"===n&&t._outsideStart&&(t._lockCW=!0);void 0!==l&&t._numericProcessor.compare(l,t.value)&&(cancelAnimationFrame(t._animationFrameId),t._updatePointer(l),"switchWhenReleased"!==t.mechanicalAction?t._numericProcessor.updateGaugeValue(l):t._valueAtMoveEnd=l)}}}},{key:"_documentUpHandler",value:function(){var e=this;if(e._dragging&&(e._lockCW=!1,e._lockCCW=!1,e._dragging=!1,e.removeAttribute("dragged"),"switchWhileDragging"!==e.mechanicalAction)){var t="switchUntilReleased"===e.mechanicalAction?e._valueAtDragStart:e._valueAtMoveEnd;e._numericProcessor.compare(t,e.value)&&("switchUntilReleased"===e.mechanicalAction&&e._animate(e.value,t),e._numericProcessor.updateGaugeValue(t))}}},{key:"_downHandler",value:function(e,t){var i=this,a=i.enableShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if("needle"!==i.analogDisplayType&&!t||i.disabled||i.readonly||(i.enableShadowDOM?a.getRootNode().host===i.$.digitalDisplay:i.$.digitalDisplay.contains(a))||!JQX.Utilities.Core.isMobile&&("buttons"in e&&1!==e.buttons||1!==e.which))return void e.stopPropagation();var n=e.pageX,r=e.pageY;if(i._measurements.center=i._getCenterCoordinates(),"needle"===i.analogDisplayType){if(Math.sqrt(Math.pow(i._measurements.center.x-n,2)+Math.pow(i._measurements.center.y-r,2))>i._measurements.radius)return void e.stopPropagation()}"switchUntilReleased"===i.mechanicalAction&&(i._valueAtDragStart=i.value),i._angle=i._getAngleByCoordinate(n,r),i._quadrant=i._getQuadrant(i._angle);var l=i._numericProcessor.getValueByAngle(i._angle);void 0!==l&&i._numericProcessor.compare(l,i.value)&&(i._animate(i.value,l),"switchWhenReleased"!==i.mechanicalAction?i._numericProcessor.updateGaugeValue(l):i._valueAtMoveEnd=l),i._dragging=!0,i.setAttribute("dragged","")}},{key:"_animate",value:function(e,t){function i(){d=c(),r&&(d=Math.pow(10,d))}function a(){if(++s===l)return d=t,void n._updatePointer(d);n._updatePointer(d),i(),n._animationFrameId=requestAnimationFrame(a)}var n=this,r=n.logarithmicScale,l=Math.max(1,Math.round(n.animationDuration/15));if(cancelAnimationFrame(n._animationFrameId),!n.hasAnimation||1===l)return void n._updatePointer(t);var o=n._numericProcessor,s=1,d=void 0,c=void 0,u=void 0,_=void 0;void 0===t&&(t=n.value),e=parseFloat(o.validate(o.createDescriptor(e),n._minObject,n._maxObject)),t=parseFloat(o.validate(o.createDescriptor(t),n._minObject,n._maxObject)),r?(u=Math.log10(e),_=Math.log10(t)):(u=e,_=t);var g=Math.abs(_-u);c=t>e?function(){return Math.min(JQX.Utilities.Animation.Easings.easeInOutSine(s,u,g,l),_)}:function(){return Math.max(2*u-JQX.Utilities.Animation.Easings.easeInOutSine(s,u,g,l),_)},i(),n._animationFrameId=requestAnimationFrame(a)}},{key:"_drawFill",value:function(e,t){var i=this;if("needle"!==i.analogDisplayType){void 0===t&&(t=i._number);var a=i._measurements,n=a.radius,r=n-i._distance.trackDistance-a.trackBorderWidth/2-1;if("fill"===i.analogDisplayType){var l=i._numericProcessor.getAngleByValue(t,!0,!0),o=void 0,s=void 0;i.inverted?(o=i.startAngle,s=l):(o=l,s=i.endAngle),e?i._fill.setAttribute("d",i._draw.pieSlicePath(n,n,r-a.trackWidth,r,o,s,0)):(i._fill=i._draw.pieslice(n,n,r-a.trackWidth,r,o,s,0,{class:"jqx-value"}),i._fillListener=new JQX.Utilities.InputEvents(i._fill),i._fillListener.down(function(e){i._SVGElementDownHandler(e)}))}else{var d=r+a.trackBorderWidth/2,c=d-a.lineSize,u=i._numericProcessor.getAngleByValue(t),_=Math.sin(u),g=Math.cos(u),m=n+d*_,v=n+d*g,h=n+c*_,p=n+c*g;e?(i._line.setAttribute("x1",m),i._line.setAttribute("y1",v),i._line.setAttribute("x2",h),i._line.setAttribute("y2",p)):(i._line=i._draw.line(m,v,h,p,{class:"jqx-line"}),i._lineListener=new JQX.Utilities.InputEvents(i._line),i._lineListener.down(function(e){i._SVGElementDownHandler(e)}))}}}},{key:"_drawLabel",value:function(e,t,i,a){var n=this,r=n._measurements,l=r.radius,o={class:"jqx-label"+(!1!==a?" jqx-label-middle":""),"font-size":r.fontSize,"font-family":r.fontFamily,"font-weight":r.fontWeight,"font-style":r.fontStyle};t=n._formatLabel(t.toString(),!1);var s=n._draw.measureText(t,0,o),d=l-i-n._largestLabelSize/2,c=Math.round(l+d*Math.sin(e))-s.width/2,u=Math.round(l+d*Math.cos(e))-s.height/2,_=n._draw.text(t,c,u,s.width,s.height,0,o);n._minCoordinates.push(u),n._maxCoordinates.push(u+_.getBBox().height)}},{key:"_drawNeedle",value:function(e,t){var i=this,a=i._measurements;void 0===t&&(t=i._number);var n=i._numericProcessor.getAngleByValue(t);if(i.drawNeedle){if(i._customSVGElements=i.drawNeedle(i,i._draw,a.radius,n,i._distance.needleDistance),i._customSVGElements)for(var r=i._customSVGElements[0].parentElement||i._customSVGElements[0].parentNode,l=0;l<i._customSVGElements.length;l++)r.insertBefore(i._customSVGElements[l],i._centralCircle)}else{var o=void 0;o="center"===i.needlePosition?i._computeNeedlePointsCenter(a.needleWidth/2,n):i._computeNeedlePointsEdge(a.needleWidth/2,n,a.needleLength),e?i._needle.setAttribute("d",o):i._needle=i._draw.path(o,{class:"jqx-needle"})}}},{key:"_drawRanges",value:function(){var e=this,t=e._numericProcessor,i=e.ranges;if(e.showRanges&&0!==i.length){var a=e._measurements,n=a.radius,r=void 0,l=void 0,o=void 0,s=void 0;"needle"===e.analogDisplayType?(l=a.rangeSize,"inside"===e.scalePosition?r=n-1:(r=n-e._distance.needleDistance-2,"none"===e.labelsVisibility&&"none"===e.ticksVisibility&&(r+=1))):(r=n-e._distance.trackDistance-a.trackBorderWidth/2-1,l=a.trackWidth),e.inverted?(o="endValue",s="startValue"):(o="startValue",s="endValue");for(var d=0;d<i.length;d+=1){var c=i[d],u=t.validateColorRange(c[o]),_=t.validateColorRange(c[s]),g=e._draw.pieslice(n,n,r-l,r,t.getAngleByValue(_,!0,!0),t.getAngleByValue(u,!0,!0),0,{class:"jqx-range "+c.className});e._ranges.push(g)}}}},{key:"_drawTick",value:function(e,t,i){var a=this,n=a._measurements,r=n.radius,l="jqx-tick",o=void 0;"major"===i?o=n.majorTickSize:(o=n.minorTickSize,l+=" jqx-tick-minor");var s=t-o,d=r+t*Math.sin(e),c=r+t*Math.cos(e),u=r+s*Math.sin(e),_=r+s*Math.cos(e);a._draw.line(d,c,u,_,{class:l}),a._minCoordinates.push(Math.min(c,_)),a._maxCoordinates.push(Math.max(c,_))}},{key:"_getAngleByCoordinate",value:function(e,t){var i=this,a=i._measurements.center,n=Math.atan2(t-a.y,e-a.x),r=-1*n*180/Math.PI;return r<0&&(r+=360),i._actualAngle=r,i._normalizedStartAngle===i.endAngle||function(e,t,i){for(;t<e;)t+=360;for(;i<e;)i+=360;return i>=e&&i<=t}(i._normalizedStartAngle,i.endAngle,r)?(i._outsideRange=!1,i._outsideStart=!1,i._outsideEnd=!1):(i._numericProcessor._getAngleDifference(r,i._normalizedStartAngle)<=i._numericProcessor._getAngleDifference(r,i.endAngle)?(r=i._normalizedStartAngle,i._outsideStart=!0,i._outsideEnd=!1):(r=i.endAngle,i._outsideEnd=!0,i._outsideStart=!1),i._outsideRange=!0),r}},{key:"_getCenterCoordinates",value:function(){var e=this,t=e.$.container.getBoundingClientRect(),i=e._measurements.radius,a=document.body.scrollLeft||document.documentElement.scrollLeft,n=document.body.scrollTop||document.documentElement.scrollTop;return{x:t.left+a+i,y:t.top+n+i}}},{key:"_getInlineColors",value:function(){var e=this,t="",i="",a="";return e._track&&(t=e._track.style.fill),e._fill&&(i=e._fill.style.fill),e._line&&(a=e._line.style.stroke),[t,i,a]}},{key:"_getMeasurements",value:function(){var e=this;if(!e._isVisible()||e._renderingSuspended)return void(e._renderingSuspended=!0);var t=e._measurements;t.cachedWidth=e.offsetWidth,t.cachedHeight=e.offsetHeight,t.radius=t.cachedWidth/2;var i=document.createElement("div");e.enableShadowDOM?e.shadowRoot.appendChild(i):e.appendChild(i),i.className="jqx-tick",t.majorTickSize=i.offsetWidth,i.className+=" jqx-tick-minor",t.minorTickSize=i.offsetWidth,i.className="jqx-label";var a=window.getComputedStyle(i);t.fontSize=a.fontSize,t.fontFamily=a.fontFamily,t.fontWeight=a.fontWeight,t.fontStyle=a.fontStyle,t.trackWidth=0,t.trackBorderWidth=0,"needle"===e.analogDisplayType?(i.className="jqx-needle",t.needleWidth=i.offsetWidth,t.needleLength=i.offsetHeight,i.className="jqx-range",t.rangeSize=i.offsetWidth):(i.className="jqx-track",t.trackBorderWidth=parseFloat(a.strokeWidth),t.trackWidth=Math.min(i.offsetWidth,t.radius-t.trackBorderWidth),t.lineSize=t.trackWidth+t.trackBorderWidth,"track"===e.ticksPosition&&(t.majorTickSize=t.lineSize,t.minorTickSize=t.majorTickSize/2)),e.enableShadowDOM?e.shadowRoot.removeChild(i):e.removeChild(i)}},{key:"_getQuadrant",value:function(e){return e>270?4:e>180?3:e>90?2:1}},{key:"_getRotationDirection",value:function(){var e=this,t=e._getQuadrant(e._actualAngle);return e._actualAngle<e._angle&&(1!==t||4!==e._quadrant)||e._actualAngle>e._angle&&4===t&&1===e._quadrant?"cw":"ccw"}},{key:"_initTickIntervalHandler",value:function(){var e=this;if(!e._isVisible()||e._renderingSuspended)return void(e._renderingSuspended=!0);var t=e._formatLabel(e.min,!1),i=e._formatLabel(e.max,!1);e._tickIntervalHandler=new JQX.Utilities.TickIntervalHandler(e,t,i,"jqx-label",e._settings.size,"integer"===e.scaleType,e.logarithmicScale)}},{key:"_keydownHandler",value:function(e){var i=this,a=i._getEventValue(),n=i._number.toString();"numeric"===i.mode?(i.value.toString()!==n&&(i.value=n,i.$.digitalDisplay.value=n),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_keydownHandler",this).call(this,e),i.value.toString()!==a&&i.$.fireEvent("change",{value:i.value,oldValue:a})):(i.value.toString()!==n&&(i._valueDate=JQX.Utilities.DateTime.fromFullTimeStamp(n),i.value=i._number,i.$.digitalDisplay.$.input.value=i._valueDate),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_keydownHandler",this).call(this,e),0!==i._valueDate.compare(a)&&i.$.fireEvent("change",{value:i._getEventValue(),oldValue:a}))}},{key:"_normalizeAngle",value:function(e){return e%=360,e<0&&(e+=360),e}},{key:"_renderAnalogItems",value:function(e){var t=this;if(!t._isVisible()||t._renderingSuspended)return void(t._renderingSuspended=!0);var i=t._getInlineColors();if(t._unlisten(),t._draw.clear(),delete t._needle,delete t._centralCircle,delete t._track,delete t._trackListener,delete t._fill,delete t._fillListener,delete t._line,delete t._lineListener,t._ranges=[],t._minCoordinates=[],t._maxCoordinates=[],!1!==e&&(delete t._largestLabelSize,t._distance=t._calculateTickAndLabelDistance()),!1!==t._plotTicks||!1!==t._plotLabels){t._calculateTickInterval();var a=t._cachedLabelsSize,n=Math.max(a.minLabelSize,a.minLabelOtherSize,a.maxLabelSize,a.maxLabelOtherSize);!1!==e&&t._largestLabelSize!==n&&(t._largestLabelSize=n,t._distance=t._calculateTickAndLabelDistance(),t._calculateTickInterval())}t._coerceInitialDateValue&&(t._validateValue(),delete t._coerceInitialDateValue),t._drawRanges(),t._addAnalogDisplay(),("none"!==t.ticksVisibility&&!1!==t._plotTicks||"none"!==t.labelsVisibility&&!1!==t._plotLabels)&&(t.customInterval||t._dateInterval?t._numericProcessor.addGaugeCustomTicks():t._numericProcessor.addGaugeTicksAndLabels()),t._drawFill(!1),t._updateSize(),t._restoreInlineColors(i[0],i[1],i[2])}},{key:"_resizeHandler",value:function(){var e=this;if(e._preventResizeHandler)return void delete e._preventResizeHandler;if(!e._isVisible())return void(e._renderingSuspended=!0);if(e._renderingSuspended)return void e._createElement();var t=e._measurements;if(!(e._renderingSuspended||t.cachedWidth===e.offsetWidth&&t.cachedHeight===e.offsetHeight)){if("circle"===e.sizeMode)e.offsetWidth!==e.offsetHeight&&(t.cachedWidth!==e.offsetWidth?(e.style.height=e.offsetWidth+"px",e._preventResizeHandler=!0):t.cachedHeight!==e.offsetHeight&&(e.style.width=e.offsetHeight+"px",e._preventResizeHandler=!0));else{if(t.cachedHeight!==e.offsetHeight&&t.cachedWidth===e.offsetWidth)return e.style.height=t.cachedHeight+"px",void(e._preventResizeHandler=!0);e.$.container.style.height=e.offsetWidth+"px"}t.cachedWidth=e.offsetWidth,t.cachedHeight=e.offsetHeight,t.radius=t.cachedWidth/2,e._equalToHalfRadius?t.innerRadius=t.radius/2:t.innerRadius=t.radius-e._distance.labelDistance,e._renderAnalogItems(!1)}}},{key:"_restoreInlineColors",value:function(e,t,i){var a=this;a._track&&""!==e&&(a._track.style.fill=e),a._fill&&""!==t&&(a._fill.style.fill=t),a._line&&""!==i&&(a._line.style.stroke=i)}},{key:"_selectStartHandler",value:function(e){this._dragging&&e.preventDefault()}},{key:"_setUpdatePointerMethod",value:function(){var e=this;"needle"===e.analogDisplayType?e._updatePointer=function(t){if(e._customSVGElements)for(var i=0;i<e._customSVGElements.length;i++)e._draw.removeElement(e._customSVGElements[i]);e._drawNeedle(!0,t)}:e._updatePointer=function(t){e._drawFill(!0,t)}}},{key:"_styleChangedHandler",value:function(e){var t=this;if(!e.detail.styleProperties||!e.detail.styleProperties["min-height"]){if(!t._isVisible())return void(t._renderingSuspended=!0);if(t._renderingSuspended)return void t._createElement();t._getMeasurements(),t._initTickIntervalHandler(),t._renderAnalogItems()}}},{key:"_SVGElementDownHandler",value:function(e){var t=this,i=t.context;t.context=t,t._downHandler(e,!0),t.context=i}},{key:"_unlockRotation",value:function(e,t,i,a,n){var r=this,l=n.firstCondition,o=n.secondCondition,s=r._getQuadrant(a);(l&&(4!==i||1!==s)||o&&4===i&&1===s)&&r._numericProcessor._getAngleDifference(t,a)<10&&(r[e]=!1)}},{key:"_updateSize",value:function(e){var t=this;if("circle"!==t.sizeMode||void 0!==e){for(var i=t._minCoordinates,a=t._maxCoordinates,n=i[0],r=a[0],l=1;l<i.length;l++)n=Math.min(n,i[l]);for(var o=1;o<a.length;o++)r=Math.max(r,a[o]);var s=t.getBoundingClientRect();if(t.digitalDisplay){var d=t.$.digitalDisplay.getBoundingClientRect();n=Math.min(n,d.top-s.top),r=Math.max(r,d.bottom-s.top)}if("needle"!==t.analogDisplayType){var c=t._track.getBBox();n=Math.min(n,c.y),r=Math.max(r,c.y+c.height)}for(var u=0;u<t._ranges.length;u++){var _=t._ranges[u].getBBox();n=Math.min(n,_.y-s.top),r=Math.max(r,_.y+_.height-s.top)}n-=2;var g=r-n;if(void 0!==e)return Math.round(g);t._preventResizeHandler=!0,t.style.height=g+"px",t.$.container.style.marginTop=-1*n+"px",t._measurements.cachedHeight=g}}},{key:"_updateValue",value:function(e){this._numericProcessor.updateGaugeValue(e)}},{key:"_validate",value:function(e,t,i){var a=this,n=a.value;a._validateValue(t),!i||35!==i&&36!==i?a._updatePointer():a._animate(n)}},{key:"_validateAngles",value:function(){var e=this;e._normalizedStartAngle=e._normalizeAngle(e.startAngle),e.endAngle=e._normalizeAngle(e.endAngle),e._normalizedStartAngle<e.endAngle?e.startAngle=e._normalizedStartAngle:e.startAngle=e._normalizedStartAngle-360,e._angleDifference=e.endAngle-e.startAngle}},{key:"_validateInitialPropertyValues",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_validateInitialPropertyValues",this).call(this);var e=this;"circle"===e.sizeMode?e.offsetWidth<e.offsetHeight?e.style.height=e.offsetWidth+"px":e.offsetWidth>e.offsetHeight&&(e.style.width=e.offsetHeight+"px"):(e.offsetHeight!==e.offsetWidth&&(e.style.height=e.offsetWidth+"px"),e.$.container.style.height=e.offsetWidth+"px"),e._validateAngles(),null!==e.significantDigits?e.$.digitalDisplay.significantDigits=e.significantDigits:null!==e.precisionDigits&&(e.$.digitalDisplay.precisionDigits=e.precisionDigits)}},{key:"_validateValue",value:function(e,t){var i=this,a=i._numericProcessor,n=i.logarithmicScale,r="strict"===i.validation,l=r&&void 0!==t;void 0===e?(l=!1,e=i.value):e=e.toString(),a.regexScientificNotation.test(e)&&(e=a.scientificToDecimal(e)),isNaN(e)&&(e=t||0);var o=void 0,s=void 0,d=void 0;i.coerce?(o=a.getCoercedValue(a.createDescriptor(e,!0,!0,!0),!1,n),i._number=o,s=o.toString(),d=s):r?(o=a.getCoercedValue(a.createDescriptor(e,!0,!0,!0),!1,n),i._number=o,s=o.toString(),d=s):(l=!1,o=a.getCoercedValue(a.createDescriptor(e,!0,!0,!1),!1,n),i._number=a.validate(o,a.createDescriptor(i._minObject),a.createDescriptor(i._maxObject)),s=o.toString(),d=i._number.toString());var c=void 0,u=void 0;"numeric"===i.mode?(c=t,u=s,i.value=s,i.$.digitalDisplay.value=s):(c=i._valueDate,i._valueDate=JQX.Utilities.DateTime.fromFullTimeStamp(s),u=i._valueDate,i.value=o,i.$.digitalDisplay.$.input.value=i._valueDate),i._drawValue=n?Math.log10(d).toString():d,l&&a.compare(i._number,t)&&i.$.fireEvent("change",{value:u,oldValue:c}),delete i._valueBeforeCoercion}},{key:"_unlisten",value:function(){var e=this;e._trackListener&&e._trackListener.unlisten(),e._fillListener&&e._fillListener.unlisten(),e._lineListener&&e._lineListener.unlisten()}}],[{key:"properties",get:function(){return{analogDisplayType:{value:"needle",allowedValues:["needle","fill","line"],type:"string"},animationDuration:{value:300,type:"number"},digitalDisplay:{value:!1,type:"boolean"},digitalDisplayPosition:{value:"bottom",allowedValues:["top","bottom","right","left","center"],type:"string"},drawNeedle:{value:null,type:"function?"},endAngle:{value:210,type:"number"},needlePosition:{value:"center",allowedValues:["center","edge"],type:"string"},ranges:{value:[],type:"array"},scalePosition:{value:"inside",allowedValues:["outside","inside","none"],type:"string"},showRanges:{value:!1,type:"boolean"},sizeMode:{value:"circle",allowedValues:["circle","auto"],type:"string"},startAngle:{value:-30,type:"number"}}}},{key:"listeners",get:function(){return{down:"_downHandler",resize:"_resizeHandler",styleChanged:"_styleChangedHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.selectstart":"_selectStartHandler",keydown:"_keydownHandler",move:"_trackMoveHandler"}}},{key:"requires",get:function(){return{"JQX.Utilities.Draw":"jqxdraw.js","JQX.NumericTextBox":"jqxnumerictextbox.js"}}},{key:"styleUrls",get:function(){return["jqx.gauge.css"]}}]),t}(JQX.Tank));
//# sourceMappingURL=jqxgauge.js.map
