"use strict";JQX("jqx-list-item",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                   <span id=\'itemInput\' class =\'jqx-input jqx-hidden\'></span>\n                    <span class ="jqx-overlay" id="overlay"></span>\n                    <div id="itemContainer" class ="jqx-content jqx-list-item-container"><span class="jqx-content-label" inner-h-t-m-l=\'[[innerHTML]]\'><content></content></span><span inner-h-t-m-l=\'[[details]]\' id="details" class="jqx-content-details"></span></div>\n                </div>'}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted||e.classList.contains("jqx-ripple")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}t.$.itemContainer.innerHTML="",e instanceof HTMLElement&&t.$.itemContainer.appendChild(e)}},{key:"insertBefore",value:function(e,t){var i=this;if(!i.isCompleted){var r=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(i,r.concat(Array.prototype.slice.call(arguments)))}t.parentNode.insertBefore(e,t)}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted||e.classList.contains("jqx-ripple")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.itemContainer.removeChild(e)}},{key:"attached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attached",this).call(this),e.ownerListBox=e.getListBox()}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);var e=this;""!==e.label?e.innerHTML=e.label:""!==e.innerHTML&&(e.label=e.innerHTML),e._setDisplayMode(e.displayMode),e._setItemColor(),e.$.container.noRipple=!0}},{key:"propertyChangedHandler",value:function(e,i,r){var n=this;if(babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,i,r),"hidden"===e)r?n.$.addClass("jqx-hidden"):n.$.removeClass("jqx-hidden");else if("color"===e)n._setItemColor();else if("displayMode"===e)n._setDisplayMode(r);else if("label"===e){var o=n.context;n.context=document,n.innerHTML=r;var l=n.getListBox();l.onItemUpdated(n),n.context=o}else if("details"===e){var a=n.context;n.context=document,n.$.details.innerHTML=r;var s=n.getListBox();s.onItemUpdated(n),n.context=a}else if("innerHTML"===e){var d=n.getListBox();d.onItemUpdated(n)}}},{key:"getListBox",value:function(){for(var e=this,t=e.parentNode;t instanceof JQX.ListBox==!1&&null!==t;)t=t.parentNode;return!t&&JQX.EnableShadowDOM?e.getRootNode().host:t}},{key:"_itemOnMouseEnter",value:function(){var e=this;!e.disabled&&e.ownerListBox&&(JQX.ListBox.DragDrop.Dragging&&e.ownerListBox.allowDrop&&(JQX.ListBox.DragDrop.DropDetails={item:e,position:"bottom"}),e.ownerListBox.$.verticalScrollBar.thumbCapture||e.ownerListBox.$.horizontalScrollBar.thumbCapture||e.setAttribute("hover",""))}},{key:"_itemOnMouseMove",value:function(e){var t=this;if(t.ownerListBox&&JQX.ListBox.DragDrop.Dragging&&t.ownerListBox.allowDrop&&!JQX.Utilities.Core.isMobile){for(var i=[].slice.call(t.ownerListBox.getElementsByClassName("jqx-list-item-bottom-line-feedback")),r=0;r<i.length;r++)i[r].$.removeClass("jqx-list-item-line-feedback"),i[r].$.removeClass("jqx-list-item-bottom-line-feedback");if(JQX.ListBox.DragDrop.DropDetails={item:t,position:"top"},!t.ownerListBox._areCSSVarsSupported){if(t.ownerListBox._indexOf(t)===t.ownerListBox._items.length-1||t.parentNode.lastElementChild===t){var n=t.getBoundingClientRect();e.pageY-window.pageYOffset>n.top+n.height/2-1&&(JQX.ListBox.DragDrop.DropDetails={item:t,position:"bottom"})}return}if(t.$.removeClass("jqx-list-item-line-feedback"),t.$.removeClass("jqx-list-item-bottom-line-feedback"),t.ownerListBox.sorted&&t.ownerListBox.autoSort)return;var o=t.ownerListBox._items.filter(function(e){return!e.hidden});if(o.indexOf(t)===o.length-1||t.parentNode.lastElementChild===t){var l=t.getBoundingClientRect();e.pageY-window.pageYOffset>l.top+l.height/2-1?(t.$.addClass("jqx-list-item-bottom-line-feedback"),JQX.ListBox.DragDrop.DropDetails={item:t,position:"bottom"}):arguments[1]||t.$.addClass("jqx-list-item-line-feedback")}else arguments[1]||t.$.addClass("jqx-list-item-line-feedback")}}},{key:"_itemOnMouseLeave",value:function(){var e=this;e.ownerListBox&&(JQX.ListBox.DragDrop.Dragging&&(e.$.removeClass("jqx-list-item-line-feedback"),e.$.removeClass("jqx-list-item-bottom-line-feedback")),e.removeAttribute("hover"))}},{key:"_setDisplayMode",value:function(e){var t=this,i=t.getListBox();if(i){var r="checkBox"===i.selectionMode||"radioButton"===i.selectionMode?i.selectionMode:"plain";t.displayMode=e=r}if("plain"===e)return void t.$itemInput.addClass("jqx-hidden");t.$itemInput.removeClass("jqx-hidden")}},{key:"_setItemColor",value:function(){var e=this,t=e.querySelector(".jqx-content-label"),i=/(^#[0-9A-F]{3}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{8}$)/i.test(e.color)?e.color:"";t.style.backgroundColor=i,t.style.color=e._getContrastColor(i)}},{key:"_getContrastColor",value:function(e){if(!e)return"";var t=function(e,t,i){return[parseInt(e,16),parseInt(t,16),parseInt(i,16)]}(e.slice(1,3),e.slice(3,5),e.slice(5,7)),i=(.299*t[0]+.61*t[1]+.114*t[2])/255;return parseFloat(i.toFixed(2))>.65?"#000000":"#FFFFFF"}},{key:"hasStyleObserver",get:function(){return!1}},{key:"enableShadowDOM",get:function(){return!1}},{key:"_focused",get:function(){var e=this;return void 0===e.__focused&&(e.__focused=!1),e.__focused},set:function(e){var t=this;t.__focused=e,e?t.setAttribute("focus",""):t.removeAttribute("focus")}}],[{key:"properties",get:function(){return{alternationIndex:{value:-1,type:"int"},color:{value:"",type:"string"},displayMode:{allowedValues:["plain","checkBox","radioButton"],value:"plain",type:"string"},grouped:{value:!1,type:"boolean"},selected:{value:!1,type:"boolean"},value:{value:"",type:"string"},label:{value:"",type:"string"},details:{value:"",type:"string"},group:{value:"",type:"string"},hidden:{value:!1,type:"boolean"},readonly:{value:!1,type:"boolean"}}}},{key:"listeners",get:function(){return{mouseenter:"_itemOnMouseEnter",mouseleave:"_itemOnMouseLeave"}}}]),t}(JQX.ContentElement)),JQX("jqx-list-items-group",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                 <span id="itemsLabel" class ="jqx-list-items-group-label">[[label]]</span>\n                 <div id="listItemsGroupContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="jqx-list-items-group-container">\n                    <content></content>\n                 </div>\n               </div>'}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.appendChild(e)}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.removeChild(e)}},{key:"getListBox",value:function(){for(var e=this,t=e.parentNode;t instanceof JQX.ListBox==!1&&null!==t;)t=t.parentNode;return t}},{key:"attached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attached",this).call(this),e.ownerListBox||(e.ownerListBox=e.getListBox())}},{key:"enableShadowDOM",get:function(){return!1}}],[{key:"properties",get:function(){return{label:{value:"",type:"string"}}}}]),t}(JQX.ContentElement)),JQX("jqx-list-box",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container" class="jqx-container">\n                 <div class="jqx-list-box-filter-input-container jqx-hidden" id="filterInputContainer">\n                     <input id="filterInput" disabled="[[disabled]]" placeholder=\'[[filterInputPlaceholder]]\'>\n                 </div>\n                 <div id="itemsContainer" class="jqx-list-items-container">\n                      <div id="placeholder" class ="jqx-placeholder">[[placeholder]]</div>\n                      <div id="itemsInnerContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="jqx-list-items-inner-container">\n                          <content></content>\n                      </div>\n                      <input type="text" id="editInput" class= "jqx-hidden"/>\n                 </div>\n                 <jqx-scroll-bar wait id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical"></jqx-scroll-bar>\n                 <jqx-scroll-bar wait id="horizontalScrollBar" disabled="[[disabled]]" ></jqx-scroll-bar>\n                 <div id="loadingIndicatorContainer" class ="jqx-loader-container">\n                    <span id="loadingIndicator" class="jqx-loader"></span>\n                    <span id="loadingIndicatorPlaceHolder" class ="jqx-loader-label jqx-hidden">[[loadingIndicatorPlaceholder]]</span>\n                 </div>\n                <input id="hiddenInput" type="hidden" name="[[name]]">\n                </div>'}},{key:"_mouseLeaveHandler",value:function(){for(var e=this,t=[].slice.call(e.getElementsByClassName("jqx-list-item-bottom-line-feedback")),i=0;i<t.length;i++)t[i].$.removeClass("jqx-list-item-line-feedback"),t[i].$.removeClass("jqx-list-item-bottom-line-feedback")}},{key:"_downHandler",value:function(e){var t=this;if(!(t.disabled||t.displayLoadingIndicator||t.readonly)){var i=e.originalEvent.target,r=null;if(!(i instanceof JQX.ListItem)||i.disabled||i.hidden||i instanceof JQX.ListItemsGroup)for(;i.parentElement;){if(i instanceof JQX.ListItem&&!i.disabled&&!i.hidden&&!(i instanceof JQX.ListItemsGroup)){r=i.dataItem;break}i=i.parentElement}else r=i.dataItem;JQX.ListBox.DragDrop.StartTime=new Date,JQX.ListBox.DragDrop.StartPosition={left:e.pageX,top:e.pageY},r&&(e.stopPropagation(),t.hasRippleAnimation&&(r.readonly||r.disabled||JQX.Utilities.Animation.Ripple.animate(i.$.overlay,e.pageX,e.pageY)),JQX.Utilities.Core.isMobile||"press"!==t.selectionChangeAction||(t._focus(r),t.select(r)),!JQX.ListBox.DragDrop.Feedback&&t.allowDrag&&(JQX.ListBox.DragDrop.DraggedFrom=t,JQX.ListBox.DragDrop.Feedback=document.createElement("span"),t.dragFeedbackFormatFunction?JQX.ListBox.DragDrop.Feedback.innerHTML=t.dragFeedbackFormatFunction(r):JQX.ListBox.DragDrop.Feedback.appendChild(r.offsetHeight?r.cloneNode(!0):t._createItem(r)),JQX.ListBox.DragDrop.Item=r,JQX.Utilities.Extend(JQX.ListBox.DragDrop.Feedback).addClass("jqx-popup jqx-list-item jqx-list-item-feedback")))}}},{key:"_dblclickEventHandler",value:function(e){var t=this;if(t.editable){var i=e.target.closest("jqx-list-item");if(!(i instanceof JQX.ListItem)||i.disabled||i.readonly)return void t.$editInput.addClass("jqx-hidden");t.$.editInput.owner=i,t.$.editInput.value=i.label,t.$.editInput.style.height=i.offsetHeight+"px",t.$.editInput.style.top=i.offsetTop+"px",t.$editInput.hasClass("jqx-hidden")&&t.$editInput.removeClass("jqx-hidden"),t.$.editInput.focus()}}},{key:"_editInputEventHandler",value:function(e){var t=this;if("blur"===e.type||"keydown"===e.type&&"Escape"===e.key)return t.$editInput.hasClass("jqx-hidden")||t.$editInput.addClass("jqx-hidden"),void t.focus();if("keydown"!==e.type&&!t.$editInput.hasClass("jqx-hidden")){var i=e.target;if(e.stopPropagation(),i.owner.label!==i.value&&(i.owner.label=i.value,t.itemTemplate&&t._applyTemplate(i.owner),t.dataSource)){var r=i.owner.dataIndex,n=t.dataSource[r];n&&(t.displayMember?n[t.displayMember]=i.value:n.label=i.value)}t.$editInput.addClass("jqx-hidden"),t.$.fireEvent("itemLabelChange",{selected:i.owner.selected,disabled:i.owner.disabled,index:t._indexOf(i.owner),label:i.owner.label,value:i.owner.value})}}},{key:"_pointerUpHandler",value:function(e){var t=this,i=e.originalEvent,r=i.target,n=function(i){var n=i.ownerListBox;n.disabled||n!==t||n.displayLoadingIndicator||"none"===n.selectionMode||i.grouped||i.readonly||(n._focus(i),n.select(i),e.preventDefault(),JQX.ListBox.DragDrop.StartPosition=null,t.$.fireEvent("itemClick",{selected:r.selected,disabled:r.disabled,index:t._indexOf(r),label:r.label,value:r.value}))};if(i.target instanceof JQX.ListItem&&!i.target.disabled&&!(i.target instanceof JQX.ListItemsGroup))return void n(r.dataItem);for(;r.parentElement;){if(r instanceof JQX.ListItem&&!r.disabled&&!(r instanceof JQX.ListItemsGroup)){n(r.dataItem);break}r=r.parentElement}if(this.enableShadowDOM&&"shadow"===this.shadowDomMode)for(var o=i.composedPath(),l=0;l<o.length;l++){var a=o[l];a instanceof JQX.ListItem&&!a.disabled&&n(a.dataItem)}}},{key:"_upHandler",value:function(e){var t=this;if(!t.disabled&&!t.readonly&&JQX.ListBox.DragDrop.StartPosition){if(JQX.Utilities.Core.isMobile&&!JQX.ListBox.DragDrop.Dragging){var i=Math.abs(e.pageX-JQX.ListBox.DragDrop.StartPosition.left),r=Math.abs(e.pageY-JQX.ListBox.DragDrop.StartPosition.top),n=i>=0&&i<=3&&r>=0&&r<=3;if(JQX.Utilities.Core.isMobile&&new Date-JQX.ListBox.DragDrop.StartTime>=300&&(n=!1,JQX.ListBox.DragDrop.StartTime=null),n){var o=e.originalEvent.target.closest("jqx-list-box");o?o._pointerUpHandler(e):t._pointerUpHandler(e),JQX.ListBox.DragDrop.StartPosition=null}else{var l=e.originalEvent.target;if(!(e.target instanceof JQX.ListItem)||l.readonly||e.target.disabled||e.target instanceof JQX.ListItemsGroup)for(;l.parentElement;){if(l instanceof JQX.ListItem&&!l.readonly&&!l.disabled&&!(l instanceof JQX.ListItemsGroup)){e.preventDefault(),e.stopPropagation();break}l=l.parentElement}else e.preventDefault(),e.stopPropagation()}}else if(!JQX.Utilities.Core.isMobile&&!JQX.ListBox.DragDrop.Dragging&&"release"===t.selectionChangeAction){var a=e.originalEvent.target.closest("jqx-list-box");a?a._pointerUpHandler(e):t._pointerUpHandler(e)}if(JQX.ListBox.DragDrop.Feedback){JQX.ListBox.DragDrop.Feedback.parentNode&&JQX.ListBox.DragDrop.Feedback.parentNode.removeChild(JQX.ListBox.DragDrop.Feedback),JQX.ListBox.DragDrop.Feedback=null;var s=void 0;if(JQX.Utilities.Core.isMobile&&JQX.ListBox.DragDrop.Dragging)for(var d=0;d<JQX.ListBox.DragDrop.ListBoxes.length;d++){var c=JQX.ListBox.DragDrop.ListBoxes[d],u=c.getBoundingClientRect();if(c.allowDrop&&!c.closest(".jqx-visibility-hidden")&&(u.left<=e.pageX&&e.pageX<=u.left+u.width&&u.top<=e.pageY&&e.pageY<=u.top+u.height)){s=c;for(var p=c._items.filter(function(e){return!e.hidden}),f=0;f<p.length;f++){var h=p[f],m=h.getBoundingClientRect();if((p.indexOf(h)===p.length-1||h.parentNode.lastElementChild===h)&&e.pageY>=u.top+h.offsetTop-c.scrollTop+m.height/2&&e.pageY<=u.top-c.scrollTop+h.offsetTop+m.height){JQX.ListBox.DragDrop.DropDetails={item:h,position:"bottom"};break}if(e.pageY>=u.top+h.offsetTop-c.scrollTop&&e.pageY<=u.top+h.offsetTop+m.height-c.scrollTop){JQX.ListBox.DragDrop.DropDetails={item:h,position:"top"};break}}}}if(JQX.ListBox.DragDrop.Dragging){if(JQX.ListBox.DragDrop.DropDetails){var g=JQX.ListBox.DragDrop.DropDetails.item,v=JQX.ListBox.DragDrop.Item,_=v.ownerListBox;if(s=!s&&e.originalEvent.target.closest?e.originalEvent.target.closest("jqx-list-box"):s,document.body.classList.remove("jqx-dragging"),g.$.removeClass("jqx-list-item-line-feedback"),g.$.removeClass("jqx-list-item-bottom-line-feedback"),s&&g.ownerListBox!==s&&s.items.length>0&&(g=s.items[s.items.length-1]),JQX.ListBox.DragDrop.Item===g||s!==g.ownerListBox&&!JQX.Utilities.Core.isMobile)s&&0===s._items.length&&"none"!==s.dropAction&&("move"===s.dropAction?JQX.ListBox.DragDrop.Item.ownerListBox.removeChild(JQX.ListBox.DragDrop.Item):"copy"===s.dropAction&&(v=v.cloneNode(!0)),s.appendChild(v));else if("none"!==v.ownerListBox.dropAction){g.ownerListBox!==v.ownerListBox&&"move"===v.ownerListBox.dropAction&&JQX.ListBox.DragDrop.Item.ownerListBox.removeChild(JQX.ListBox.DragDrop.Item),"copy"===v.ownerListBox.dropAction&&(v=v.cloneNode(!0)),JQX.ListBox.DragDrop.Item.group=g.group;var y=g.ownerListBox;"checkBox"!==y.selectionMode&&"radioButton"!==y.selectionMode&&y.clearSelection(),"top"===JQX.ListBox.DragDrop.DropDetails.position?y.insertBefore(v,g):g.parentNode.lastElementChild===g?y.appendChild(v):y.appendChild(v,g),y.ensureVisible(v),"checkBox"===y.selectionMode||"radioButton"===y.selectionMode?(y._focus(v),y._refreshSelection()):(y.clearSelection(),y.select(v))}v.selected&&s!==_&&_._refreshSelection();var x=JQX.ListBox.DragDrop.Item,b=x.ownerListBox;x.displayMode="checkBox"===b.selectionMode||"radioButton"===b.selectionMode?b.selectionMode:"plain",b.$.fireEvent("dragEnd",{item:x,target:g,data:JQX.ListBox.DragDrop,previousContainer:_,container:s,originalEvent:e}),b._focus(x)}else{var I=JQX.ListBox.DragDrop.Item,C=I.ownerListBox;I.displayMode="checkBox"===C.selectionMode||"radioButton"===C.selectionMode?C.selectionMode:"plain",C.$.fireEvent("dragEnd",{item:I,target:null,data:JQX.ListBox.DragDrop,previousContainer:C,container:C,originalEvent:e}),C._focus(I)}e.preventDefault()}delete JQX.ListBox.DragDrop.DraggedFrom,JQX.ListBox.DragDrop.Dragging=!1,JQX.ListBox.DragDrop.Item=null,JQX.ListBox.DragDrop.DropDetails=null}for(var D=0;D<JQX.ListBox.DragDrop.ListBoxes.length;D++){var L=JQX.ListBox.DragDrop.ListBoxes[D];L._dragInterval&&clearInterval(L._dragInterval)}}}},{key:"_itemsContainerMoveHandler",value:function(e){var t=this;if(JQX.ListBox.DragDrop.Dragging)return t._applyItemFeedback(e),t._moveHandler(e),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}},{key:"_applyItemFeedback",value:function(e){var t=this,i=e.originalEvent.target,r=i.closest?i.closest("jqx-list-item"):i;if(JQX.Utilities.Core.isMobile)return void(JQX.ListBox.DragDrop.DropDetails={item:JQX.ListBox.DragDrop.Item,position:"bottom"});if(0!==t.items.length)return r?void r._itemOnMouseMove(e):void t.items[t.items.length-1]._itemOnMouseMove(e,!0)}},{key:"_moveHandler",value:function(e){var t=this;if(JQX.ListBox.DragDrop.Feedback&&JQX.ListBox.DragDrop.DraggedFrom===t){var i=t.dragOffset;if(JQX.ListBox.DragDrop.Dragging){JQX.ListBox.DragDrop.Feedback.style.left=i[0]+e.pageX+"px",JQX.ListBox.DragDrop.Feedback.style.top=i[1]+e.pageY+"px",t.$.fireEvent("dragging",{item:JQX.ListBox.DragDrop.Item,data:JQX.ListBox.DragDrop,originalEvent:e.originalEvent});for(var r=0;r<JQX.ListBox.DragDrop.ListBoxes.length;r++)!function(t){var i=JQX.ListBox.DragDrop.ListBoxes[t];i._dragInterval&&clearInterval(i._dragInterval),i._dragInterval=setInterval(function(){var t=i.getBoundingClientRect();t.left<=e.clientX&&t.left+t.width>=e.clientX&&(e.clientY>=t.top&&e.clientY<=t.top+20?i.scrollTop-=2:e.clientY>=t.top+t.height-20&&e.clientY<=t.top+t.height&&(i.scrollTop+=2))},1)}(r);return e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}var n=Math.abs(e.pageX-JQX.ListBox.DragDrop.StartPosition.left),o=Math.abs(e.pageY-JQX.ListBox.DragDrop.StartPosition.top),l=new Date-JQX.ListBox.DragDrop.StartTime,a=n>=5&&n<=15||o>=5&&o<=15;if(JQX.Utilities.Core.isMobile&&(l<300||l>1e3)&&(a=!1),a){JQX.ListBox.DragDrop.Dragging=!0,JQX.ListBox.DragDrop.Feedback.style.left=i[0]+e.pageX+"px",JQX.ListBox.DragDrop.Feedback.style.top=i[1]+e.pageY+"px",document.body.appendChild(JQX.ListBox.DragDrop.Feedback),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation();var s=JQX.ListBox.DragDrop.Item,d=s.ownerListBox;d.$.fireEvent("dragStart",{item:s,data:JQX.ListBox.DragDrop,container:d,previousContainer:d,originalEvent:e.originalEvent}),document.body.classList.add("jqx-dragging")}}}},{key:"_focusHandler",value:function(){var e=this;e._focused=!0,e.setAttribute("focus","")}},{key:"_blurHandler",value:function(){var e=this;e._focused=!1,e.removeAttribute("focus")}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}t.isVirtualized?(t._items.indexOf(e)>-1&&t._items.splice(t._items.indexOf(e),1),t._items.push(e)):(e.dataItem=e,t.enableShadowDOM&&"light"===t.shadowDomMode?t.appendChild(e):t.$.itemsInnerContainer.appendChild(e),t._items.indexOf(e)>-1&&t._items.splice(t._items.indexOf(e),1),t._items.push(e)),t._refreshItems(),t._refreshSelection()}},{key:"insertBefore",value:function(e,t){var i=this;if(!i.isCompleted){var r=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(i,r.concat(Array.prototype.slice.call(arguments)))}i.isVirtualized?(i._items.indexOf(e)>-1&&i._items.splice(i._items.indexOf(e),1),i._items.splice(i._indexOf(t),0,e)):(e.dataItem=e,t.parentNode.insertBefore(e,t),i._items.indexOf(e)>-1&&i._items.splice(i._items.indexOf(e),1),i._items.splice(i._indexOf(t),0,e)),i._refreshItems(),i._refreshSelection()}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}if(t.isVirtualized)t._items.splice(t._indexOf(e),1);else if(e.parentNode){var r=t.selectedIndexes.slice(0),n=t.selectedValues.slice(0),o=r.indexOf(e.dataIndex);e.parentNode.removeChild(e),o>-1&&(r.splice(o,1),n.splice(o,1),t.selectedIndexes=r,t.selectedValues=n)}t._refreshItems()}},{key:"propertyChangedHandler",value:function(e,i,r){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,i,r);var n=this;switch(e){case"innerHTML":n.clearSelection(),n._dataBind(),n.innerHTML=n.content=JQX.Utilities.Core.html(n.$.content);break;case"dataSource":case"valueMember":case"groupMember":case"displayMember":n.clearSelection(),n._dataBind();break;case"disabled":case"unfocusable":n._setFocusable();break;case"displayLoadingIndicator":n._setLoadingIndicatorVisibility();break;case"filterable":n._refreshFilter(),n._refreshLayout();break;case"grouped":if(r?n._group():n._ungroup(),"radioButton"===n.selectionMode){if(n.selectedValues.length>0){var o=n.selectedValues;n.clearSelection(),n.select(o[0])}}else n._refreshSelection();n._refreshLayout();break;case"itemTemplate":if(null===r||""===r)return n._items.map(function(e){return e.innerHTML=e.label}),delete n._bindingDetails,void n._refreshLayout();var l=n.querySelectorAll("jqx-list-item"),a=function(){n._handleItemTemplate(r)&&(n._items.map(function(e){return n._applyTemplate(e)}),n._refreshLayout()),n.ownerElement&&n.ownerElement._setDropDownSize&&n.ownerElement._setDropDownSize(),n.$.fireEvent("bindingComplete")};0===l.length?a():n._ensureItemsReady(l,a);break;case"selectedIndexes":case"selectedValues":var s=n.selectedIndexes.slice(0),d=n.selectedValues.slice(0);if(!n._items||0===n._items.length)return n.selectedIndexes=[],n.selectedValues=[],void(n.$.hiddenInput.value=n.selectedValues.toString());if(n._propertyChanging=!0,"selectedIndexes"===e){s=i.slice(0),n.clearSelection();for(var c=0;c<r.length;c++){var u=r[c],p=n._items[u];p&&("oneOrManyExtended"===n.selectionMode||"oneOrMany"===n.selectionMode?(n.selectedIndexes.length>0&&0===c&&n.clearSelection(),n._select(p)):n.select(p))}}else{d=i.slice(0),n.selectedValues=[],n.clearSelection();for(var f=0;f<r.length;f++){var h=r[f],m=n.getItem(h);m&&("oneOrManyExtended"===n.selectionMode?n._select(m):n.select(m))}}if(n.selectedIndexes.length>0&&n._focus(n._items[n.selectedIndexes[0]]),n._propertyChanging=!1,JSON.stringify(d)!==JSON.stringify(n.selectedValues.slice(0))){for(var g=[],v=[],_=0;_<s.length;_++)n.selectedIndexes.indexOf(s[_])<0&&v.push(n._items[s[_]]);for(var y=0;y<n.selectedIndexes.length;y++)s.indexOf(n.selectedIndexes[y])<0&&g.push(n._items[n.selectedIndexes[y]]);var x={addedItems:g,removedItems:v};if(n.selectedIndexes.length>0){var b=n._items[n.selectedIndexes[n.selectedIndexes.length-1]];void 0!==b&&(x.selected=b.selected,x.disabled=b.disabled,x.index=n._indexOf(b),x.label=b.label,x.value=b.value)}else x.selected=!1,x.disabled=!1,x.index=-1,x.label="",x.value="";n.$.fireEvent("change",x)}break;case"selectionMode":var I="checkBox"===n.selectionMode||"radioButton"===n.selectionMode?n.selectionMode:"plain",C=n.selectedIndexes.slice(0),D=n.selectedValues.slice(0);n._propertyChanging=!0;var L=n.selectedValues;n.selectedValues=[],n.clearSelection();for(var S=0;S<L.length;S++){var k=L[S],B=n.getItem(k);B&&("oneOrManyExtended"===n.selectionMode?n._select(B):n.select(B))}if(n._items.forEach(function(e){return e.displayMode=I}),n._recycle(),n._propertyChanging=!1,JSON.stringify(D)!==JSON.stringify(n.selectedValues.slice(0))){for(var M=[],w=[],H=0;H<C.length;H++)n.selectedIndexes.indexOf(C[H])<0&&w.push(n._items[C[H]]);for(var O=0;O<n.selectedIndexes.length;O++)C.indexOf(n.selectedIndexes[O])<0&&M.push(n._items[n.selectedIndexes[O]]);var $={addedItems:M,removedItems:w};if(C.length>0){var T=n._items[C[C.length-1]];T&&($.selected=T.selected,$.disabled=T.disabled,$.index=n._indexOf(T),$.label=T.label,$.value=T.value)}n.$.fireEvent("change",$)}break;case"topVisibleIndex":n._setTopVisibleIndex(r);break;case"autoSort":n._canSort=r;break;case"sortDirection":case"sorted":n._canSort=!0,r?n._sort():n._unsort();var V=n.selectedValues;n.selectedValues=[],n._refreshSelection();for(var Q=0;Q<V.length;Q++){var X=V[Q],q=n.getItem(X);q&&("oneOrManyExtended"===n.selectionMode?n._select(q):n.select(q))}n._refreshLayout(),n._canSort=n.autoSort}}},{key:"_refreshSelection",value:function(){var e=this;if(e._items&&0!==e._items.length){var t=e.selectedValues;e.selectedIndexes=[],e.selectedValues=[];for(var i=0;i<e._items.length;i++){var r=e._items[i];r.selected=!1,t.indexOf(r.value)>-1&&e.select(r)}e._recycle()}}},{key:"clearSelection",value:function(){var e=this;if(e._items&&0!==e._items.length){for(var t=[],i=0;i<e._items.length;i++)e._items[i].selected&&t.push(e._items[i]);e._items.map(function(e){return e.selected=!1});var r=(e.selectedValues.slice(0),e.selectedIndexes.slice(0));if(e.selectedIndexes=[],e.selectedValues=[],e.$.hiddenInput.value=e.selectedValues.toString(),e._recycle(),e.context!==e){var n={addedItems:[],removedItems:t};if(r.length>0){var o=e._items[r[r.length-1]];o&&(n.selected=o.selected,n.disabled=o.disabled,n.index=e._indexOf(o),n.label=o.label,n.value=o.value)}e.$.fireEvent("change",n)}}}},{key:"ensureVisible",value:function(e){var t=this;if(e)return!("string"==typeof e&&!(e=t.getItem(e)))&&(t.isVirtualized||t.$.itemsContainer.scrollTop===t.scrollTop||(t.scrollTop=t.$.itemsContainer.scrollTop),e.top+e.height>=t.scrollTop+t.offsetHeight&&(t.scrollTop=t.scrollTop+e.height,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),(e.top<=t.scrollTop||e.top>=t.scrollTop+t.$.itemsContainer.offsetHeight)&&(t.scrollTop=e.top,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),0===t._indexOf(e)||1===t._indexOf(e)&&t._items.length>1&&t._items[0].grouped?(t.scrollTop=0,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)):t._indexOf(e)===t._items.length-1&&(t.scrollTop=t.scrollHeight,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),!0)}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);var e=this;if(e.enableShadowDOM&&"light"===e.shadowDomMode){var i=document.createDocumentFragment();[].slice.call(e.$.itemsInnerContainer.children).map(function(e){return i.appendChild(e)}),e.appendChild(i),e.$.itemsInnerContainer.appendChild(document.createElement("slot"))}e._areCSSVarsSupported=JQX.Utilities.Core.CSSVariablesSupport(),e._keysPressed={},e._incrementalSearchQuery="",e._incrementalSearchItems=[],e._canSort=!0,e._previousEntry="",e.isUpdating=0,e._scrollView&&(e._scrollView=new JQX.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar),e._scrollView.hScrollBar.$.addClass("jqx-hidden"),e._scrollView.vScrollBar.$.addClass("jqx-hidden"));var r=e._scrollView.vScrollBar,n=e._scrollView.hScrollBar;r.hasStyleObserver=!1,n.hasStyleObserver=!1,r.hasResizeObserver=!1,n.hasResizeObserver=!1,r.wait=!1,n.wait=!1,e._setFocusable(),e._setLoadingIndicatorVisibility(),e._refreshFilter(),e._initializeInnerHTML(),e._dataBind()}},{key:"attached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attached",this).call(this),JQX.ListBox.DragDrop||(JQX.ListBox.DragDrop={ListBoxes:[]}),JQX.ListBox.DragDrop.ListBoxes.push(e),e._scrollView||(e._scrollView=new JQX.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.selectedIndexes.length>0&&e.ensureVisible(e._items[e.selectedIndexes[0]])}},{key:"detached",value:function(){var e=this;if(babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detached",this).call(this),e._scrollView&&(e._scrollView.unlisten(),delete e._scrollView),JQX.ListBox.DragDrop&&JQX.ListBox.DragDrop.ListBoxes){var i=JQX.ListBox.DragDrop.ListBoxes.indexOf(e);JQX.ListBox.DragDrop.ListBoxes.splice(i,1)}}},{key:"_createItem",value:function(e,t,i){var r=this,n="checkBox"===r.selectionMode||"radioButton"===r.selectionMode?r.selectionMode:"plain",o=i?{}:document.createElement("jqx-list-item");o.ownerListBox=r,"number"==typeof e&&(e=""+e);var l=function(t,i){return void 0!==e[t]?""+e[t]:e[i]},a="string"==typeof e?e:l(r.displayMember,"label"),s="string"==typeof e?e:l(r.valueMember,"value"),d=l(r.groupMember,"group");return void 0===a&&(a=void 0!==t?""+t:""),o.label=o.innerHTML=""+a,void 0===s&&(s=void 0!==t?""+t:a),e.color&&(o.color=e.color),o.value=""+s,o.displayMode=n,o.selected=!!e.selected&&e.selected,o.disabled=!!e.disabled&&e.disabled,o.dataItem=o,void 0!==t&&(o.dataIndex=t),r._alternateItem(o),e.title&&(o.title=e.title),d&&(o.group=""+d),o}},{key:"_alternateItem",value:function(e){var t=this,i=t.alternationStart,r=t.alternationEnd>0?t.alternationEnd:1/0;t.alternationCount<=0||(void 0===t._alternationIndexCounter&&(t._alternationIndexCounter=0),e.dataIndex>=i&&e.dataIndex<=r&&(e.alternationIndex=t._alternationIndexCounter++,t._alternationIndexCounter===t.alternationCount&&(t._alternationIndexCounter=0)))}},{key:"_beginUpdate",value:function(){this.isUpdating++}},{key:"_isUpdating",value:function(){return this.isUpdating>0}},{key:"_endUpdate",value:function(){this.isUpdating--}},{key:"_initializeRecyclingItems",value:function(){var e=this;if(e.dataSource&&(!e.dataSource||0!==e.dataSource.length)&&e.isVirtualized){var t=0,i=e.offsetHeight;e.$.itemsInnerContainer.innerHTML="",e._recyclingItems=[];var r=function(){for(var r=0;r<e.dataSource.length;r++){var n=e.dataSource[r],o=e._createItem(n);if(e.itemHeight&&"auto"!==e.itemHeight&&(o.style.height=e.itemHeight+"px"),e.$.itemsInnerContainer.appendChild(o),t+=o.offsetHeight,o.dataItem=e._items[r],e._recyclingItems.push(o),t>1.5*i)break}};r();for(var n=0;t<1.5*i&&++n<5;)r()}}},{key:"_dataBind",value:function(){var e=this;if(e._scrollView||(e._scrollView=new JQX.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),"function"==typeof e.dataSource&&(e._items=[]),"string"==typeof e.dataSource&&(e.dataSource=JSON.parse(e.dataSource)),null!==e.dataSource&&Array.isArray(e.dataSource)){e.isUpdating++;var t=function(t){e._items=[],e._groups=[];for(var i=e.dataSource,r=0;r<i.length;r++){var n=i[r],o=e._createItem(n,r,!t);e._items[r]=o,
t&&t.appendChild(o)}};if(e.isVirtualized)t(),e._initializeRecyclingItems();else{var i=document.createDocumentFragment();e.$.itemsInnerContainer.innerHTML="",t(i),e.$.itemsInnerContainer.appendChild(i)}e.isUpdating--}var r=e.enableShadowDOM?e.shadowRoot.querySelectorAll("jqx-list-item"):e.querySelectorAll("jqx-list-item"),n=function(){e.isUpdating++,e.dataSource||(e._initializeHtmlListItems(),e._initializeHtmlListGroups()),e.grouped&&e._group(),e.sorted&&e._sort(),e._refreshLayout(),e._initializeSelection(),e.isInitialized=!0,e._canSort=e.autoSort,e.isUpdating--,e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&(e._items.map(function(t){return e._applyTemplate(t)}),e._refreshLayout()),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted()),e.topVisibleIndex>-1&&e._setTopVisibleIndex(e.topVisibleIndex),e.$.fireEvent("bindingComplete"),e._updateTopVisibleIndex(),0===e._items.length&&e.clearItems()};0===r.length?n():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(r,n))}},{key:"_ensureItemsReady",value:function(e,t){var i=this,r=function(){var i=function(t){for(var i=0;i<e.length;i++)e[i].context="node"===t?e[i]:document};i("node"),t(),i()};if(0===e.length)r();else{i._nodesReadyListeners=0;for(var n=0;n<e.length;n++){var o=e[n],l=function(){0===--i._nodesReadyListeners&&(r(),delete i._nodesReadyListeners)}.bind(i);o.isCompleted||(i._nodesReadyListeners++,o._onCompleted=l)}0===i._nodesReadyListeners&&r()}}},{key:"_initializeInnerHTML",value:function(){var e=this;e.$.itemsInnerContainer.innerHTML.indexOf("<option")>=0?e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<optgroup/gi,"<jqx-list-items-group").replace(/<\/optgroup/gi,"</jqx-list-items-group").replace(/<option/gi,"<jqx-list-item").replace(/<\/option/gi,"</jqx-list-item"):e.$.itemsInnerContainer.innerHTML.indexOf("<ul")>=0&&(e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<ul/gi,"<jqx-list-items-group").replace(/<\/ul/gi,"</jqx-list-items-group").replace(/<li/gi,"<jqx-list-item").replace(/<\/li/gi,"</jqx-list-item"))}},{key:"_initializeHtmlListItems",value:function(){var e=this,t=e.enableShadowDOM&&"shadow"===e.shadowDomMode?e.shadowRoot.querySelectorAll("jqx-list-item"):e.querySelectorAll("jqx-list-item"),i="checkBox"===e.selectionMode||"radioButton"===e.selectionMode?e.selectionMode:"plain",r=function(e,t,i){return void 0!==e[t]?""+e[t]:e[i]};e._items=[];for(var n=0,o=0;o<t.length;o++){var l=t[o];l.dataIndex=o,l.label=l.innerHTML,l.dataItem=l,l.top||(l.top=n),l.height||(l.height=l.offsetHeight),n+=l.height,l.value||(l.value=""+o);var a=r(l,e.displayMember,"label"),s=r(l,e.valueMember,"value"),d=r(l,e.groupMember,"group");l.label!==a&&(l.label=a),l.value!==s&&(l.value=s),l.group!==d&&(l.group=d);var c=l.context;l.context=document,l.displayMode=i,l.context=c,e._alternateItem(l),l.selected&&(e.selectedIndexes.push(o),e.selectedValues.push(l.value)),e._items.push(l)}e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._items.map(function(t){return e._applyTemplate(t)})}},{key:"_group",value:function(){var e=this;e.isUpdating++;var t=[],i=[];e._canSort&&e._unsort();for(var r=0;r<e._items.length;r++){var n=e._items[r],o=n.group?n.group.trim():n.innerHTML.charAt(0)||n.label.charAt(0);o+=" ",t[o]?t[o].items.push(n):t[t.length++]=t[o]={items:[n],label:o}}if(e.isVirtualized){e._groups=[];for(var l=0;l<t.length;l++){var a=t[l];a.dataIndex=l,a.grouped=!0,a.hidden=!1,a.displayMode="plain",i.push(a);for(var s=0;s<t[l].items.length;s++){var d=a.items[s];d.group=a,i.push(d)}}e._groups=t,e._items=i}else{for(;e.$.itemsInnerContainer.firstChild;)e.$.itemsInnerContainer.removeChild(e.$.itemsInnerContainer.firstChild);var c=document.createDocumentFragment();e._groups=[];for(var u=0;u<t.length;u++){var p=t[u],f=document.createElement("jqx-list-items-group");f.label=p.label,f.dataIndex=u;for(var h=0;h<t[u].items.length;h++){var m=p.items[h];i.push(m),m.group=p.label,f.appendChild(m)}e._groups.push(f),c.appendChild(f)}e._items=i;/Trident|Edge/.test(navigator.userAgent)?setTimeout(function(){e.$.itemsInnerContainer.appendChild(c)},50):e.$.itemsInnerContainer.appendChild(c)}e.sorted&&e._sort(),e.isUpdating--}},{key:"_ungroup",value:function(){var e=this;e.isUpdating++,e._groups=[],e._canSort&&e._unsort();var t=[];if(e.isVirtualized)for(var i=0;i<e._items.length;i++){var r=e._items[i];r.grouped||t.push(r)}else{for(var n=document.createDocumentFragment(),o=0;o<e._items.length;o++){var l=e._items[o];n.appendChild(l),t.push(l)}t.length>0&&(e.$.itemsInnerContainer.innerHTML="",e.$.itemsInnerContainer.appendChild(n))}e._items=t,e.sorted&&e._sort(),e.isUpdating--}},{key:"_initializeHtmlListGroups",value:function(){var e=this,t=e.$.itemsInnerContainer.querySelectorAll("jqx-list-items-group");e._groups=[];for(var i=0;i<t.length;i++){var r=t[i];r.dataIndex=i,e._groups.push(r)}}},{key:"_initializeSelection",value:function(){var e=this,t=e.selectedIndexes.slice(0),i=e.selectedValues.slice(0);e.clearSelection(),"oneOrManyExtended"===e.selectionMode&&(e._keysPressed.Control=!0);for(var r=0;r<e._items.length;r++){var n=e._items[r];(t.indexOf(r)>=0||i.indexOf(n.value||n.label)>=0)&&(e._focusedItem&&(e._focusedItem._focused=!1),e._focusedItem=null,e.select(n))}"oneOrManyExtended"===e.selectionMode&&(e._keysPressed.Control=!1)}},{key:"onItemUpdated",value:function(){var e=this;e.isInitialized&&!e._isUpdating()&&(e.isUpdating++,e._refreshLayout(),e.isUpdating--)}},{key:"_refreshItems",value:function(){var e=this;if(e.isInitialized&&!e._isUpdating()){if(e.isUpdating++,e.grouped?e._ungroup():e.sorted&&e._canSort&&e._unsort(),!e.isVirtualized){e._items=[];for(var t=e.enableShadowDOM?e.shadowRoot.querySelectorAll("jqx-list-item"):e.querySelectorAll("jqx-list-item"),i=0;i<t.length;i++)t[i].dataIndex=i,e._alternateItem(t[i]),e._items.push(t[i])}e.grouped?e._group():e.sorted&&e._sort(),e._refreshLayout(),e.isUpdating--}}},{key:"_applyIncrementalSearch",value:function(e){var t=this;null===t.incrementalSearchDelay||isNaN(t.incrementalSearchDelay)||["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control","Home","End","PageUp","PageDown"].indexOf(e)>-1||(0!==t._incrementalSearchQuery.indexOf(e)&&(t._incrementalSearchQuery+=e),t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t._incrementalSearch(),t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},t.incrementalSearchDelay))}},{key:"select",value:function(e){var t=this;if(("string"!=typeof e||(e=t.getItem(e)))&&("number"!=typeof e||(e=t.getItem(e)))&&!e.grouped&&!e.readonly){if("none"===t.selectionMode)return t.selectedIndexes=[],void(t.selectedValues=[]);switch(!t._focusedItem!==e&&"none"!==t.selectionMode&&(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=e,e._focused=!0),t.selectionMode){case"one":return(1!==t.selectedIndexes.length||t.selectedIndexes[0]!==t._indexOf(e))&&(t._previouslySelectedIndexes=t.selectedIndexes,t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),delete t._previouslySelectedIndexes,!0);case"zeroOrOne":return 1===t.selectedIndexes.length&&t.selectedIndexes[0]===t._indexOf(e)?(t.unselect(e),!0):(t._previouslySelectedIndexes=t.selectedIndexes,t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),delete t._previouslySelectedIndexes,!0);case"radioButton":if(t._previouslySelectedIndexes=t.selectedIndexes,t.$.itemsInnerContainer.querySelectorAll("jqx-list-items-group").length>0){var i=e.parentNode;if(!e.selected){for(var r in i.children){var n=i.children[r];n.selected&&t.unselect(n)}t._select(e)}return delete t._previouslySelectedIndexes,!0}if(t.isVirtualized&&t._groups.length>0){var o=e.group;if(!e.selected){for(var l in o.items){var a=o.items[l];a.selected&&t.unselect(a)}t._select(e)}return delete t._previouslySelectedIndexes,!0}return e.selected||(t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e)),delete t._previouslySelectedIndexes,!0;case"oneOrMany":return e.selected?t.selectedIndexes.length>1&&t.unselect(e):t._select(e),!0;case"zeroOrMany":case"checkBox":return e.selected?t.unselect(e):t._select(e),!0;case"oneOrManyExtended":var s=t.selectedValues;if(t._keysPressed.Control)return t.selectedIndexes.length>1&&e.selected?(t.unselect(e),t._focus(t._items[t.selectedIndexes[0]])):t._select(e),!0;if(t._keysPressed.Shift){var d=t._items[t.selectedIndexes[0]],c=void 0;t.clearSelection();var u=s.indexOf(d.value)>=0||d.selected;if(t._select(d,u),t._indexOf(d)>t._indexOf(e))for(c=t._indexOf(d)-1;c>=t._indexOf(e);){var p=t._items[c],f=s.indexOf(p.value)>=0||p.selected;t._select(p,f),c--}else for(c=t._indexOf(d)+1;c<=t._indexOf(e);){var h=t._items[c],m=s.indexOf(h.value)>=0||h.selected;t._select(h,m),c++}for(var g=[],v=0;v<s.length;v++)g.push(t.getItem(s[v]));if(g.length>0&&!t._propertyChanging){for(var _=[],y=0;y<t.selectedValues.length;y++){var x=t.selectedValues[y];s.indexOf(x)<0&&_.push(t.getItem(x))}t.$.fireEvent("change",{addedItems:_,removedItems:g,selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value})}return!0}for(var b=0;b<s.length;b++){var I=s[b],C=t.getItem(I);e!==C&&t.unselect(C)}return t.clearSelection(),t._select(e,s.indexOf(e.value)>=0),!0}return!1}}},{key:"_applyTemplate",value:function(e,t){var i=this;if(null!==i.itemTemplate){if("function"==typeof i.itemTemplate)return void i.itemTemplate(e,{label:e.label,value:e.value,index:i._items.indexOf(e)});if(i._bindingDetails&&0!==i._bindingDetails.length){for(var r=i._bindingDetails.length,n=document.importNode(i._template.content,!0),o=void 0,l=void 0,a=0;a<r;a++){o=n.childNodes[i._bindingDetails[a].childNodeIndex],l=i._bindingDetails[a].bindingString.length;for(var s=0;s<l;s++){var d=i._bindingDetails[a].bindingString[s],c=d.indexOf("label")>=0?e.label:e.value;o.innerHTML=o.innerHTML.replace(d,c)}}e.innerHTML="";for(var u=0;u<n.childNodes.length;u++)n.childNodes[u].outerHTML&&(e.innerHTML+=n.childNodes[u].outerHTML);!1!==t&&(i._scrollHeightTimer&&(clearInterval(i._scrollHeightTimer),i._scrollHeightCounter=0),i._scrollHeightTimer=setInterval(function(){i._lastScrollHeight===i.$.itemsInnerContainer.scrollHeight&&10!==i._scrollHeightCounter||(i._refreshLayout(),clearInterval(i._scrollHeightTimer)),i._lastScrollHeight=i.$.itemsInnerContainer.scrollHeight,i._scrollHeightCounter++},50))}}}},{key:"_filterItems",value:function(e,t,i){var r=this,n=r.$.filterInput.value,o=void 0,l=void 0,a=function(){if(0===l.length)return r._filteredItems=[],void(t&&t());o=r._queryItems(n,r.filterMode);for(var i=0;i<l.length;i++)l[i].hidden=!0,l[i].$.addClass("jqx-hidden");for(var a=0;a<o.length;a++){var s=o[a];s.hidden=!1,s.$.removeClass("jqx-hidden")}if(r.grouped&&r.isVirtualized)for(var d=0;d<r._groups.length;d++){for(var c=r._groups[d],u=c.items,p=!0,f=0;f<u.length;f++)u[f].hidden||(p=!1);p&&(c.hidden=!0)}if(r.grouped&&!r.isVirtualized)for(var h=0;h<r._groups.length;h++){for(var m,g=r._groups[h],v=(m=[]).concat.apply(m,babelHelpers.toConsumableArray(g.querySelectorAll("jqx-list-item"))),_=!0,y=0;y<v.length;y++)v[y].$.hasClass("jqx-hidden")||(_=!1);_?g.$.addClass("jqx-hidden"):g.$.removeClass("jqx-hidden")}r._filteredItems=o,r._refreshLayout(),t&&t(),e||r._refreshSelection()};if("function"==typeof r.dataSource)if(n||i){var s=function(e){(n||i)&&r.isAttached&&(r._updateListBoxAfterQuery=function(){o=l=r._items,a()},r.clearItems(),r.insert(0,e))},d=r.dataSource(n,s);if(d){if(!n&&!i)return;r._updateListBoxAfterQuery=function(){o=l=r._items,a()},r.clearItems(),r.insert(0,d)}}else r.clearItems(),o=l=r._items,a();else{if(l=r._items,0===l.length)return;a()}}},{key:"_getNextItem",value:function(e){for(var t=this,i=t._items,r=t._items.length,n=Math.max(e+1,0);n<r;){var o=i[n];if(!(o.disabled||o.hidden||o.grouped||o.readonly))return o;n++}return i[e]}},{key:"_getPreviousItem",value:function(e){for(var t=this,i=t._items,r=Math.max(e-1,0);r>-1;){var n=i[r];if(!(n.disabled||n.hidden||n.grouped||n.readonly))return n;r--}return i[e]}},{key:"update",value:function(e,t){var i=this,r=i._items[e];if(r){if("string"==typeof t)r.label=t,void 0===r.value&&(r.value=t);else for(var n in t)"selected"===n&&r[n]!==t[n]?i.select(r):r[n]=t[n],"group"===n&&i._refreshItems();(i.sorted||i.grouped||i.isVirtualized)&&(i._refreshItems(),i._refreshSelection())}else i.error(i.localize("indexOutOfBound",{elementType:i.nodeName.toLowerCase(),method:"update"}))}},{key:"insert",value:function(e,t){function i(){r._refreshItems(),0!==r._items.length&&(r._updateListBoxAfterQuery&&(r._updateListBoxAfterQuery(),delete r._updateListBoxAfterQuery),r._refreshSelection(),r.$.fireEvent("bindingComplete"))}var r=this,n=[];if(e||(e=0),Array.isArray(t)){r.isUpdating++;for(var o=0;o<t.length;o++){var l=t[o],a=r._createItem(l);n.push(a),e>=r._items.length||0===r._items.length?r.appendChild(a):r.insertBefore(a,r._items[e])}r.isUpdating--}else{var s=r._createItem(t);n.push(s),e>=r._items.length||0===r._items.length?r.appendChild(s):r.insertBefore(s,r._items[e])}n.length>0&&(n.map(function(e){return r._applyTemplate(e)}),r._ensureItemsReady(n,i))}},{key:"remove",value:function(e){var t=this,i=t._items[e];i?(t.isVirtualized?t._items.splice(e,1):i.parentNode.removeChild(i),i.selected&&t.unselect(i),t._refreshItems(),t._refreshSelection(),0===t.selectedIndexes.length&&t._items.length>0&&("oneOrMany"!==t.selectionMode&&"one"!==t.selectionMode&&"oneOrManyExtended"!==t.selectionMode||t.select(t._items[0]))):t.error(t.localize("indexOutOfBound",{elementType:t.nodeName.toLowerCase(),method:"remove"}))}},{key:"_queryItems",value:function(e,t){var i=this,r=[];if(0===e.length)return i._items;for(var n=0;n<i._items.length;n++){var o=function(r,n){if(r.grouped)return r;switch(t){case"startsWith":if(0===r.label.indexOf(n))return r;break;case"startsWithIgnoreCase":if(0===r.label.toLowerCase().indexOf(n.toLowerCase()))return r;break;case"doesNotContain":if(r.label.indexOf(n)<0)return r;break;case"doesNotContainIgnoreCase":if(r.label.toLowerCase().indexOf(n.toLowerCase())<0)return r;break;case"contains":if(r.label.indexOf(n)>-1)return r;break;case"containsIgnoreCase":if(r.label.toLowerCase().indexOf(n.toLowerCase())>-1)return r;break;case"equals":if(0===r.label.localeCompare(n))return r;break;case"equalsIgnoreCase":if(0===r.label.toLowerCase().localeCompare(n.toLowerCase()))return r;break;case"endsWith":if(r.label.endsWith(n))return r;break;case"endsWithIgnoreCase":if(r.label.toLowerCase().endsWith(n.toLowerCase()))return r;break;case"custom":if(i.filterCallback(r,e))return r}return null}(i._items[n],e);o&&r.push(o)}return r}},{key:"_select",value:function(e,t){var i=this,r=i.selectedIndexes.indexOf(i._indexOf(e)),n=i.selectedIndexes.slice(0),o=i.selectedValues.slice(0);if(e.selected=!0,-1!==r)return i._recycle(),!1;if(n.push(i._indexOf(e)),o.push(e.value||e.label),i.selectedIndexes=n,i.selectedValues=o,i._recycle(),i.$.hiddenInput.value=o.toString(),i.isCompleted&&!t&&i.isInitialized&&!i._propertyChanging){var l=[];if(i._previouslySelectedIndexes){for(var a=0;a<i._previouslySelectedIndexes.length;a++)i.selectedIndexes.indexOf(i._previouslySelectedIndexes[a])<0&&l.push(i._items[i._previouslySelectedIndexes[a]]);delete i._previouslySelectedIndexes}return i.$.fireEvent("change",{addedItems:[e],removedItems:l,selected:e.selected,disabled:e.disabled,index:i._indexOf(e),label:e.label,value:e.value}),!0}}},{key:"_setTopVisibleIndex",value:function(e){var t=this;if("number"==typeof e&&(t.topVisibleIndex=Math.max(0,e),e=t._items[t.topVisibleIndex]),!e)return!1;e.top!==t.scrollTop&&(t.scrollTop=e.top,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop),t.scrollHeight===t.scrollTop&&t._updateTopVisibleIndex())}},{key:"_updateTopVisibleIndex",value:function(){var e=this,t=e.scrollTop+e._scrollView.verticalScrollBar.offsetHeight-e.offsetHeight,i=void 0;if(e.scrollTop<e.scrollHeight/2){for(var r=0;r<e._items.length;r++)if(e._items[r].top>t){i=e._items[r];break}}else for(var n=e._items.length-1;n>=0&&!(e._items[n].top<t);n--)i=e._items[n];i&&(e.topVisibleIndex=i.dataIndex)}},{key:"unselect",value:function(e){var t=this;if(e&&("string"!=typeof e||(e=t.getItem(e)))){if("none"===t.selectionMode)return void t.clearSelection();var i=t.selectedIndexes.indexOf(t._indexOf(e)),r=t.selectedIndexes.slice(0),n=t.selectedValues.slice(0);if(e.selected=!1,!(i>=0))return!1;if(r.splice(i,1),n.splice(i,1),t.selectedIndexes=r,t.selectedValues=n,t.$.hiddenInput.value=n.toString(),t.isCompleted&&!t._propertyChanging)return t.$.fireEvent("change",{addedItems:[],removedItems:[e],selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value}),t._recycle(),!0}}},{key:"_handleItemTemplate",value:function(e){if(null!==e&&e){if("function"==typeof e)return e;var t=this;if(!("content"in document.createElement("template")))return t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()})),void(t.itemTemplate=null);if(null===(e=document.getElementById(e))||!("content"in e))return t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"itemTemplate"})),void(t.itemTemplate=null);var i=e.content,r=i.childNodes.length,n=/{{\w+}}/g,o=void 0,l=void 0;t._bindingDetails=[],t._template=e;for(var a=0;a<r;a++){for(l=[];o=n.exec(i.childNodes[a].innerHTML);)l.push(o[0]);l.length>0&&t._bindingDetails.push({childNodeIndex:a,bindingString:l})}return!0}}},{key:"_handleKeyStrokes",value:function(e){var t=this,i="radioButton"===t.selectionMode||"checkBox"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode,r=t._items;if(t.filterable&&t.$.filterInput.value.length>0&&(r=t._filteredItems),!t.disabled&&!t.readonly){switch(e){case"ArrowLeft":case"ArrowUp":t._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":t._handleArrowKeys(!1);break;case" ":if(t.selectedIndexes.length<1&&!t._focusedItem)return;var n=t._focusedItem?t._focusedItem:t._items[t.selectedIndexes[t.selectedIndexes.length-1]],o=function(e){e.selected&&"radioButton"!==t.selectionMode?t.unselect(e):t.select(e)};if("oneOrMany"===t.selectionMode)return void(n.selected&&t.selectedIndexes.length>1?o(n):n.selected||o(n));o(n);break;case"Home":if(0===r.length)return;i?t._focus(r[0]):(t._keysPressed.Shift||t.clearSelection(),t.select(r[0]),t._focus(r[0])),t.scrollTop=0;break;case"End":if(0===r.length)return;i?t._focus(r[r.length-1]):(t._keysPressed.Shift||t.clearSelection(),t.select(r[r.length-1]),t._focus(r[r.length-1])),t.scrollTop=t.scrollHeight;break;case"PageUp":t._pageUpKeyHandler(r);break;case"PageDown":t._pageDownKeyHandler(r)}t._recycle()}}},{key:"_horizontalScrollbarHandler",value:function(e){var t=this;e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollLeft=e.detail.value}},{key:"_unsort",value:function(){var e=this;e.isUpdating++;var t=function(e,t){var i=e.dataIndex,r=t.dataIndex;return i<r?-1:i>r?1:0};if(e.isVirtualized)if(e._groups.length>0){e._groups.sort(t);for(var i=[],r=0;r<e._groups.length;r++){var n,o=e._groups[r],l=(n=[]).concat.apply(n,babelHelpers.toConsumableArray(o.items));l.sort(t),i.push(o),i=i.concat(l)}e._items=i}else e._items.sort(t);else{if(e._groups.length>0){e._groups.sort(t);for(var a=[],s=0;s<e._groups.length;s++){var d,c=e._groups[s],u=(d=[]).concat.apply(d,babelHelpers.toConsumableArray(c.querySelectorAll("jqx-list-item")));u.sort(t),a=a.concat(u)}e._items=a}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}},{key:"_applySortOrder",value:function(){var e=this,t=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i.parentNode;r&&r.appendChild(i)}};t(e._items),t(e._groups)}},{key:"_sort",value:function(){var e=this;if(e._canSort){e.isUpdating++;var t=function(t,i){var r=t.label,n=i.label;if("asc"===e.sortDirection){if(r<n)return-1;if(r>n)return 1}else{if(r<n)return 1;if(r>n)return-1}return 0};if(e._groups.sort(t),e.isVirtualized)if(e._groups.length>0){for(var i=[],r=0;r<e._groups.length;r++){var n,o=e._groups[r],l=(n=[]).concat.apply(n,babelHelpers.toConsumableArray(o.items));i.push(o),l.sort(t),i=i.concat(l)}e._items=i}else e._items.sort(t);else{if(e._groups.length>0){for(var a=[],s=0;s<e._groups.length;s++){var d,c=e._groups[s],u=(d=[]).concat.apply(d,babelHelpers.toConsumableArray(c.querySelectorAll("jqx-list-item")));u.sort(t),a=a.concat(u)}e._items=a}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}}},{key:"getItem",value:function(e){for(var t=this,i=0;i<t._items.length;i++)if(t._items[i].value===e)return t._items[i];return null}},{key:"_focus",value:function(e){var t=this;!e||"none"===t.selectionMode||t.disabled||t.readonly||(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=e,t._focusedItem._focused=!0)}},{key:"_keyDownHandler",value:function(e){var t=this,i=t.enableShadowDOM?t.shadowRoot.activeElement:document.activeElement,r=e.key;if(!t.disabled&&!t.readonly&&(!t.filterable||t.$.filterInput!==i)&&t._focused&&0!==t._items.length&&!t.disabled&&!t.displayLoadingIndicator){if(t.editable){if("F2"===r)return void t._dblclickEventHandler({target:t._focusedItem});if(t.$.editInput===i)return}if("none"!==t.selectionMode){switch(e.stopPropagation(),r){case"Down":case"Right":case"Left":case"Up":r="Arrow"+r}if(t.filterable)switch(r){case"ArrowLeft":case"ArrowRight":return;case"ArrowUp":case"ArrowDown":e.preventDefault()}if(t._applyIncrementalSearch(r),!(["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","Home","End","PageUp","PageDown"].indexOf(r)<0)){if(e.preventDefault(),!t._focusedItem&&t._items.length>0)return void("one"===t.selectionMode||"oneOrMany"===t.selectionMode||"oneOrManyExtended"===t.selectionMode?t.select(t._items[0]):t._focus(t._items[0]));switch(t.selectionMode){case"one":if("Shift"===r||"Control"===r||" "===r)return;t._handleKeyStrokes(r);break;case"oneOrMany":case"zeroOrOne":case"zeroOrMany":case"radioButton":case"checkBox":if("Shift"===r||"Control"===r)return;t._handleKeyStrokes(r);break;case"oneOrManyExtended":if(" "===r)return;t._keysPressed[r]="keydown"===e.type,t._handleKeyStrokes(r)}}}}}},{key:"_keyUpHandler",value:function(e){var t=this,i=t.enableShadowDOM?t.shadowRoot.activeElement:document.activeElement;if(!t.editable||t.$.editInput!==i){if(t.filterable&&t.$.filterInput===i)return t._filterTimer&&clearTimeout(t._filterTimer),void(t._filterTimer=setTimeout(function(){var e=t.context;t.context=t,t._filterItems(),t.scrollTop=t.$.itemsContainer.scrollTop=0,t.scrollLeft=t.$.itemsContainer.scrollLeft=0,t.context=e},300));if(t._focused){if(t._focusedItem&&t._focusedItem.hidden&&t._filteredItems.length>0){var r=t._filteredItems[0];r.grouped&&t._filteredItems.length>1&&(r=t._filteredItems[1]),t._focus(r),t._recycle()}e.stopPropagation(),e.preventDefault(),t.disabled||["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","PageUp","PageDown"].indexOf(e.key)<0||(t._keysPressed[e.key]=!1)}}}},{key:"_mouseWheelHandler",value:function(e){var t=this;(t.computedHorizontalScrollBarVisibility||t.computedVerticalScrollBarVisibility)&&!t.disabled&&t.computedVerticalScrollBarVisibility&&(e.stopPropagation(),e.preventDefault(),t.scrollTo(t.scrollTop+t._getScrollCoefficient(e,t.offsetHeight)))}},{key:"_pageDownKeyHandler",value:function(e){var t=this;if(0!==e.length){var i=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];"checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._focusedItem&&(i=t._focusedItem);for(var r=void 0,n=t._indexOf(i),o=i.top+t.$.itemsContainer.offsetHeight-i.height,l=n;l<e.length;l++)if(e[l].top>=o){r=e[l];break}r||(r=e[e.length-1]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(r):r.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(r),t._focus(r)),(r.height+r.top>t.$.itemsContainer.scrollTop+t.$.itemsContainer.offsetHeight||r.top<t.$.itemsContainer.scrollTop)&&(t.scrollTop=r.top-t.$.itemsContainer.offsetHeight+r.height)}}},{key:"_pageUpKeyHandler",value:function(e){var t=this;if(0!==e.length){var i=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];"checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._focusedItem&&(i=t._focusedItem);for(var r=i.top-t.$.itemsContainer.offsetHeight,n=t._indexOf(i),o=void 0,l=n;l>0;l--)if(e[l].top<=r){o=e[l];break}o||(o=e[0]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(o):o.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(o),t._focus(o)),t.scrollTop=o.top;0===t._indexOf(o)&&(t.scrollTop=0)}}},{key:"clearItems",value:function(){var e=this;e.$.itemsInnerContainer.innerHTML="",e.clearSelection(),e._items=[],e.$placeholder.removeClass("jqx-hidden")}},{key:"_resizeHandler",value:function(e){var t=this;e.target!==t||t._isUpdatingScrollBars||(t._isUpdatingScrollBars=!0,t._initializeRecyclingItems(),t._refreshLayout(),t._isUpdatingScrollBars=!1)}},{key:"_indexOf",value:function(e){var t=this;if(!e)return-1;var i=t._items.indexOf(e);return-1===i&&(i=t._items.indexOf(t.getItem(e.value))),i}},{key:"_incrementalSearch",value:function(){var e=this,t="radioButton"!==e.selectionMode&&"checkBox"!==e.selectionMode&&"zeroOrMany"!==e.selectionMode&&"oneOrMany"!==e.selectionMode&&"zeroOrOne"!==e.selectionMode,i=void 0,r=0;switch(e.incrementalSearchMode){case"containsIgnoreCase":case"equalsIgnoreCase":case"startsWithIgnoreCase":case"endsWithIgnoreCase":i=e._incrementalSearchQuery.toLowerCase();break;default:i=e._incrementalSearchQuery}var n=function(i){i.grouped||i.readonly||(t?(e.selectedIndexes.length>0&&e.clearSelection(),e._focus(i),e.select(i)):e._focus(i),(i.height+i.top>e.$.itemsContainer.scrollTop+e.$.itemsContainer.offsetHeight||i.top<e.scrollTop)&&(e.scrollTop=i.top),0===e._indexOf(i)&&(e.scrollTop=0),e._indexOf(i)===e._items.length-1&&(e.scrollTop=e.scrollHeight))};0!==e._previousEntry.localeCompare(i)&&(e._incrementalSearchItems=e._queryItems(e._incrementalSearchQuery,e.incrementalSearchMode),delete e._itemPosition),e._previousEntry=i;var o=e._incrementalSearchItems.length;if(0!==o){if(1===o)return void n(e._incrementalSearchItems[0]);for(void 0!==e._itemPosition?e._itemPosition<o-1?r=e._itemPosition:(r=0,t?(e._incrementalSearchItems[e._itemPosition].selected=!1,e.selectedIndexes=[],e.selectedValues=[]):e._incrementalSearchItems[e._itemPosition]._focused=!1):t&&e.clearSelection(),r;r<o;r++)if(e._incrementalSearchItems[r].selected&&t)e._incrementalSearchItems[r].selected=!1,e.selectedIndexes=[],e.selectedValues=[];else{if(t||!e._incrementalSearchItems[r]._focused)return n(e._incrementalSearchItems[r]),void(e._itemPosition=r);e._incrementalSearchItems[r]._focused=!1}}}},{key:"_selectStartHandler",value:function(e){var t=this,i=t.enableShadowDOM?t.shadowRoot.activeElement:document.activeElement;t.$.filterInput!==i&&t.$.editInput!==i&&e.preventDefault()}},{key:"_handleArrowKeys",value:function(e){var t=this,i="radioButton"!==t.selectionMode&&"checkBox"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode;if(!t.disabled&&!t.readonly){var r=void 0;if(t._focusedItem&&!t._keysPressed.Shift)r=t._indexOf(t._focusedItem),t._focusedItem._focused=!1;else{if(0===t.selectedIndexes.length)return;r=t.selectedIndexes[t.selectedIndexes.length-1]}var n=e?t._getPreviousItem(r):t._getNextItem(r);t._focus(n),i&&(t._keysPressed.Shift?t.select(n):t._items[r]!==n&&(t.clearSelection(),t.select(n))),t.ensureVisible(n)}}},{key:"_refreshFilter",value:function(){var e=this;if(e.filterable)return e.$.filterInput.disabled=!(!e.disabled&&!e.displayLoadingIndicator),e.$filterInputContainer.removeClass("jqx-hidden"),void e.$itemsContainer.addClass("filter");e.$.filterInput.disabled=!0,e.$filterInputContainer.addClass("jqx-hidden"),e.$itemsContainer.removeClass("filter")}},{key:"_setFocusable",value:function(){var e=this;if(e.disabled||e.unfocusable)return void e.removeAttribute("tabindex");e.tabIndex=e.tabIndex>0?e.tabIndex:0}},{key:"_setLoadingIndicatorVisibility",value:function(){var e=this;if(e.displayLoadingIndicator)return void(e.$loadingIndicatorContainer.hasClass("jqx-visibility-hidden")?e.$loadingIndicatorContainer.removeClass("jqx-visibility-hidden"):e.$loadingIndicatorContainer.removeClass("jqx-hidden"));e._areCSSVarsSupported?e.$loadingIndicatorContainer.addClass("jqx-hidden"):e.$loadingIndicatorContainer.addClass("jqx-visibility-hidden")}},{key:"_refreshLayout",value:function(){var e=this,t=e._items;if(e.__scrollHeight=null,e.__scrollWidth=null,e._height=null,e._scrollView||(e._scrollView=new JQX.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.$itemsContainer.removeClass("hscroll"),e.$itemsContainer.removeClass("vscroll"),!t||null===t||0===t.length)return e.scrollWidth=0,e.scrollHeight=0,e.$filterInputContainer.removeClass("vscroll"),e.$placeholder.removeClass("jqx-hidden"),void(e.isVirtualized&&e._recycle());e.$placeholder.addClass("jqx-hidden");var i=2*(parseInt(getComputedStyle(e.$.itemsInnerContainer).getPropertyValue("--jqx-list-item-horizontal-offset"))||0),r=e._scrollWidth-e.$.itemsContainer.offsetWidth-i,n=e._scrollHeight;if(e._refreshHorizontalScrollBarVisibility(r),e._refreshVerticalScrollBarVisibility(n),"hidden"===e.horizontalScrollBarVisibility?e.$.itemsInnerContainer.style.width=e.$.itemsContainer.offsetWidth-i:e.$.itemsInnerContainer.style.width=Math.max(e.$.itemsContainer.offsetWidth-i,-i+e.__scrollWidth)+"px",e.computedVerticalScrollBarVisibility)return r=e._scrollWidth-e.$.itemsContainer.offsetWidth-e._scrollView.vScrollBar.offsetWidth,e._refreshHorizontalScrollBarVisibility(r),"hidden"!==e.horizontalScrollBarVisibility&&(e.$.itemsInnerContainer.style.width=Math.max(e.$.itemsContainer.offsetWidth-i,-i+e.__scrollWidth-e._scrollView.vScrollBar.offsetWidth)+"px"),e.computedHorizontalScrollBarVisibility&&("visible"!==e.horizontalScrollBarVisibility||0!==e.scrollWidth?e.__scrollHeight+=e._scrollView.hScrollBar.offsetHeight:"visible"===e.horizontalScrollBarVisibility&&(e.__scrollHeight+=e._scrollView.hScrollBar.offsetHeight),e.scrollHeight=e.__scrollHeight),void(e.isVirtualized&&e._recycle());r=e._scrollWidth-e.$.itemsContainer.offsetWidth-i,e._refreshHorizontalScrollBarVisibility(r),e.computedHorizontalScrollBarVisibility&&(e.scrollHeight=e._scrollHeight,e._refreshVerticalScrollBarVisibility(e.scrollHeight),e._scrollView.vScrollBar.$.hasClass("bottom-corner")&&e._scrollView.vScrollBar.refresh()),e.isVirtualized&&e._recycle();var o=/Trident|Edge/.test(navigator.userAgent);!e.isRefreshing&&o&&setTimeout(function(){e.isRefreshing=!0,e._refreshLayout(),e.isRefreshing=!1},50)}},{key:"_styleChangedHandler",value:function(){this._refreshLayout()}},{key:"_swipeLeftHandler",value:function(){}},{key:"_swipeRightHandler",value:function(){}},{key:"_refreshHorizontalScrollBarVisibility",value:function(e){var t=this;t.scrollWidth=e,t.computedHorizontalScrollBarVisibility?(t.scrollLeft=t.$.itemsContainer.scrollLeft,t.$itemsContainer.addClass("hscroll")):t.$itemsContainer.removeClass("hscroll")}},{key:"_refreshVerticalScrollBarVisibility",value:function(e){var t=this;t.scrollHeight=e,t.computedVerticalScrollBarVisibility?(t.$itemsContainer.addClass("vscroll"),t.$filterInputContainer.addClass("vscroll")):(t.$itemsContainer.removeClass("vscroll"),t.$filterInputContainer.removeClass("vscroll"))}},{key:"_validateTemplate",value:function(e,t){if(null!==t&&t){var i=this;return"content"in document.createElement("template")?(t=document.getElementById(t),null!==t&&"content"in t?t:(i.error(i.localize("invalidTemplate",{elementType:i.nodeName.toLowerCase(),property:e})),void(i[e]=null))):(i.error(i.localize("htmlTemplateNotSuported",{elementType:i.nodeName.toLowerCase()})),
void(i[e]=null))}}},{key:"_getItemIndexByPosition",value:function(e){var t=this,i=t.filterable&&t.$.filterInput.value.length>0?t._filteredItems:t._items;return function(i){var r=0,n=i.length-1;if(e<=0)return 0;if(i[i.length-1].top<=e)return i.length-1;for(;;){var o=Math.floor((r+n)/2),l=i[o];if(t._isItemInPosition(l,e))return o;l.top<e?r=o+1:l.top>e&&(n=o-1)}}(i)}},{key:"_isItemInPosition",value:function(e,t){var i=e.top,r=e.top+e.height;return i<=t&&r>t}},{key:"_recycle",value:function(){var e=this;if(e._recyclingItems){var t=e._height;e._height||(t=e._height=e.$.itemsContainer.offsetHeight);var i=0,r=e.scrollTop,n=e._getItemIndexByPosition(r),o=e.filterable&&e.$.filterInput.value.length>0?e._filteredItems:e._items,l=o[n],a=l?l.top:0;if(e.$.itemsInnerContainer.style.left=-e.scrollLeft+"px",e.$.itemsInnerContainer.style.top=-r+a+"px",e.isUpdating++,n>=0)for(var s=n;s<o.length;s++){var d=o[s];if(0!==d.height){if(!(a+d.height>=r&&a<=r+t))break;var c=e._recyclingItems[i++];if(!c)break;c.context=document,c.dataItem=d,c.label=d.label,c.value=d.value,c.selected=d.selected,c._focused=d._focused,c.hidden=d.hidden,c.grouped=d.grouped,c.readonly=d.readonly,c.style.height=d.height+"px",e._alternateItem(c),d.title?c.title=d.title:c.title="",d.grouped?c.displayMode="plain":c.displayMode=d.displayMode,e.scrollWidth>0&&(c.style.width=e.$.itemsInnerContainer.offsetWidth+e.scrollWidth+"px"),e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._applyTemplate(c,!1),a+=d.height}}if(i<e._recyclingItems.length)for(var u=i;u<e._recyclingItems.length;u++){var p=e._recyclingItems[i++],f=p.context;p.context=document,p.hidden=!0,p.context=f}e.isUpdating--}}},{key:"_verticalScrollbarHandler",value:function(e){var t=this,i=e.detail.value;if(e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollTop=i,t._updateTopVisibleIndex(),e.context.max===e.context.value)return void t.$.fireEvent("scrollBottomReached");e.context.min===e.context.value&&t.$.fireEvent("scrollTopReached")}},{key:"enableShadowDOM",get:function(){return JQX.EnableShadowDOM}},{key:"items",get:function(){var e=this;return e._filteredItems?e._filteredItems:e._items}},{key:"_scrollHeight",get:function(){var e=this,t=0;if(e.isVirtualized){if(e.__scrollHeight)return e.__scrollHeight;if(0===e._items.length)return 0;e.isUpdating++;var i=e._createItem(e.dataSource[0]);e.$.itemsInnerContainer.appendChild(i);for(var r=0;r<e._items.length;r++){var n=e._items[r];n.hidden?(n.height=0,n.top=t):(e.itemHeight?(e.itemHeight<32&&(e.itemHeight=32),n.height=e.itemHeight):(i.label=n.label,n.height=i.offsetHeight),n.top=t,t+=n.height)}e.$.itemsInnerContainer.removeChild(i),e.__scrollHeight=t-e.$.itemsInnerContainer.offsetHeight,e.filterable&&(e.__scrollHeight+=e.$.filterInput.offsetHeight),t=e.__scrollHeight,e.isUpdating--}else{for(var o=0;o<e._items.length;o++){var l=e._items[o];l.hidden?(l.height=0,l.top=t):(e.itemHeight?"auto"!==e.itemHeight&&(l.height=e.itemHeight,l.style.height=l.height+"px"):l.height=l.offsetHeight,l.top=l.offsetTop,t+=l.height)}t=e.$.itemsInnerContainer.scrollHeight-e.$.itemsInnerContainer.offsetHeight,e.filterable&&t>0&&(t+=e.$.filterInput.offsetHeight),e.__scrollHeight=t}return t}},{key:"_scrollWidth",get:function(){var e=this,t=this,i=t._items;return t.__scrollWidth?t.__scrollWidth:(t.__scrollWidth=function(){for(var t=e,r=void 0,n="",o=0;o<i.length;o++)if(!i[o].hidden){var l=i[o].label;l.length>n.length&&(n=l)}var a=t._createItem({label:n});t.$.itemsContainer.appendChild(a),a.label=n,a.style.width="auto",a.isCompleted&&(a.$.itemContainer.style.width="auto");var s=getComputedStyle(a),d=parseInt(s.paddingLeft)+parseInt(s.paddingRight);return r=(a.$.itemContainer||a).offsetWidth+d,a.parentNode.removeChild(a),r}(),t.__scrollWidth)}},{key:"isVirtualized",get:function(){var e=this;return e.virtualized&&e.dataSource&&e.dataSource.length>0}}],[{key:"properties",get:function(){return{allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},autoSort:{value:!0,type:"boolean"},dataSource:{value:null,type:"any?",reflectToAttribute:!1},dragFeedbackFormatFunction:{value:null,type:"function?"},dragOffset:{value:[10,10],type:"array"},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},shadowDomMode:{allowedValues:["light","shadow"],value:"shadow",type:"string"},dropAction:{value:"move",type:"string",allowedValues:["copy","move","none"]},editable:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterCallback:{value:null,type:"function?"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},filterInputPlaceholder:{value:"",type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{overridingProperties:'{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The "{{property1}}" property is used by default.',invalidIndex:'{{elementType}}: "{{method}}" method accepts an index of type number or an Array of numbers.',indexOutOfBound:'{{elementType}}: Out of bound index/indexes in "{{method}}" method.',invalidItem:'{{elementType}}: "{{method}}" method accepts an object or an array of objects as it\'s second parameter.',invalidSettings:'{{elementType}}: "{{method}}" method accepts a string or an object as it\'s second parameter.'}},type:"object"},name:{value:"",type:"string"},placeholder:{value:"No Items",type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},selectionMode:{value:"oneOrManyExtended",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},selectionChangeAction:{value:"release",allowedValues:["press","release"],type:"string"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},topVisibleIndex:{value:-1,type:"int"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}},{key:"requires",get:function(){return{"JQX.ScrollBar":"jqxscrollbar.js"}}},{key:"styleUrls",get:function(){return["jqx.listbox.css"]}},{key:"listeners",get:function(){return{focus:"_focusHandler",blur:"_blurHandler","container.wheel":"_mouseWheelHandler","editInput.change":"_editInputEventHandler","editInput.blur":"_editInputEventHandler","editInput.keydown":"_editInputEventHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","itemsInnerContainer.down":"_downHandler","itemsInnerContainer.dblclick":"_dblclickEventHandler","itemsInnerContainer.move":"_itemsContainerMoveHandler","itemsContainer.mouseleave":"_mouseLeaveHandler","document.up":"_upHandler","document.move":"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}}]),t}(JQX.ScrollViewer));
//# sourceMappingURL=jqxlistbox.js.map
