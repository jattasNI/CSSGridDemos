"use strict";JQX("jqx-menu-item",function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"template",value:function(){return""}},{key:"ready",value:function(){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),this.$.addClass("jqx-unselectable")}},{key:"propertyChangedHandler",value:function(e,t,o){var i=this;if("disabled"===e&&!1!==o&&i.checked){var a=i.menu;if(a){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"propertyChangedHandler",this).call(this,e,t,o),i.checked=!1;var r=i.parentItem;"radioButton"===(r?r.checkMode:a.checkMode)&&a._validateRadioButtonSelection(r,i.level,[])}}}},{key:"enableShadowDOM",get:function(){return!1}}],[{key:"properties",get:function(){return{checked:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},shortcut:{value:"",type:"string"},value:{value:null,type:"any"}}}}]),n}(JQX.BaseElement)),JQX("jqx-menu-items-group",function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"template",value:function(){return""}},{key:"ready",value:function(){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),this.$.addClass("jqx-unselectable")}},{key:"propertyChangedHandler",value:function(e,t,o){if(-1!==["checkable","checkMode","disabled"].indexOf(e)){var i=this,a=i.menu;if(a)switch(babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"propertyChangedHandler",this).call(this,e,t,o),e){case"checkable":o?i.itemContainer.setAttribute("checkable",""):i.itemContainer.removeAttribute("checkable"),a._isContainerOpened(i.container.level,i.container)&&"tree"!==a.mode&&!a._minimized&&a._closeSubContainers(i.level+2);break;case"checkMode":i.itemContainer.setAttribute("check-mode",o),a._changeToRadioButtonMode(o,i.itemContainer,i);break;case"disabled":if(JQX.ListMenu&&a instanceof JQX.ListMenu){if(a._view)for(;i.contains(a._view);)a._backButtonClickHandler()}else a._isContainerOpened(i.container.level,i.container)&&a._closeSubContainers(i.level+1,i.container);if(!i.checked)return;i.checked=!1;var r=i.parentItem;"radioButton"===(r?r.checkMode:a.checkMode)&&a._validateRadioButtonSelection(r,i.level,[])}}}},{key:"enableShadowDOM",get:function(){return!1}}],[{key:"properties",get:function(){return{checkable:{value:!1,type:"boolean"},checked:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},dropDownHeight:{value:null,type:"number?"},expanded:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},value:{value:null,type:"any"}}}}]),n}(JQX.BaseElement)),JQX("jqx-menu",function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"template",value:function(){return'<div id="container">\n                    <div id="minimizedHeader" class ="jqx-header jqx-minimized-header jqx-hidden">\n                        <div id="hamburgerIcon" class ="jqx-hamburger-icon jqx-hidden">\n                            <div id="hamburgerIconLineTop" class ="jqx-hamburger-icon-line jqx-hamburger-icon-line-top"></div>\n                            <div id="hamburgerIconLineCenter" class ="jqx-hamburger-icon-line jqx-hamburger-icon-line-center"></div>\n                            <div id="hamburgerIconLineBottom" class ="jqx-hamburger-icon-line jqx-hamburger-icon-line-bottom"></div>\n                            <div id="customIconContainer" class ="jqx-hamburger-icon-custom-container jqx-hidden"></div>\n                        </div>\n                    </div>\n                    <jqx-repeat-button id="scrollButtonNear" class="jqx-menu-scroll-button jqx-spin-button jqx-scroll-button-near jqx-hidden" animation="[[animation]]" unfocusable>\n                        <div id="arrowNear" class="jqx-arrow"></div>\n                    </jqx-repeat-button>\n                    <div id="mainContainer" class="jqx-menu-main-container">\n                        <content></content>\n                    </div>\n                    <jqx-repeat-button id="scrollButtonFar" class="jqx-menu-scroll-button jqx-spin-button jqx-scroll-button-far jqx-hidden" animation="[[animation]]" unfocusable>\n                        <div id="arrowFar" class="jqx-arrow"></div>\n                    </jqx-repeat-button>\n                </div>'}},{key:"attached",value:function(){var e=this;if(babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"attached",this).call(this),!("tree"===e._element||JQX.ListMenu&&e instanceof JQX.ListMenu)&&e.isCompleted&&null!==e.dropDownAppendTo){if(e._minimized)e._dropDownParent.appendChild(e.$.mainContainer);else for(var t=0;t<e._containersInBody.length;t++)e._dropDownParent.appendChild(e._containersInBody[t]);"dropDown"===e.mode&&(e._dropDownParent===e.parentElement?e._dynamicallyReparented?delete e._dynamicallyReparented:e._positionRelativeTo=null:(e._positionRelativeTo=e.parentElement,e._dynamicallyReparented=!0,setTimeout(function(){e._dropDownParent.appendChild(e)},0)))}}},{key:"detached",value:function(){var e=this;babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"detached",this).call(this),"tree"===e._element||JQX.ListMenu&&e instanceof JQX.ListMenu||(e._close(),null!==e.dropDownAppendTo&&(e._minimized?e._dropDownParent.removeChild(e.$.mainContainer):e._removeContainersInBody()))}},{key:"ready",value:function(){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this);var e=this;e._element="menu",e._edgeMacFF=JQX.Utilities.Core.Browser.Edge||JQX.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e._containers=[],e._containersInBody=[],e._openedContainers=[],e._containersFixedHeight=[],e._menuItemsGroupsToExpand=[],e._additionalScrollButtons=[],e._createElement()}},{key:"addItem",value:function(e,n){var t=this;if(e instanceof JQX.MenuItem||e instanceof JQX.MenuItemsGroup){var o=void 0,i=void 0;if(void 0===n)n=t.$.mainContainer,o=1,i=n;else{if((n=t.getItem(n))instanceof JQX.MenuItemsGroup==!1)return;o=n.level+1,i=n.itemContainer}if(t._createItemHTMLStructure(e,o,n,i.childElementCount,0),e instanceof JQX.MenuItemsGroup&&(t._processHTML(e,o+1),t._checkContainersLength()),i.appendChild(e),t._checkOverflowAddRemove(e.level,i),e instanceof JQX.MenuItemsGroup&&("tree"===t.mode||t._minimized)){for(var a=e.getElementsByClassName("jqx-menu-items-group-arrow"),r=0;r<a.length;r++)a[r].className="jqx-menu-items-group-arrow down jqx-arrow-down";t._expandItemsByDefault()}}}},{key:"checkItem",value:function(e){var n=this;void 0===(e=n.getItem(e))||e.checked||e.disabled||e.templateApplied||n._toggleItem(e)}},{key:"clear",value:function(){var e=this;e.$.mainContainer.innerHTML="",e._removeContainersInBody(),e._menuItems={},e._containers=[],e._containersInBody=[],e._openedContainers=[],e._containersFixedHeight=[],e._menuItemsGroupsToExpand=[],e._additionalScrollButtons=[]}},{key:"close",value:function(){var e=this;if(!("dropDown"!==e.mode||!1===e.opened&&e.$.hasClass("jqx-visibility-hidden"))){e.$.fireEvent("closing",arguments[0]||{trigger:"programmatic"}).defaultPrevented?e.opened=!0:(e.opened=!1,e.$.addClass("jqx-visibility-hidden"),e._close(),e.$.fireEvent("close"))}}},{key:"collapseItem",value:function(e,n){var t=this,o=t.animation,i=!1===n&&t.hasAnimation;if(void 0===e)return i&&(t.animation="none"),t._close(),void(i&&setTimeout(function(){t.animation=o},0));if(!(void 0===(e=t.getItem(e))||e instanceof JQX.MenuItem)){var a=e.level;if(t._openedContainers[a+1]&&t._isContainerOpened(a+1,e.container)){var r=t.mode;i&&(t.animation="none"),t._closeSubContainers(a+1,e.container,void 0,!1!==arguments[2]),1!==a&&"tree"!==r||t._checkOverflow(t.$.mainContainer,"horizontal"===r,[t.$.scrollButtonNear,t.$.scrollButtonFar]),i&&(t.animation=o)}}}},{key:"expandItem",value:function(e,n){var t=this;if(!(void 0===(e=t.getItem(e))||e instanceof JQX.MenuItemsGroup&&t._isContainerOpened(e.level+1,e.container)&&t._isBranchExpanded(e))){var o=[e],i=t.animation,a=!1===n&&t.hasAnimation,r=e.parentItem;for(a&&(t.animation="none"),t._discardKeyboardHover();r;)o.unshift(r),r=r.parentItem;for(var l=0;l<o.length;l++){var s=o[l];if(l===o.length-1&&s instanceof JQX.MenuItem){s.disabled||s.templateApplied||t._hoverViaKeyboard(s);break}t._isContainerOpened(s.container.level,s.container)||t._menuItemsGroupSelectionHandler(s,{target:s,type:"expand",isTrusted:!0},arguments[2])}a&&(t.animation=i)}}},{key:"getItem",value:function(e){var n=this,t=void 0;if("string"==typeof e){if(null===(t=n.shadowRoot?n.shadowRoot.getElementById(e):document.getElementById(e)))return n._menuItems[e]}else{if(!isNaN(e))return n._menuItems[e.toString()];t=e}if((t instanceof JQX.MenuItem||t instanceof JQX.MenuItemsGroup)&&(n.contains(t)||n.$.mainContainer.contains(t)||t.parentElement.parentElement.ownerElement===n))return t}},{key:"maximize",value:function(){var e=this;if(e._minimized){var n=e.animation;if(e.$.mainContainer.style.marginTop="",e.$.mainContainer.style.marginLeft="",e.enableShadowDOM&&!e.$.mainContainer.id&&(e.$.mainContainer.id=e.$.mainContainer.getAttribute("jqx-id")),"none"!==n&&(e.animation="none"),e._positionDetection.removeOverlay(),e._closeSubContainers(2),e.$minimizedHeader.addClass("jqx-hidden"),e._minimized=!1,e._minimizedDropDownOpened&&(e.$hamburgerIcon.removeClass("jqx-close-button"),e._minimizedDropDownOpened=!1),null!==e.dropDownAppendTo&&e._appendMinimizedContainerToMenu(e.$.mainContainer,e.$.scrollButtonFar),"tree"!==e.mode){e.$mainContainer.addClass("jqx-menu-main-container"),e.$mainContainer.removeClass("jqx-menu-minimized-items-container");for(var t=e.getElementsByClassName("jqx-menu-items-group-arrow"),o=0;o<t.length;o++)e._setArrowDirection(t[o],t[o].parentElement.parentElement.level+1);null!==e.dropDownAppendTo&&e._moveDropDownsToExternalContainer(),e._applyContainerFixedHeight()}e.$mainContainer.removeClass("jqx-visibility-hidden"),e.$hamburgerIcon.addClass("jqx-hidden"),e.removeAttribute("minimized"),e._checkOverflow(e.$.mainContainer,"horizontal"===e.mode,[e.$.scrollButtonNear,e.$.scrollButtonFar]),"none"!==n&&setTimeout(function(){e.animation=n},0)}}},{key:"minimize",value:function(){var e=this;if(!e._minimized&&"dropDown"!==e.mode){e.$minimizedHeader.removeClass("jqx-hidden");var n=null!==e.dropDownAppendTo,t=e.animation,o=e.hasAnimation;if(o&&(e.animation="none"),e._positionDetection.removeOverlay(),e._closeSubContainers(2),o&&n&&(e.animation=t),"tree"!==e.mode&&(n&&e._moveDropDownsToMenu(),e._removeContainerFixedHeight()),e._hideMainContainerScrollButtons(),e.$mainContainer.removeClass("jqx-menu-main-container"),e.$mainContainer.addClass("jqx-visibility-hidden"),e.enableShadowDOM&&e.$.mainContainer.removeAttribute("id"),e._edgeMacFF&&(e.$.mainContainer.style.left="",e.$.mainContainer.style.top="",e.$mainContainer.addClass("not-in-view")),e.$hamburgerIcon.removeClass("jqx-hidden"),n&&e._appendMinimizedContainerToExternalElement(e.$.mainContainer),setTimeout(function(){e.$mainContainer.addClass("jqx-menu-minimized-items-container"),o&&!n&&(e.animation=t)},0),e._minimized=!0,e.setAttribute("minimized",""),"tree"!==e.mode)for(var i=e.$.mainContainer.getElementsByClassName("jqx-menu-items-group-arrow"),a=0;a<i.length;a++)e._setArrowDirection(i[a],i[a].parentElement.parentElement.level+1)}}},{key:"open",value:function(e,n){var t=this;if("dropDown"===t.mode){if(t.$.fireEvent("opening").defaultPrevented)return void(t.opened=!1);var o=void 0;if(t.opened=!0,t._positionRelativeTo){var i=t._positionRelativeTo.getBoundingClientRect();e+=i.left,n+=i.top,t._positionedParent?(o=t._positionedParent.getBoundingClientRect(),e-=o.left,n-=o.top):(e+=window.pageXOffset,n+=window.pageYOffset)}var a=e+t.offsetWidth-document.documentElement.clientWidth,r=n+t.offsetHeight-document.documentElement.clientHeight;o?(a+=o.left,r+=o.top):(a-=window.pageXOffset,r-=window.pageYOffset),a>0?e-=a:e=o?Math.max(e,-o.left):Math.max(e,window.pageXOffset),r>0?n-=r:n=o?Math.max(n,-o.top):Math.max(n,window.pageYOffset),isNaN(e)||(t.style.left=e+"px"),isNaN(n)||(t.style.top=n+"px"),t.$.removeClass("jqx-visibility-hidden"),t.$.fireEvent("open"),t.hasAnimation||t._noAutoFocus||t.focus()}}},{key:"removeItem",value:function(e){var n=this;if(void 0!==(e=n.getItem(e))){var t=e.parentElement;if(e instanceof JQX.MenuItemsGroup){var o=e.container;if(n._isContainerOpened(o.level,o)&&n._closeSubContainers(o.level,o),1===e.level){var i=n._containersInBody.indexOf(o);-1!==i&&(n._containersInBody.splice(i,1),null===n.dropDownAppendTo||"tree"===n.mode||n._minimized||n._dropDownParent.removeChild(o))}}t.removeChild(e),n._refreshContainersArrays(),n._menuItems={},n._refreshItemPaths(n.$.mainContainer,!0),n._checkOverflowAddRemove(e.level,t)}}},{key:"uncheckItem",value:function(e){var n=this;void 0===(e=n.getItem(e))||!e.checked||e.disabled||e.templateApplied||n._toggleItem(e)}},{key:"propertyChangedHandler",value:function(e,t,o){function i(){null===r.dropDownAppendTo&&"tree"!==r.mode||r._checkOverflow(r.$.mainContainer,"horizontal"===r.mode,[r.$.scrollButtonNear,r.$.scrollButtonFar])}function a(e,n,t){t?n.setAttribute(e,""):n.removeAttribute(e)}babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"propertyChangedHandler",this).call(this,e,t,o);var r=this;switch(e){case"animation":r.$.mainContainer.setAttribute("animation",o),r._additionalScrollButtons.forEach(function(e){e[0].animation=o,e[1].animation=o}),null!==r._dropDownParent&&r._containers.forEach(function(e){e.setAttribute("animation",o)});break;case"checkable":"tree"===r.mode||r._minimized?r._minimized&&null!==r.dropDownAppendTo&&a("checkable",r.$.mainContainer,o):r._closeSubContainers(2);break;case"checkboxes":if(r._close(),null!==r.dropDownAppendTo){for(var l=0;l<r._containers.length;l++){a("checkboxes",r._containers[l],o)}r._minimized&&a("checkboxes",r.$.mainContainer,o)}break;case"checkMode":r._changeToRadioButtonMode(o,r.$.mainContainer),r._minimized&&null!==r.dropDownAppendTo&&r.$.mainContainer.setAttribute("check-mode",o);break;case"dataSource":var s=!1;r._minimized&&(r.maximize(),s=!0),r._removeContainersInBody(),r._containersInBody=[],r._menuItems={},r._processDataSource(),r._checkContainersLength(),s?r.minimize():i(),r._expandItemsByDefault(),r._suppressResizeHandler=!0,setTimeout(function(){return delete r._suppressResizeHandler},500);break;case"dropDownAppendTo":var d=r._dropDownParent;if(r._positionDetection.getDropDownParent(),r._dropDownParent===d||"tree"===r.mode&&!r._minimized)return;if(r._close(),r._minimized)return void(null===o?r._appendMinimizedContainerToMenu(r.$.mainContainer,r.$.scrollButtonFar):r._appendMinimizedContainerToExternalElement(r.$.mainContainer));if(null!==r._dropDownParent&&null===d)r._moveDropDownsToExternalContainer();else if(null===r._dropDownParent&&null!==d)r._moveDropDownsToMenu();else if(null!==r._dropDownParent&&null!==d)for(var c=0;c<r._containersInBody.length;c++)r._dropDownParent.appendChild(r._containersInBody[c]);null!==o||r.$mainContainer.hasClass("simple")?r._checkOverflow(r.$.mainContainer,"horizontal"===r.mode,[r.$.scrollButtonNear,r.$.scrollButtonFar]):r._hideMainContainerScrollButtons();for(var u=0;u<r._containersFixedHeight.length;u++)r._containersFixedHeight[u].itemContainer.checkOverflow=!0;"dropDown"===r.mode&&(r.close({trigger:"internal"}),r._reparentMenu(!0,d));break;case"dropDownOverlay":o||r._positionDetection.removeOverlay();break;case"disabled":o&&r._close(),r._setFocusable(),r.$.scrollButtonNear.disabled=o,r.$.scrollButtonFar.disabled=o,o||null===r.dropDownAppendTo&&!r.$mainContainer.hasClass("simple")&&"tree"!==r.mode||r._updateScrollButtonVisibility(r.$.mainContainer,"horizontal"===r.mode,[r.$.scrollButtonNear,r.$.scrollButtonFar]);break;case"dropDownPosition":case"mode":if("mode"===e){if(delete r._dynamicallyReparented,"tree"===t||r._minimized?(r._closeSubContainersTreeMode(2,void 0,void 0,void 0,!0),r._openedContainers=[]):r._closeSubContainersDefaultMode(2),r._discardKeyboardHover(!0),r._minimized&&r._minimizedDropDownOpened&&(r.$mainContainer.addClass("jqx-visibility-hidden"),r.$hamburgerIcon.removeClass("jqx-close-button"),r._minimizedDropDownOpened=!1),"horizontal"!==o&&"horizontal"!==t||r._changeScrollButtonsArrows(),r._minimized)return void("dropDown"===o&&(r.mode=t));!1===r.opened&&("dropDown"===o?r.$.addClass("jqx-visibility-hidden"):"dropDown"===t&&r.$.removeClass("jqx-visibility-hidden")),"tree"===t?(null!==r.dropDownAppendTo&&r._moveDropDownsToExternalContainer(),r.$mainContainer.addClass("jqx-menu-main-container"),r.$mainContainer.removeClass("jqx-menu-minimized-items-container"),r._applyContainerFixedHeight()):"tree"===o&&(null!==r.dropDownAppendTo&&r._moveDropDownsToMenu(),r._applyTreeMode()),"auto"===r.overflow&&r._hideMainContainerScrollButtons(),i()}if("tree"===r.mode||r._minimized)return r._minimizedDropDownOpened&&r._close(),void(r._minimized&&null!==r.dropDownAppendTo&&r.$.mainContainer.setAttribute(r.properties[e].attributeName,o));"dropDownPosition"===e&&r._close();for(var m=r.enableShadowDOM?r.shadowRoot.querySelectorAll("jqx-menu-items-group"):r.getElementsByTagName("jqx-menu-items-group"),p=0;p<m.length;p++){var v=m[p];r._setArrowDirection(v.children[0].children[1],v.level+1)}if(null!==r.dropDownAppendTo)for(var h=0;h<r._containers.length;h++){var f=r._containers[h];f.setAttribute(JQX.Utilities.Core.toDash(e),o),f.level>2&&r._setArrowDirection(f.menuItemsGroup.children[0].children[1],f.level)}break;case"minimizeIconTemplate":r._applyMinimizeIconTemplate(o,t);break;case"minimizeWidth":r._resizeHandler();break;case"opened":o?r.open():r.close({trigger:"internal"});break;case"overflow":r._handleOverflowChange();break;case"theme":if(null===r.dropDownAppendTo||JQX.ListMenu&&r instanceof JQX.ListMenu)return;if(r._minimized)""!==t&&r.$mainContainer.removeClass(t),""!==o&&r.$mainContainer.addClass(o);else for(var _=0;_<r._containers.length;_++){var b=r._containers[_];""!==t&&b.classList.remove(t),""!==o&&b.classList.add(o)}break;case"unfocusable":r._setFocusable()}}},{key:"_addOpenedContainer",value:function(e,n){var t=this;if("tree"===t.mode||t._minimized){t._openedContainers[e]||(t._openedContainers[e]=[]);var o=n.menuItemsGroup;return o.set("expanded",!0),t._updateState&&t._updateState("expanded",o.id,!0),t._openedContainers[e].push(n)}t._openedContainers[e]=n}},{key:"_appendMinimizedContainerToExternalElement",value:function(e){var n=this;e.ownerElement=n,n._dropDownParent.appendChild(e),e.setAttribute("animation",n.animation),""!==n.theme&&e.$.addClass(n.theme),e.$.addClass("jqx-menu-drop-down jqx-drop-down"),e.$.addClass("jqx-drop-down-repositioned"),e.setAttribute("check-mode",n.checkMode),e.setAttribute("drop-down-position",n.dropDownPosition),e.setAttribute("mode",n.mode),e.setAttribute("loading-indicator-position",n.loadingIndicatorPosition),n.checkable&&e.setAttribute("checkable",""),n.checkboxes&&e.setAttribute("checkboxes",""),n.$.view&&n.detachedChildren.indexOf(n.$.view)&&n.detachedChildren.push(n.$.view)}},{key:"_appendMinimizedContainerToMenu",value:function(e,n){var t=this;delete e.ownerElement,t.$.container.insertBefore(e,n),e.removeAttribute("animation"),""!==t.theme&&e.$.removeClass(t.theme),e.$.removeClass("jqx-menu-drop-down jqx-drop-down"),e.$.removeClass("jqx-drop-down-repositioned"),e.removeAttribute("checkable"),e.removeAttribute("checkboxes"),e.removeAttribute("check-mode"),e.removeAttribute("drop-down-position"),e.removeAttribute("mode"),e.removeAttribute("loading-indicator-position"),e.removeAttribute("style")}},{key:"_applyContainerFixedHeight",value:function(){for(var e=this,n=0;n<e._containers.length;n++){var t=e._containers[n];-1!==e._containersFixedHeight.indexOf(t)?(t.style.height=t.menuItemsGroup.dropDownHeight+"px",t.itemContainer.checkOverflow=!0):t.style.height=""}}},{key:"_applyGrouping",value:function(e,n){var t=this,o=void 0;o=e===t.$.mainContainer?Array.from(e.children):Array.from(e.container.firstElementChild.children);for(var i=0;i<o.length;i++){var a=o[i];a.originalIndex=i,a instanceof JQX.MenuItemsGroup&&void 0===n&&t._applyGrouping(a)}t._sortItems(e)}},{key:"_applyMinimizeIconTemplate",value:function(e,n){var t=this;if(null===e){if(null===n)return;t.$customIconContainer.addClass("jqx-hidden"),t.$.customIconContainer.innerHTML="",t.$hamburgerIconLineTop.removeClass("jqx-hidden"),t.$hamburgerIconLineCenter.removeClass("jqx-hidden"),t.$hamburgerIconLineBottom.removeClass("jqx-hidden")}else{var o=document.getElementById(e);if(null!==o&&"template"===o.tagName.toLowerCase()){var i=document.importNode(o.content,!0);t.$hamburgerIconLineTop.addClass("jqx-hidden"),t.$hamburgerIconLineCenter.addClass("jqx-hidden"),t.$hamburgerIconLineBottom.addClass("jqx-hidden"),t.$.customIconContainer.innerHTML="",t.$.customIconContainer.appendChild(i),t.$customIconContainer.removeClass("jqx-hidden")}else t.minimizeIconTemplate=n}}},{key:"_applyTreeMode",value:function(){var e=this,n=e.getElementsByClassName("jqx-menu-items-group-arrow");if(e.$mainContainer.removeClass("jqx-menu-main-container"),e.$mainContainer.addClass("jqx-menu-minimized-items-container"),e.isCompleted)for(var t=0;t<n.length;t++)n[t].className="jqx-menu-items-group-arrow down";e._removeContainerFixedHeight()}},{key:"_arrowLeftHandler",value:function(e,n,t,o){var i=this;1===e?"horizontal"===n&&i._levelOneNavigate("_getLastEnabledChild",t,o):2===e?i._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",t):i._escapeHandler(t,e,o)}},{key:"_arrowRightHandler",value:function(e,n,t,o){var i=this;1===e?"horizontal"===n?i._levelOneNavigate("_getFirstEnabledChild",t,o):i._levelOneOpenDropDown(t):t instanceof JQX.MenuItemsGroup?i._selectionHandler({target:t,isTrusted:!0}):i._levelOneNavigateFromLowerLevel("_getNextEnabledChild",t)}},{key:"_browserBoundsDetection",value:function(e){var n=this;if(("tree"!==n.mode||n._minimized)&&(e.style.marginTop="",e.style.marginLeft="","auto"===n.dropDownPosition)){var t=1===window.devicePixelRatio?document.documentElement.clientWidth:window.innerWidth,o=1===window.devicePixelRatio?document.documentElement.clientHeight:window.innerHeight,i=e.getBoundingClientRect(),a=t-i.left-e.offsetWidth,r=o-i.top-e.offsetHeight;a<10&&(e.style.marginLeft=Math.min(a-10,-10)+"px"),r<10&&(e.style.marginTop=Math.min(r-10,-10)+"px")}}},{key:"_changeScrollButtonsArrows",value:function(){var e=this;"horizontal"===e.mode?(e.$arrowNear.removeClass("jqx-arrow-up"),e.$arrowNear.addClass("jqx-arrow-left"),e.$arrowFar.removeClass("jqx-arrow-down"),e.$arrowFar.addClass("jqx-arrow-right")):(e.$arrowNear.removeClass("jqx-arrow-left"),e.$arrowNear.addClass("jqx-arrow-up"),e.$arrowFar.removeClass("jqx-arrow-right"),e.$arrowFar.addClass("jqx-arrow-down"))}},{key:"_changeToRadioButtonMode",value:function(e,n,t){if("radioButton"===e){for(var o=[],i=0;i<n.childElementCount;i++){var a=n.children[i];!a.checked||a.disabled||a.templateApplied||o.push(a)}this._validateRadioButtonSelection(t,t?t.level+1:1,o)}}},{key:"_checkContainersLength",value:function(e){var n=this;0===n._containers.length?(n.$mainContainer.addClass("simple"),e||n._checkOverflow(n.$.mainContainer,"horizontal"===n.mode,[n.$.scrollButtonNear,n.$.scrollButtonFar])):e||(n.$mainContainer.removeClass("simple"),null===n.dropDownAppendTo&&"tree"!==n.mode&&n.$mainContainer.removeClass("scroll-buttons-shown one-button-shown"))}},{key:"_checkOverflow",value:function(e,n,t){var o=this,i=e===o.$.mainContainer?o.overflow:"auto";if(!o._minimized&&"hidden"!==i&&(null!==o.dropDownAppendTo||"tree"===o.mode||e!==o.$.mainContainer||o.$mainContainer.hasClass("simple"))){var a=e.scrollTop;"auto"===i&&(e.classList.remove("scroll-buttons-shown"),e.classList.remove("one-button-shown"),t[0].$.addClass("jqx-hidden"),t[1].$.addClass("jqx-hidden"));var r=void 0,l=void 0,s=void 0;n?(r=Math.round(e.scrollWidth)>Math.round(e.offsetWidth),l=Math.round(e.scrollLeft)>0,s=Math.round(e.offsetWidth+e.scrollLeft)<Math.round(e.scrollWidth)):(r=Math.round(e.scrollHeight)>Math.round(e.offsetHeight),l=Math.round(e.scrollTop)>0,s=Math.round(e.offsetHeight+e.scrollTop)<Math.round(e.scrollHeight)),r?"auto"===i?(e.classList.add("scroll-buttons-shown"),l&&t[0].$.removeClass("jqx-hidden"),s&&t[1].$.removeClass("jqx-hidden"),!1===(l&&s)&&e.classList.add("one-button-shown"),o.disabled||(t[0].disabled=!1,t[1].disabled=!1),e.scrollTop=a):(t[0].$.removeClass("jqx-hidden"),t[1].$.removeClass("jqx-hidden"),o.disabled?(t[0].disabled=!0,t[1].disabled=!0):(t[0].disabled=!l,t[1].disabled=!s)):"scroll"===i&&(t[0].disabled=!0,t[1].disabled=!0),e===o.$.mainContainer&&"tree"!==o.mode&&o._close()}}},{key:"_checkOverflowAddRemove",value:function(e,n){var t=this;1===e&&null!==t.dropDownAppendTo||"tree"===t.mode?t._checkOverflow(t.$.mainContainer,"horizontal"===t.mode,[t.$.scrollButtonNear,t.$.scrollButtonFar]):e>1&&n.dropDownHeightSet&&(t._isContainerOpened(e,n.container)?t._checkOverflow(n,!1,[n.container.children[0],n.container.children[2]]):n.checkOverflow=!0)}},{key:"_close",value:function(){var e=this;e._positionDetection.removeOverlay(),e._closeSubContainers(2),e._discardKeyboardHover(!0),e._minimized&&e._minimizedDropDownOpened&&(e.$mainContainer.addClass("jqx-visibility-hidden"),e._edgeMacFF&&(e.$.mainContainer.style.left="",e.$.mainContainer.style.top="",e.$mainContainer.addClass("not-in-view")),e.$hamburgerIcon.removeClass("jqx-close-button"),e._minimizedDropDownOpened=!1)}},{key:"_closeSubContainers",value:function(e,n,t,o){var i=this;"tree"===i.mode||i._minimized?i._closeSubContainersTreeMode(e,n,t,o):i._closeSubContainersDefaultMode(e,n,t)}},{key:"_closeSubContainersDefaultMode",value:function(e,n,t){for(var o=this,i=o._openedContainers,a=i.length-1;a>=e;a--)void 0!==i[a]&&function(n){var a=i[n].menuItemsGroup;t&&n===e||(a.$.removeClass("focus"),a.removeAttribute("focus"),a.$.removeClass("hover"),a.removeAttribute("hover")),a.$.removeClass("jqx-menu-items-group-opened"),i[n].$.addClass("jqx-visibility-hidden"),o._edgeMacFF&&2===n&&!o.hasAnimation&&(i[n].style.left="",i[n].style.top="",i[n].$.addClass("not-in-view")),o._minimized&&o._browserBoundsDetection(o.$.mainContainer),o.$.fireEvent("collapse",{item:a,label:a.label,path:a.path,value:a.value,children:a.itemContainer.children}),i[n]=void 0}(a)}},{key:"_closeSubContainersTreeMode",value:function(e,n,t,o,i){var a=this;if(o){var r=n.menuItemsGroup;if(a.$.fireEvent("collapsing",{item:r,label:r.label,path:r.path,value:r.value,children:n.itemContainer.children}).defaultPrevented)return}if(void 0===n)return void a._collapseAll(!1,i);var l=n.menuItemsGroup;if(l.set("expanded",!1),"menu"===a._element)if(t){var s=a.$.mainContainer.getElementsByClassName("focus")[0];s&&(s.$.removeClass("focus"),s.removeAttribute("focus")),l.$.addClass("focus"),l.setAttribute("focus",""),a._focusedViaKeyboard=l}else l.$.removeClass("focus"),l.removeAttribute("focus");else a._updateState("expanded",l.id,!1);if(l.$.removeClass("jqx-"+a._element+"-items-group-opened"),i||!a.hasAnimation?(l.$.removeClass("jqx-"+a._element+"-items-group-expanded"),n.$.addClass("jqx-visibility-hidden"),a._minimized&&a._browserBoundsDetection(a.$.mainContainer)):a._collapseSection(n),o){var d={item:l,label:l.label,path:l.path,value:l.value,children:l.itemContainer.children};a.toggleCallback?(d.type="collapse",a.toggleCallback(d)):a.$.fireEvent("collapse",d)}if(a._openedContainers[e]){var c=a._openedContainers[e].indexOf(n);-1!==c&&a._openedContainers[e].splice(c,1)}}},{key:"_collapseAll",value:function(e,n){for(var t=this,o=t._openedContainers.length-1;o>=2&&void 0!==t._openedContainers[o];o--)for(var i=t._openedContainers[o].length-1;i>=0;i--)t._closeSubContainersTreeMode(o,t._openedContainers[o][i],void 0,e,n);t.hasAnimation||t._checkOverflow(t.$.mainContainer,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]);for(var a=t._openedContainers.length-1;a>=2;a--){var r=t._openedContainers[a];if(void 0!==r&&0!==r.length)break;t._openedContainers.splice(a,1)}2===t._openedContainers.length&&(t._openedContainers=[])}},{key:"_collapseSection",value:function(e){var n=this,t=e.scrollHeight+"px";n._treeAnimationInProgress=e,e.style.transition="none",requestAnimationFrame(function(){if("tree"!==n.mode&&!n._minimized)return void(e.style.transition="");e.style.height=t,e.style.transition="",requestAnimationFrame(function(){e.style.height="0px","jqx-tree"===n.tagName.toLowerCase()&&e.$.addClass("jqx-visibility-hidden"),"0px"===t&&n._transitionendHandlerCollapse(n,e)})}),e.addEventListener("transitionend",n._transitionendHandlerCollapse)}},{key:"_createElement",value:function(){var e=this,n=e.mode;e._positionDetection=new JQX.Utilities.PositionDetection(e),e._positionDetection.getDropDownParent(),e._reparentMenu(),e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),null===e.dataSource&&e.$.mainContainer.firstElementChild instanceof HTMLUListElement&&e._processUList();var t=e.getElementsByTagName("jqx-menu-item"),o=function(){var t=e.animation;e._changeScrollButtonsArrows(),e._setFocusable(),"dropDown"===n&&!1===e.opened&&(e.hasAnimation?(e.animation="none",e.$.addClass("jqx-visibility-hidden"),e.animation=t):e.$.addClass("jqx-visibility-hidden")),e._menuItems={},e.$.mainContainer.setAttribute("animation",t),null===e.dataSource?e._processHTML(e.$.mainContainer,1):e._processDataSource(),e._checkContainersLength(!0),null===e.dropDownAppendTo&&!e.$mainContainer.hasClass("simple")&&"tree"!==e.mode||"scroll"!==e.overflow||(e.$mainContainer.addClass("scroll-buttons-shown"),e.$scrollButtonNear.removeClass("jqx-hidden"),e.$scrollButtonFar.removeClass("jqx-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,"horizontal"===n,[e.$.scrollButtonNear,e.$.scrollButtonFar])),e._applyMinimizeIconTemplate(e.minimizeIconTemplate,null),"tree"===n&&e._applyTreeMode(),null!==e.minimizeWidth&&e.offsetWidth<=e.minimizeWidth?e.minimize():e._checkOverflow(e.$.mainContainer,"horizontal"===n,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._expandItemsByDefault(),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted())};0===t.length?o():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(t,o))}},{key:"_ensureItemsReady",value:function(e,n){var t=this,o=function(){var t=function(n){for(var t=0;t<e.length;t++)e[t].context="node"===n?e[t]:document};t("node"),n(),t()};if(0===e.length)o();else{t._nodesReadyListeners=0;for(var i=0;i<e.length;i++){var a=e[i],r=function(){0===--t._nodesReadyListeners&&(o(),delete t._nodesReadyListeners)}.bind(t);a.isCompleted||(t._nodesReadyListeners++,a.completeHandlers=[],a._onCompleted=r)}0===t._nodesReadyListeners&&o()}}},{key:"_createItemHTMLStructure",value:function(e,n,t,o){var i=this,a=document.createElement("div"),r=document.createElement("div"),l=document.createDocumentFragment(),s=void 0;e.menu=i,n>1?(e.originalIndex=o,s=t.path+"."+e.originalIndex,e.parentItem=t):(e.originalIndex=o,s=""+o),e.path=s,i._menuItems[s]=e,a.className="jqx-"+i._element+"-item-label-container",r.className="jqx-"+i._element+"-item-label-element","tree"===i._element&&i._setIndentation(a,n,i.rightToLeft?"paddingRight":"paddingLeft");for(var d=Array.from(e.childNodes),c=0;c<d.length;c++){var u=d[c];if(u instanceof JQX.MenuItem||u instanceof JQX.MenuItemsGroup)break;r.appendChild(u)}if(""===r.innerHTML.trim()){var m=e.label||e.getAttribute("label")
;m&&""!==m?i._setLabel(m,r,e,!0):(e.set("label","Item "+o),r.innerHTML="Item "+o)}else e.set("label",r.innerHTML.trim());if(e instanceof JQX.MenuItemsGroup&&void 0===e.titleLabel&&(e.titleLabel=e.label),r.innerHTML="<span>"+r.innerHTML+"</span>",l.appendChild(r),e.set("level",n),e.set("shortcut",e.shortcut||e.getAttribute("shortcut")||""),e.shortcut&&e instanceof JQX.MenuItem){var p=document.createElement("div");p.className="jqx-"+i._element+"-item-shortcut",p.innerHTML=e.shortcut,l.appendChild(p)}a.appendChild(l),e.insertBefore(a,e.children[0]),e.id||(e.id=i.id+"ItemP"+e.path.replace(/\./g,"_")+"L"+e.label.replace(/<|\/|>|"|'|=|\s/g,""))}},{key:"_createMenuItemsGroupContainer",value:function(e,n){var t=this,o=document.createElement("div"),i=document.createElement("div");if(o.className="jqx-"+t._element+"-drop-down jqx-visibility-hidden",t._edgeMacFF&&2===n&&"tree"!==t.mode&&(o.className+=" not-in-view"),o.$=JQX.Utilities.Extend(o),o.level=n,o.setAttribute("level",n),o.menuItemsGroup=e,i.className="jqx-"+t._element+"-item-container",i.$=JQX.Utilities.Extend(i),i.container=o,i.menuItemsGroup=e,e.checkable&&i.setAttribute("checkable",""),i.setAttribute("check-mode",e.checkMode),o.itemContainer=i,o.appendChild(i),null!==e.dropDownHeight){var a=document.createElement("jqx-repeat-button"),r=document.createElement("jqx-repeat-button");a.className="jqx-menu-scroll-button jqx-spin-button jqx-scroll-button-near jqx-hidden",a.innerHTML='<div id="arrowNear" class="jqx-arrow jqx-arrow-up"></div>',a.animation=t.animation,a.unfocusable=!0,r.className="jqx-menu-scroll-button jqx-spin-button jqx-scroll-button-far jqx-hidden",r.innerHTML='<div id="arrowNear" class="jqx-arrow jqx-arrow-down"></div>',r.animation=t.animation,r.unfocusable=!0,o.insertBefore(a,i),o.appendChild(r),o.$.addClass("drop-down-height-set"),i.dropDownHeightSet=!0,i.checkOverflow=!0,o.style.height=e.dropDownHeight+"px",t._containersFixedHeight.push(o),t._additionalScrollButtons.push([a,r])}return o}},{key:"_discardKeyboardHover",value:function(e){var n=this;n._focusedViaKeyboard&&(!e&&n._focusedViaKeyboard instanceof JQX.MenuItemsGroup&&n._isContainerOpened(n._focusedViaKeyboard.level+1,n._focusedViaKeyboard.container)||(n._focusedViaKeyboard.$.removeClass("focus"),n._focusedViaKeyboard.removeAttribute("focus"),n._focusedViaKeyboard.$.removeClass("hover"),n._focusedViaKeyboard.removeAttribute("hover"),n._focusedViaKeyboard=void 0))}},{key:"_documentDownHandler",value:function(e){var n=this;"down"===n.closeAction&&n._closeOnDocumentInteraction(e.originalEvent)}},{key:"_documentUpHandler",value:function(e){var n=this,t=e.originalEvent.target;if(!n.disabled&&!n.displayLoadingIndicator&&t.closest){var o="up"===n.closeAction&&n._closeOnDocumentInteraction(e.originalEvent);if(!o){var i=void 0,a=void 0;if(JQX.EnableShadowDOM?(i=n.isInShadowRoot?n.getRootNode().activeElement:n.shadowRoot?n.shadowRoot.activeElement||document.activeElement:document.activeElement,a=n.$.container.contains(e.originalEvent.composedPath()[0])):(i=document.activeElement,a=n.contains(t)),!o&&n!==i&&null===i.closest("[template-applied]")){if(a||t.closest(".jqx-list-menu-view")===n.$.view)return void n.focus();var r=t.closest(".jqx-drop-down-repositioned");r&&r.ownerElement===n&&n.focus()}}}}},{key:"_closeOnDocumentInteraction",value:function(e){var n=this,t=e.target,o=void 0,i=void 0;if(JQX.EnableShadowDOM?(o=e.composedPath()[0],i=n.$.container.contains(o)):i=n.contains(t),"dropDown"===n.mode&&n.opened){var a=t.closest(".jqx-drop-down-repositioned");if(!(i||a&&a.ownerElement===n))return n.close({trigger:"interaction",target:JQX.EnableShadowDOM?o:t}),!0}if(!i&&null===t.closest(".jqx-menu-drop-down")||o&&o===n.$.mainContainer||t===n.$.mainContainer)return"tree"===n.mode||(n._close(),!0)}},{key:"_endSwiping",value:function(e,n,t){var o=this;if(o._dragStartDetails){var i=o.$.mainContainer,a=Math.abs(o._dragStartDetails.startTime-n),r=300/a,l=(o._dragStartDetails.startY-e.pageY)*r,s=Math.abs(l),d=function(){return!(l>0&&i.scrollTop===i.scrollHeight-i.offsetHeight||l<0&&0===i.scrollTop)},c=.03*Math.abs(l)*r,u=function e(){if(c>5){var n=(s-c)/Math.abs(l);n<.1?c/=1.25:n<.15?c/=1.2:n<.2?c/=1.15:n<.25?c/=1.1:n<.3&&(c/=1.05)}var a=i.scrollTop;i.scrollTop=l>0?Math.min(a+c,i.scrollHeight-i.offsetHeight):Math.max(a-c,0),s-=c,o._updateScrollButtonVisibility(o.$.mainContainer,"horizontal"===o.mode,[o.$.scrollButtonNear,o.$.scrollButtonFar]);var r=d();if(s>0&&r)o._scrollingAnimationFrame=window.requestAnimationFrame(e);else if(o._wheelInProgress=!1,!r&&(o._fireScrollBottomReachedEvent&&o._fireScrollBottomReachedEvent(a),!0!==t)){var u=o.$.mainContainer.scrollTop;0===u?o._bounceTop():o._bounceBottom(u)}};o._scrollingAnimationFrame&&cancelAnimationFrame(o._scrollingAnimationFrame),a<1e3&&d()?o._scrollingAnimationFrame=window.requestAnimationFrame(u):o._wheelInProgress=!1,delete o._dragStartDetails}}},{key:"_ensureVisible",value:function(e){function n(n,t,o){var i=e.firstElementChild[o]+n-a[o];i<0&&(i=n),a["scroll"+t]=i}function t(t,i){var l=e["offset"+t],s=a[i];"Top"!==t||a===o.$.mainContainer||r[0].$.hasClass("jqx-hidden")||(l-=r[0][i]),n(l,t,i),o._updateScrollButtonVisibility(a,"Left"===t,r),s!==a[i]&&n(l,t,i)}var o=this;if(!o._minimized){var i=o.mode,a=void 0,r=void 0;if("tree"!==i&&e.parentElement!==o.$.mainContainer){if(null===e.dropDownHeight)return;a=e.parentElement,r=[a.container.children[0],a.container.children[2]]}else a=o.$.mainContainer,r=[o.$.scrollButtonNear,o.$.scrollButtonFar];if(a!==o.$.mainContainer||(null!==o.dropDownAppendTo||"tree"===o.mode||o.$mainContainer.hasClass("simple"))&&(a.$.hasClass("scroll-buttons-shown")||"hidden"===o.overflow)){var l=a.getBoundingClientRect(),s=e.getBoundingClientRect();if("tree"===i)return void o._ensureVisibleTreeMode(e,s,a,l,0);a===o.$.mainContainer&&"horizontal"===i&&(l.left>s.left||l.right<s.right)?t("Left","offsetWidth"):(l.top>s.top||l.bottom<s.bottom)&&t("Top","offsetHeight")}}}},{key:"_ensureVisibleTreeMode",value:function(e,n,t,o,i){var a=this;if("menu"!==a._element&&"scrollButtons"!==a.scrollMode||t.$.hasClass("scroll-buttons-shown")||"hidden"===a.overflow){var r=t.offsetHeight,l=a.$scrollButtonNear.hasClass("jqx-hidden"),s=void 0;if(o.top>n.top)s=a._getOffsetTop(e);else{var d=e.expanded?e.firstElementChild.offsetHeight+parseInt(window.getComputedStyle(e.children[1]).marginTop,10):e.offsetHeight;if("tree"===a._element&&(d+=parseFloat(getComputedStyle(a).getPropertyValue("--jqx-tree-item-vertical-offset"))||0),!(o.bottom<n.top+d))return;s=a._getOffsetTop(e)-r+d+i}t.scrollTop=s,"menu"!==a._element&&"scrollButtons"!==a.scrollMode||a._updateScrollButtonVisibility(t,!1,[a.$.scrollButtonNear,a.$.scrollButtonFar]),"auto"===a.overflow&&l&&!a.$scrollButtonNear.hasClass("jqx-hidden")&&(t.scrollTop+=r-t.offsetHeight)}}},{key:"_escapeHandler",value:function(e,n,t){var o=this;e&&(e.$.removeClass("focus"),e.removeAttribute("focus")),o._closeSubContainers(n,void 0,void 0,!0),o._hoverViaKeyboard(t.menuItemsGroup)}},{key:"_expandItemsByDefault",value:function(e){var n=this;if((0!==n._menuItemsGroupsToExpand.length||e)&&("tree"===n.mode||n._minimized)){var t=n.hasAnimation,o=n.animation;t&&(n.animation="none"),e&&n._collapseAll(!1);for(var i=0;i<n._menuItemsGroupsToExpand.length;i++)n.expandItem(n._menuItemsGroupsToExpand[i].path,void 0,!1);t&&(n.animation=o),n._menuItemsGroupsToExpand=[]}}},{key:"_expandSection",value:function(e){var n=this,t=e.style.height,o=e.scrollHeight+"px";if(e.style.height=o,n._treeAnimationInProgress=e,t===o||!parseFloat(t)&&!parseFloat(o))return void n._transitionendHandlerExpand(n,e);e.addEventListener("transitionend",n._transitionendHandlerExpand)}},{key:"_filterInputKeyupHandler",value:function(){var e=this;e._filterTimer&&clearTimeout(e._filterTimer),e._filterTimer=setTimeout(function(){var n=e.context;e.context=e,e._applyFilter(e.$.filterInput.value,e._view),e._checkOverflow(),e.context=n},300)}},{key:"_findItem",value:function(e,n){if(""===n)return e;switch(this.filterMode){case"startsWith":if(0===e.label.indexOf(n))return e;break;case"startsWithIgnoreCase":if(0===e.label.toLowerCase().indexOf(n.toLowerCase()))return e;break;case"doesNotContain":if(e.label.indexOf(n)<0)return e;break;case"doesNotContainIgnoreCase":if(e.label.toLowerCase().indexOf(n.toLowerCase())<0)return e;break;case"contains":if(e.label.indexOf(n)>-1)return e;break;case"containsIgnoreCase":if(e.label.toLowerCase().indexOf(n.toLowerCase())>-1)return e;break;case"equals":if(0===e.label.localeCompare(n))return e;break;case"equalsIgnoreCase":if(0===e.label.toLowerCase().localeCompare(n.toLowerCase()))return e;break;case"endsWith":if(e.label.endsWith(n))return e;break;case"endsWithIgnoreCase":if(e.label.toLowerCase().endsWith(n.toLowerCase()))return e}return null}},{key:"_getFirstEnabledChild",value:function(e){for(var n=e.children,t=0;t<n.length;t++)if(this._isChildEnabled(n[t]))return n[t]}},{key:"_getLastEnabledChild",value:function(e){for(var n=e.children,t=n.length-1;t>=0;t--)if(this._isChildEnabled(n[t]))return n[t]}},{key:"_getNextEnabledChild",value:function(e){if(e)for(;e.nextElementSibling;){var n=e.nextElementSibling;if(this._isChildEnabled(n))return n;e=n}}},{key:"_getOffsetTop",value:function(e){for(var n=e.offsetTop;e.offsetParent!==this.$.mainContainer;)e=e.offsetParent,n+=e.offsetTop;return n}},{key:"_getPreviousEnabledChild",value:function(e){if(e)for(;e.previousElementSibling;){var n=e.previousElementSibling;if(this._isChildEnabled(n))return n;e=n}}},{key:"_hamburgerIconClickHandler",value:function(e,n){e&&e.stopPropagation();var t=this;if(void 0===n&&(n=JQX.ListMenu&&t instanceof JQX.ListMenu?t.$.view:t.$.mainContainer),!t.disabled)if(t._minimizedDropDownOpened)t._close();else{if(t._positionDetection.placeOverlay(),null!==t.dropDownAppendTo){var o=t.dropDownPosition,i=t.getBoundingClientRect(),a=t._positionDetection.getDropDownOffset();-1!==o.indexOf("right")||"auto"===o?(n.style.left=i.left+a.x+"px",n.style.right="initial"):-1!==o.indexOf("left")&&(n.style.left=i.right-n.offsetWidth+a.x+"px",n.style.right="initial"),-1!==o.indexOf("bottom")||-1!==o.indexOf("overlay")||"auto"===o?n.style.top=i.bottom+a.y+"px":-1!==o.indexOf("top")&&(n.style.top=i.top+a.y+"px")}t._edgeMacFF&&n.$.removeClass("not-in-view"),n.$.removeClass("jqx-visibility-hidden"),t.$hamburgerIcon.addClass("jqx-close-button"),t._minimizedDropDownOpened=!0,t._browserBoundsDetection(n)}}},{key:"_handleOverflowChange",value:function(){var e=this;if(!e._minimized&&(null!==e.dropDownAppendTo||e.$mainContainer.hasClass("simple")||"tree"===e.mode)||JQX.ListMenu&&e instanceof JQX.ListMenu){var n=e.overflow,t=void 0;"horizontal"===e.mode?(t=!0,e.$.mainContainer.scrollLeft=0):(t=!1,e.$.mainContainer.scrollTop=0),"hidden"===n?(e.$mainContainer.removeClass("scroll-buttons-shown"),e.$scrollButtonNear.addClass("jqx-hidden"),e.$scrollButtonFar.addClass("jqx-hidden")):(e.$.scrollButtonNear.disabled=e.disabled,e.$.scrollButtonFar.disabled=e.disabled,"auto"===n?(e.$scrollButtonNear.addClass("jqx-hidden"),e.$scrollButtonFar.addClass("jqx-hidden"),e._checkOverflow(e.$.mainContainer,t,[e.$.scrollButtonNear,e.$.scrollButtonFar])):(e.$mainContainer.addClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown"),e.$scrollButtonNear.removeClass("jqx-hidden"),e.$scrollButtonFar.removeClass("jqx-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,t,[e.$.scrollButtonNear,e.$.scrollButtonFar])))}}},{key:"_hideMainContainerScrollButtons",value:function(){var e=this;e.$scrollButtonNear.addClass("jqx-hidden"),e.$scrollButtonFar.addClass("jqx-hidden"),e.$mainContainer.removeClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown")}},{key:"_hoverViaKeyboard",value:function(e){if(e){var n=this;e.$.addClass("focus"),e.setAttribute("focus",""),n._focusedViaKeyboard=e,n._ensureVisible(e)}}},{key:"_isBranchExpanded",value:function(e){if("tree"!==this.mode)return!0;for(var n=!0;e.parentItem;)n=n&&e.parentItem.expanded,e=e.parentItem;return n}},{key:"_isChildEnabled",value:function(e){return!(e.disabled||e.templateApplied||e.hidden||e instanceof HTMLDivElement||0===e.offsetHeight)}},{key:"_isContainerOpened",value:function(e,n){var t=this;return"tree"===t.mode||t._minimized?(t._openedContainers[e]||(t._openedContainers[e]=[]),-1!==t._openedContainers[e].indexOf(n)):t._openedContainers[e]===n}},{key:"_keydownHandler",value:function(e){var n=this,t=e.key;if(document.activeElement===n&&-1!==["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Escape","Home"," "].indexOf(t)&&!n.disabled){e.preventDefault();var o=n.mode;if("tree"===o||n._minimized)return void n._keydownHandlerTreeMode(t);for(var i=n.dropDownPosition,a=-1!==i.indexOf("left"),r="top-left"===i||"top-right"===i,l=n._openedContainers,s=n.$.mainContainer,d=1,c=void 0,u=l.length-1;u>=0;u--)if(void 0!==l[u]){s=l[u],d=s.level,s=s.itemContainer;break}switch(c=s.querySelector('[focus][level="'+d+'"]'),t){case"ArrowDown":1===d?"horizontal"!==o||r?"horizontal"!==o&&n._levelOneNavigate("_getFirstEnabledChild",c,s):n._levelOneOpenDropDown(c):n._navigate("_getNextEnabledChild",c,s);break;case"ArrowLeft":a?1===d?"horizontal"===o?n._levelOneNavigate("_getLastEnabledChild",c,s):n._levelOneOpenDropDown(c):c instanceof JQX.MenuItemsGroup?n._selectionHandler({target:c,isTrusted:!0}):n._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",c):n._arrowLeftHandler(d,o,c,s);break;case"ArrowRight":a?1===d?"horizontal"===o&&n._levelOneNavigate("_getFirstEnabledChild",c,s):2===d?n._levelOneNavigateFromLowerLevel("_getNextEnabledChild",c):n._escapeHandler(c,d,s):n._arrowRightHandler(d,o,c,s);break;case"ArrowUp":1===d?"horizontal"===o&&r?n._levelOneOpenDropDown(c):"horizontal"!==o&&n._levelOneNavigate("_getLastEnabledChild",c,s):n._navigate("_getPreviousEnabledChild",c,s);break;case"End":case"Home":var m="End"===t?n._getLastEnabledChild(s):n._getFirstEnabledChild(s);if(!m||c===m)return;c&&(c.$.removeClass("focus"),c.removeAttribute("focus")),n._hoverViaKeyboard(m);break;case"Enter":c&&n._selectionHandler({target:c,isTrusted:!0});break;case"Escape":d>1?(2===d&&n._positionDetection.removeOverlay(),n._escapeHandler(c,d,s)):"dropDown"===o&&n.opened&&n.close({trigger:"interaction",target:"Escape"});break;case" ":c&&n._toggleItem(c)}}}},{key:"_keydownHandlerTreeMode",value:function(e){function n(e){var n=e.level;return!1===e.disabled&&!0!==e.templateApplied&&(1===n||n>1&&a._isContainerOpened(n,e.parentElement.container)&&e.getBoundingClientRect().height>0)}function t(e){for(var t=e;t<r.length;t++){var o=r[t];if(n(o)){if(l){if(l===o)break;l.$.removeClass("focus"),l.removeAttribute("focus")}a._hoverViaKeyboard(o);break}}}function o(e){for(var t=e;t>=0;t--){var o=r[t];if(n(o)){if(l){if(l===o)break;l.$.removeClass("focus"),l.removeAttribute("focus")}a._hoverViaKeyboard(o);break}}}function i(){l.level>1&&(l.$.removeClass("focus"),l.removeAttribute("focus"),a._hoverViaKeyboard(l.parentItem))}var a=this,r=Array.from(a.$.mainContainer.querySelectorAll("jqx-menu-item, jqx-menu-items-group")),l=a.$.mainContainer.getElementsByClassName("focus")[0],s=void 0;switch(e){case"ArrowDown":s=l?r.indexOf(l)+1:0,t(s);break;case"ArrowLeft":if(!l)return;if(l instanceof JQX.MenuItem)i();else{if(a._isContainerOpened(l.level+1,l.container))return void a._closeSubContainers(l.level+1,l.container,!0,!0);i()}break;case"ArrowRight":if(!l||l instanceof JQX.MenuItem)return;a._isContainerOpened(l.level+1,l.container)?(l.$.removeClass("focus"),l.removeAttribute("focus"),a._hoverViaKeyboard(a._getFirstEnabledChild(l.itemContainer))):a._selectionHandler({target:l,type:"keydown",isTrusted:!0},l);break;case"ArrowUp":s=l?r.indexOf(l)-1:r.length-1,o(s);break;case"End":o(r.length-1);break;case"Enter":a._minimized&&!a._minimizedDropDownOpened?a._hamburgerIconClickHandler(void 0,a.$.mainContainer):l&&a._selectionHandler({target:l,type:"keydown",isTrusted:!0});break;case"Escape":a._minimized&&a._minimizedDropDownOpened&&a._close();break;case"Home":t(0);break;case" ":l&&a._toggleItem(l)}}},{key:"_levelOneNavigate",value:function(e,n,t){var o=this;if(n)"_getLastEnabledChild"===e?o._navigate("_getPreviousEnabledChild",n,t):o._navigate("_getNextEnabledChild",n,t);else{var i=o[e](t);i&&o._hoverViaKeyboard(i)}}},{key:"_levelOneNavigateFromLowerLevel",value:function(e,n){var t=this,o=t[e](t._openedContainers[2].menuItemsGroup);o&&(n&&(n.$.removeClass("focus"),n.removeAttribute("focus")),t._closeSubContainers(2),o instanceof JQX.MenuItemsGroup?t._selectionHandler({target:o,isTrusted:!0}):t._hoverViaKeyboard(o))}},{key:"_levelOneOpenDropDown",value:function(e){e&&e instanceof JQX.MenuItemsGroup&&this._selectionHandler({target:e,isTrusted:!0})}},{key:"_mainContainerHandler",value:function(e){var n=this;if(n._minimized&&null!==n.dropDownAppendTo)switch(e.type){case"click":n._selectionHandler(e);break;case"mouseleave":n._mouseleaveHandler(e);break;case"mouseout":case"mouseover":n._mouseoutMouseoverHandler(e)}}},{key:"_menuItemSelectionHandler",value:function(e,n){function t(){o.enableShadowDOM&&(o.shadowRoot.activeElement||document.activeElement)!==o&&null!==o.dropDownAppendTo&&"click"===n.type&&!o.shadowRoot.contains(e)?o.focus():document.activeElement===o||null===o.dropDownAppendTo||"click"!==n.type||o.contains(e)||o.focus()}var o=this;return e.disabled||e.templateApplied?void t():o._toggleItem(e)||(o.$.fireEvent("itemClick",{item:e,label:e.label,value:e.value}),"tree"===o.mode||(o._close(),"dropDown"!==o.mode))?(o._ripple(e,n),void t()):(o._ripple(e,n),void o.close({trigger:"interaction",target:e}))}},{key:"_menuItemsGroupSelectionHandler",value:function(e,n,t){var o=this,i=o.mode,a=e.container,r=a.level,l="tree"!==i&&!o._minimized;if(o._treeAnimationInProgress!==a&&(o._discardKeyboardHover(),document.activeElement===o||null===o.dropDownAppendTo||"click"!==n.type||o.contains(n.target)||o.focus(),"click"!==n.type||!(!n.target.classList.contains("jqx-"+o._element+"-items-group-arrow")&&o._toggleItem(e)||"mouseenter"===o.selectionMode&&"tree"!==i&&!o._minimized))){var s=o.hasAnimation;if(o._isContainerOpened(r,a))o._closeSubContainers(r,a,!0,!1!==t),l&&e.hasAttribute("focus")&&(o._focusedViaKeyboard=e);else{if(o.$.fireEvent("expanding",{item:e,label:e.label,path:e.path,value:e.value,children:e.itemContainer.children}).defaultPrevented)return;if(o._positionDetection.placeOverlay(),l&&o._closeSubContainers(r),s&&!l&&("expand"!==n.type&&(o._ensureVisibleOnTransitionend=e),o._expandSection(a)),o._edgeMacFF&&2===r&&l&&a.$.removeClass("not-in-view"),a.$.removeClass("jqx-visibility-hidden"),l||"expand"!==n.type){if(l)"keydown"===n.type&&(o._focusedViaKeyboard=e);else{var d=o.$.mainContainer.getElementsByClassName("focus")[0];d&&(d.$.removeClass("focus"),d.removeAttribute("focus")),o._focusedViaKeyboard=e}e.$.addClass("focus"),e.setAttribute("focus","")}if(e.$.addClass("jqx-"+o._element+"-items-group-opened"),e.$.addClass("jqx-"+o._element+"-items-group-expanded"),o._addOpenedContainer(r,a),l){if(o._ensureVisible(e),e.level>1&&e.parentElement.dropDownHeightSet){var c=o.dropDownPosition,u=e.getBoundingClientRect().top-e.parentElement.container.getBoundingClientRect().top;-1!==c.indexOf("bottom")||"auto"===c?a.style.top=u+"px":-1!==c.indexOf("top")?a.style.top=u+e.offsetHeight+"px":a.style.top=u+e.offsetHeight/2+"px"}a.itemContainer.checkOverflow&&a.itemContainer.dropDownHeightSet&&(o._checkOverflow(a.itemContainer,!1,[a.children[0],a.children[2]]),delete a.itemContainer.checkOverflow)}o._positionExternalContainer(a,e),"tree"===i||o._minimized?s||o._browserBoundsDetection(o.$.mainContainer):o._browserBoundsDetection(a),void 0===n.type&&o._hoverViaKeyboard(o._getFirstEnabledChild(e.itemContainer)),!1!==t&&o.$.fireEvent("expand",{item:e,label:e.label,path:e.path,value:e.value,children:e.itemContainer.children})}l?o._ripple(e,n):"tree"!==i||s||(o._checkOverflow(o.$.mainContainer,!1,[o.$.scrollButtonNear,o.$.scrollButtonFar]),o._minimized||"expand"===n.type||o._ensureVisible(e))}}},{key:"_mouseenterHandler",value:function(){var e=this;e.autoFocusOnMouseenter&&document.activeElement!==e&&e.focus()}},{key:"_mouseleaveHandler",value:function(e){var n=this;if("mouseenter"===n.selectionMode&&"tree"!==n.mode&&!n._minimized){if(null!==n.dropDownAppendTo&&e.relatedTarget)if(n.contains(e.target)){var t=e.relatedTarget.closest(".jqx-menu-drop-down");if(t&&t.ownerElement===n)return}else if(n.contains(e.relatedTarget))return;n._isElementHovered=!1,n._autoCloseTimeout=setTimeout(function(){var e=n.context;clearTimeout(n._autoCloseTimeout),n._isElementHovered||(n.context=n,n._close(),n.context=e)},n.autoCloseDelay)}}},{key:"_mouseoutMouseoverHandler",value:function(e){var n=this;if(!n.disabled&&!n.displayLoadingIndicator){var t=e.target.closest("jqx-menu-item")||e.target.closest("jqx-menu-items-group");if(n.enableShadowDOM&&(t=e.composedPath()[0].closest("jqx-menu-item")||e.composedPath()[0].closest("jqx-menu-items-group")||t),"mouseover"===e.type&&(n._isElementHovered=!0),null!==t&&!t.disabled&&!t.templateApplied&&("tree"!==n.mode&&!n._minimized||!t.hasAttribute("focus")||!e.relatedTarget||e.target.parentElement!==e.relatedTarget&&e.relatedTarget.parentElement!==e.target))if(n._discardKeyboardHover(!1),"mouseover"===e.type){"mouseenter"!==n.selectionMode||"tree"===n.mode||n._minimized||(t instanceof JQX.MenuItemsGroup&&!t.hasAttribute("hover")?n._selectionHandler(e,t):t instanceof JQX.MenuItem&&n._closeSubContainers(t.level+1));var o=e.target.closest(".jqx-menu-drop-down");(!o||o&&!t.contains(o))&&(t.$.addClass("hover"),t.setAttribute("hover",""),n._discardKeyboardHover(!0))}else{if("tree"!==n.mode&&!n._minimized&&("mouseenter"===n.selectionMode&&e.relatedTarget===n.$.mainContainer&&n._close(),t instanceof JQX.MenuItemsGroup&&t.container&&!t.container.$.hasClass("jqx-visibility-hidden")))return;t.$.removeClass("hover"),t.removeAttribute("hover")}}}},{key:"_moveDropDownsToExternalContainer",value:function(){for(var e=this,n=0;n<e._containersInBody.length;n++){var t=e._containersInBody[n];e._dropDownParent.appendChild(t),t.$.listen("click",e._selectionHandler.bind(e)),t.$.listen("mouseleave",e._mouseleaveHandler.bind(e)),t.$.listen("mouseout",e._mouseoutMouseoverHandler.bind(e)),t.$.listen("mouseover",e._mouseoutMouseoverHandler.bind(e))}for(var o=0;o<e._containers.length;o++){var i=e._containers[o];i.ownerElement=e,""!==e.theme&&i.classList.add(e.theme),i.classList.add("jqx-drop-down-repositioned"),i.setAttribute("mode",e.mode),i.setAttribute("drop-down-position",e.dropDownPosition),e.checkboxes&&i.setAttribute("checkboxes","")}}},{key:"_moveDropDownsToMenu",value:function(){for(var e=this,n=0;n<e._containersInBody.length;n++){var t=e._containersInBody[n];t.$.unlisten("click"),t.$.unlisten("mouseleave"),t.$.unlisten("mouseout"),t.$.unlisten("mouseover"),t.style.left="",t.style.right="",t.style.top="",t.style.marginLeft="",t.style.marginTop="",t.menuItemsGroup.appendChild(t)}for(var o=0;o<e._containers.length;o++){var i=e._containers[o];""!==e.theme&&i.classList.remove(e.theme),i.classList.remove("jqx-drop-down-repositioned"),i.removeAttribute("mode"),i.removeAttribute("drop-down-position"),i.removeAttribute("checkboxes")}}},{key:"_navigate",value:function(e,n,t){var o=this;if(!n)return void("_getNextEnabledChild"===e?o._hoverViaKeyboard(o._getFirstEnabledChild(t)):o._hoverViaKeyboard(o._getLastEnabledChild(t)));var i=o[e](n);i&&(n.$.removeClass("focus"),n.removeAttribute("focus"),o._hoverViaKeyboard(i))}},{key:"_positionExternalContainer",value:function(e,n){var t=this;if(null!==t.dropDownAppendTo&&2===e.level){var o=t.dropDownPosition,i=t.mode,a=n.getBoundingClientRect(),r=t._positionDetection.getDropDownOffset(),l=a.top+r.y,s=a.bottom+r.y,d=a.left+r.x;switch(e.style.left="",e.style.right="",e.style.top="",-1!==o.indexOf("left")?(d-=e.offsetWidth,"horizontal"!==i&&"overlay-left"!==o||(d+=a.width),e.style.left=d+"px",e.style.right="initial"):e.style.left="horizontal"===i||"overlay-right"===o?d+"px":d+a.width+"px",o){case"bottom-right":case"bottom-left":case"auto":e.style.top="horizontal"===i?s+"px":l+"px";break;case"top-right":case"top-left":e.style.top="horizontal"===i?l-e.offsetHeight+"px":s-e.offsetHeight+"px";break;case"overlay-right":case"overlay-left":e.style.top=l+a.height/2+"px"}}}},{key:"_processDataSource",value:function(){function e(t,r){var l=void 0;if(Array.isArray(t[i])&&t[i].length>0){l=document.createElement("jqx-"+n._element+"-items-group"),!0===t.checkable&&l.set("checkable",!0),"checkbox"!==t.checkMode&&"radioButton"!==t.checkMode||l.set("checkMode",t.checkMode),t.dropDownHeight&&l.set("dropDownHeight",t.dropDownHeight),!0===t.expanded&&"tree"===n.mode&&l.set("expanded",!0);for(var s=0;s<t[i].length;s++)e(t[i][s],l)}else l=document.createElement("jqx-"+n._element+"-item"),void 0!==t.shortcut&&l.set("shortcut",t.shortcut),t.customAttribute&&l.setAttribute(t.customAttribute,"");!0===t.checked&&l.set("checked",!0),!0===t.disabled&&l.set("disabled",!0),void 0!==t[o]&&l.set("label",t[o]),!0===t.selected&&l.set("selected",!0),!0===t.separator&&l.set("separator",!0),void 0!==t[a]&&l.set("value",t[a]),r.appendChild(l)}var n=this,t=n.dataSource,o=n.displayMember,i=n.itemsMember,a=n.valueMember;n.$.mainContainer.innerHTML="";for(var r=0;r<t.length;r++){e(t[r],n.$.mainContainer)}n._processHTML(n.$.mainContainer,1)}},{key:"_processHTML",value:function(e,n,t){var o=this,i=void 0,a=void 0;n>1&&(i=o._createMenuItemsGroupContainer(e,n),a=i.itemContainer,(e.expanded||e.hasAttribute("expanded"))&&"tree"===o.mode?o._menuItemsGroupsToExpand.push(e):(e.set("expanded",!1),e.removeAttribute("expanded")));for(var r=Array.from(e.children),l=[],s=document.createDocumentFragment(),d=0,c=0;c<r.length;c++)if(n>1&&0===c)d++;else{var u=r[c];u instanceof JQX.MenuItem||u instanceof JQX.MenuItemsGroup?(o._createItemHTMLStructure(u,n,e,c-d),(u.checked||u.hasAttribute("checked"))&&(u.disabled||u.hasAttribute("disabled")||u.templateApplied?(u.set("checked",!1),u.removeAttribute("checked")):l.push(u)),n>1&&s.appendChild(u),u instanceof JQX.MenuItemsGroup&&o._processHTML(u,n+1)):(u.parentElement.removeChild(u),d++)}if(n>1){if(a.appendChild(s),e.container=i,e.itemContainer=a,e instanceof JQX.MenuItemsGroup){var m=document.createElement("div");m.className="jqx-"+o._element+"-items-group-arrow",o._setArrowDirection(m,n),e.firstElementChild.appendChild(m)}o._containers.push(i),2===n&&(o._containersInBody.push(i),o._edgeMacFF&&i.addEventListener("transitionend",function(e){e.target===this&&this.$.hasClass("jqx-visibility-hidden")&&(this.style.left="",this.style.top="",this.$.addClass("not-in-view"))})),null===o.dropDownAppendTo||"tree"===o.mode||o._minimized?e.appendChild(i):(i.ownerElement=o,i.classList.add("jqx-drop-down-repositioned"),i.setAttribute("mode",o.mode),i.setAttribute("drop-down-position",o.dropDownPosition),o.checkboxes&&i.setAttribute("checkboxes",""),""!==o.theme&&i.$.addClass(o.theme),i.setAttribute("animation",o.animation),2===n?(o._dropDownParent.appendChild(i),i.$.listen("click",o._selectionHandler.bind(o)),i.$.listen("mouseleave",o._mouseleaveHandler.bind(o)),i.$.listen("mouseout",o._mouseoutMouseoverHandler.bind(o)),i.$.listen("mouseover",o._mouseoutMouseoverHandler.bind(o))):e.appendChild(i))}o._validateRadioButtonSelection(e,n,l),o._sortItems&&!1!==t&&o._sortItems(e)}},{key:"_processUList",value:function(){var e=this,n=new RegExp(/<li>(.(?!<\/li>)|\n)*?<ul>/),t=new RegExp(/<\/ul>(.|\n)*?<\/li>/),o=e.$.mainContainer.firstElementChild.innerHTML;for(o=o.replace(/\r?\n|\r/g,""),o=o.replace(/<li(.|\n)*?>/g,"<li>"),o=o.replace(/<li><\/li>/g,"<li> </li>"),o=o.replace(/<ul(.|\n)*?>/g,"<ul>");n.test(o);){var i=n.exec(o),a="<jqx-"+e._element+"-items-group>"+i[0].slice(4,i[0].length-4);o=o.replace(i[0],a)}for(;t.test(o);){var r=t.exec(o),l="</jqx-"+e._element+"-items-group>";o=o.replace(r[0],l)}o=o.replace(/li>/g,"jqx-"+e._element+"-item>"),e.$.mainContainer.innerHTML=o}},{key:"_refreshContainersArrays",value:function(){for(var e=this,n=e._containers.length-1;n>=0;n--){var t=e._containers[n];if(!document.body.contains(t)){e._containers.splice(n,1);var o=e._containersFixedHeight.indexOf(t);o>-1&&(e._containersFixedHeight.splice(o,1),e._additionalScrollButtons.splice(o,1))}}e._checkContainersLength()}},{key:"_refreshItemPaths",value:function(e,n,t,o){var i=this,a=void 0;a=n?e:e.container.itemContainer;for(var r=t?t(e):a.children,l=0;l<r.length;l++){var s=r[l],d=void 0;o&&(s.originalIndex=l),d=n?""+l:e.path+"."+l,s.path=d,i._menuItems[d]=s,s instanceof JQX.MenuItemsGroup&&i._refreshItemPaths(s,void 0,t,o)}}},{key:"_removeContainerFixedHeight",value:function(){for(var e=this,n=0;n<e._containersFixedHeight.length;n++){var t=e._containersFixedHeight[n];t.style.height="",t.itemContainer.$.removeClass("scroll-buttons-shown"),t.itemContainer.$.removeClass("one-button-shown"),t.children[0].$.addClass("jqx-hidden"),t.children[2].$.addClass("jqx-hidden"),t.itemContainer.checkOverflow=!0}}},{key:"_removeContainersInBody",value:function(){var e=this;if(null!==e.dropDownAppendTo&&!e._minimized)for(var n=0;n<e._containersInBody.length;n++)e._dropDownParent.removeChild(e._containersInBody[n])}},{key:"_reparentMenu",value:function(e,n){var t=this;if("dropDown"===t.mode&&(null!==t._dropDownParent||e)&&t._dropDownParent!==t.parentElement){if(e&&null!==n){if(null===t._dropDownParent)return t._positionRelativeTo.appendChild(t),void(t._positionRelativeTo=null)}else t._positionRelativeTo=t.parentElement;t._dropDownParent.appendChild(t)}}},{key:"_resizeHandler",value:function(){var e=this;if(e._suppressResizeHandler)return void delete e._suppressResizeHandler;var n=e.minimizeWidth,t=e.mode;if(null!==n&&"dropDown"!==t){if(e.offsetWidth<=n&&!e._minimized)return void e.minimize();e.offsetWidth>n&&e.maximize()}null===e.dropDownAppendTo&&"tree"!==t||e._checkOverflow(e.$.mainContainer,"horizontal"===t,[e.$.scrollButtonNear,e.$.scrollButtonFar])}},{key:"_ripple",value:function(e,n){if(this.hasRippleAnimation&&"click"===n.type)return JQX.Utilities.Animation.Ripple.animate(e,n.pageX,n.pageY),!0}},{key:"_scroll",value:function(e){if(!e.closest("[template-applied]")){var n=this,t=n.mode,o=e.classList.contains("jqx-scroll-button-near")?-1:1;if(e.parentElement===n.$.container){var i=n.$.mainContainer;"tree"!==t&&n._closeSubContainers(2),"horizontal"===n.mode?(i.scrollLeft=i.scrollLeft+10*o,n._updateScrollButtonVisibility(i,!0,[n.$.scrollButtonNear,n.$.scrollButtonFar])):(i.scrollTop=i.scrollTop+10*o,n._updateScrollButtonVisibility(i,!1,[n.$.scrollButtonNear,n.$.scrollButtonFar]))}else{var a=e.parentElement,r=a.itemContainer;n._closeSubContainers(a.level+1),r.scrollTop=r.scrollTop+10*o,n._updateScrollButtonVisibility(r,!1,[a.children[0],a.children[2]])}}}},{key:"_selectionHandler",value:function(e,n){var t=this,o=e.target;if(o.closest("[template-applied]")&&e.stopPropagation(),!t.disabled&&!t.displayLoadingIndicator){if(void 0===n){if("click"===e.type){var i=o.closest("jqx-repeat-button");if(i)return void t._scroll(i,e)}if(!e.isTrusted)return;var a=o.closest("jqx-"+t._element+"-item");if(a)return void t._menuItemSelectionHandler(a,e);if((n=o.closest("jqx-"+t._element+"-items-group"))&&(o===n.container||o===n.container.firstElementChild))return}n&&!n.disabled&&t._menuItemsGroupSelectionHandler(n,e)}}},{key:"_setArrowDirection",value:function(e,n){var t=this,o=t.mode;if("tree"===o||t._minimized)return void(e.className="jqx-"+t._element+"-items-group-arrow down jqx-arrow-down");"overlay"!==t.dropDownPosition.slice(0,7)?2===n&&"horizontal"===o?"top"!==t.dropDownPosition.slice(0,3)?e.className="jqx-menu-items-group-arrow down jqx-arrow-down":e.className="jqx-menu-items-group-arrow up jqx-arrow-up":e.className="jqx-menu-items-group-arrow right jqx-arrow-right":e.className="jqx-menu-items-group-arrow minus"}},{key:"_setFocusable",value:function(){var e=this;if(e.disabled||e.unfocusable)return void e.removeAttribute("tabindex");var n=e.getAttribute("tabindex");(null===n||n<0)&&e.setAttribute("tabindex",0)}},{key:"_setLabel",value:function(e,n,t,o){
var i=document.getElementById(e);if(null!==i&&"template"===i.tagName.toLowerCase()){var a=document.importNode(i.content,!0);if(t instanceof JQX.MenuItem)n.appendChild(a),o&&(t.setAttribute("template-applied",""),t.templateApplied=!0);else if(JQX.ListMenu&&this instanceof JQX.ListMenu){for(var r=new RegExp(/{{title="(.*)"}}/),l=0;l<a.childNodes.length;l++)r.test(a.childNodes[l].innerHTML)?(t.titleLabel=r.exec(a.childNodes[l].innerHTML)[1],a.childNodes[l].innerHTML=a.childNodes[l].innerHTML.replace(r,"")):r.test(a.childNodes[l].textContent)&&(t.titleLabel=r.exec(a.childNodes[l].textContent)[1],a.childNodes[l].textContent=a.childNodes[l].textContent.replace(r,""));void 0===t.titleLabel&&(t.titleLabel=a.textContent),n.appendChild(a)}else n.innerHTML=e,t.titleLabel=e}else n.innerHTML=e,t instanceof JQX.MenuItemsGroup&&(t.titleLabel=e)}},{key:"_toggleItem",value:function(e){var n=this;if(n.checkboxes){var t=1===e.level?n:e.parentItem;if(t.checkable){var o=!1;return"checkbox"===t.checkMode?(o=!0,e.set("checked",!e.checked),n.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:e.checked})):e.checked||(o=!0,e.set("checked",!0),n._uncheckSiblings(e),n.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:!0})),e instanceof JQX.MenuItem&&o&&n.$.fireEvent("itemClick",{item:e,label:e.label,value:e.value}),"tree"!==n.mode&&"ListMenu"!==n.elementName&&(n._close(),n.close()),!0}}return!1}},{key:"_transitionendHandler",value:function(e){var n=this;"dropDown"===n.mode&&n.opened&&e.target===n&&document.activeElement!==n&&!n._noAutoFocus&&n.focus()}},{key:"_transitionendHandlerCollapse",value:function(){var e=void 0,n=void 0;if(1===arguments.length){if("visibility"===arguments[0].propertyName)return;n=this,e=n.menuItemsGroup.menu}else e=arguments[0],n=arguments[1];n.menuItemsGroup.$.removeClass("jqx-"+e._element+"-items-group-expanded"),n.removeEventListener("transitionend",e._transitionendHandlerCollapse),n.style.height=null,n.$.addClass("jqx-visibility-hidden"),e._checkOverflow(e.$.mainContainer,!1,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._minimized&&e._browserBoundsDetection(e.$.mainContainer),delete e._treeAnimationInProgress}},{key:"_transitionendHandlerExpand",value:function(){var e=void 0,n=void 0;if(1===arguments.length){if("visibility"===arguments[0].propertyName)return;n=this,e=n.menuItemsGroup.menu}else e=arguments[0],n=arguments[1];n.removeEventListener("transitionend",e._transitionendHandlerExpand),n.style.height=null,e._checkOverflow(e.$.mainContainer,!1,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._minimized&&e._browserBoundsDetection(e.$.mainContainer),e._ensureVisibleOnTransitionend&&(e._ensureVisible(e._ensureVisibleOnTransitionend),delete e._ensureVisibleOnTransitionend),delete e._treeAnimationInProgress}},{key:"_uncheckSiblings",value:function(e){for(var n=0;n<e.parentElement.childElementCount;n++){var t=e.parentElement.children[n];t!==e&&t.checked&&(t.set("checked",!1),this.$.fireEvent("itemCheckChange",{item:t,label:t.label,value:t.value,checked:!1}))}}},{key:"_unsortItems",value:function(e,n){var t=this,o=void 0,i=void 0,a=[];e===t.$.mainContainer?(i=e,o=e.children):(i=e.container.firstElementChild,o=i.children);for(var r=0;r<o.length;r++){var l=o[r];a[l.originalIndex]=l,l instanceof JQX.MenuItemsGroup&&void 0===n&&t._unsortItems(l)}if(!(a.length<2))for(var s=0;s<a.length;s++)i.appendChild(a[s])}},{key:"_updateScrollButtonVisibility",value:function(e,n,t){var o=this,i=o.overflow,a=e===o.$.mainContainer;if(!a||"hidden"!==i){var r=!0,l=!0,s=void 0,d=void 0,c=void 0;if(n?(s="scrollLeft",d="offsetWidth",c="scrollWidth"):(s="scrollTop",d="offsetHeight",c="scrollHeight"),0===Math.round(e[s])&&(r=!1),Math.round(e[d]+e[s])>=Math.round(e[c])&&(l=!1),a&&"auto"!==i)"scroll"!==i||o.disabled||(t[0].disabled=!r,t[1].disabled=!l);else{if(r&&l)return t[0].$.removeClass("jqx-hidden"),t[1].$.removeClass("jqx-hidden"),void e.classList.remove("one-button-shown");r?t[0].$.removeClass("jqx-hidden"):t[0].$.addClass("jqx-hidden"),l?t[1].$.removeClass("jqx-hidden"):t[1].$.addClass("jqx-hidden"),e.classList.add("one-button-shown")}}}},{key:"_validateRadioButtonSelection",value:function(e,n,t){var o=this;if(o.checkboxes){var i=void 0,a=void 0;if(1===n?(i=o,a=o.$.mainContainer):(i=e,a=e.itemContainer),"radioButton"===i.checkMode&&i.checkable)if(t.length>1)for(var r=t.length-2;r>=0;r--)t[r].set("checked",!1);else if(0===t.length){var l=o._getFirstEnabledChild(a);l&&l.set("checked",!0)}}}},{key:"_wheelHandler",value:function(e){var n=this;if(!n.enableMouseWheelAction||n._wheelInProgress||n.disabled||n.displayLoadingIndicator||n.$.mainContainer.offsetHeight===n.$.mainContainer.scrollHeight)return void(n._wheelInProgress&&e.preventDefault());e.preventDefault(),n._dragStartDetails={startY:e.pageY,x:e.pageX,y:e.pageY,startTime:Date.now(),target:e.target},n._wheelInProgress=!0;var t={pageY:e.pageY+50*(e.deltaY>0?-1:1)};n._endSwiping(t,n._dragStartDetails.startTime+100,!0)}},{key:"items",get:function(){return this._menuItems}}],[{key:"properties",get:function(){return{autoCloseDelay:{value:100,type:"number"},autoFocusOnMouseenter:{value:!1,type:"boolean"},checkable:{value:!1,type:"boolean"},checkboxes:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},closeAction:{value:"up",allowedValues:["up","down","none"],type:"string"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},displayMember:{value:"label",type:"string"},dropDownAppendTo:{value:null,type:"any?"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["top-left","top-right","bottom-left","bottom-right","overlay-left","overlay-right","auto"],type:"string"},enableMouseWheelAction:{value:!1,type:"boolean"},itemsMember:{value:"items",type:"string"},minimizeIconTemplate:{value:null,type:"string?"},minimizeWidth:{value:null,type:"number?"},mode:{value:"horizontal",allowedValues:["horizontal","vertical","dropDown","tree"],type:"string"},opened:{value:!1,type:"boolean"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},selectionMode:{value:"click",allowedValues:["click","mouseenter"],type:"string"},valueMember:{value:"value",type:"string"}}}},{key:"listeners",get:function(){return{"container.click":"_selectionHandler",keydown:"_keydownHandler",mouseenter:"_mouseenterHandler",mouseleave:"_mouseleaveHandler","container.mouseout":"_mouseoutMouseoverHandler","container.mouseover":"_mouseoutMouseoverHandler",resize:"_resizeHandler",transitionend:"_transitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","mainContainer.click":"_mainContainerHandler","mainContainer.mouseleave":"_mainContainerHandler","mainContainer.mouseout":"_mainContainerHandler","mainContainer.mouseover":"_mainContainerHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler"}}},{key:"requires",get:function(){return{"JQX.RepeatButton":"jqxbutton.js"}}},{key:"styleUrls",get:function(){return["jqx.button.css","jqx.menu.css"]}}]),n}(JQX.BaseElement));
//# sourceMappingURL=jqxmenu.js.map
