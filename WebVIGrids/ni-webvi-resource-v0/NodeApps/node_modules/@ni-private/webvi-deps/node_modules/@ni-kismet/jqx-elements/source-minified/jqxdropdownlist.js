"use strict";JQX("jqx-drop-down-list",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                    <span class="jqx-label" id="label">[[label]]</span>\n                    <div id="content" class="jqx-content">\n                        <div class="jqx-buttons-container" id="buttonsContainer">\n                            <span id="actionButton" class="jqx-input jqx-action-button"></span>\n                            <span id="dropDownButton" class="jqx-drop-down-button">\n                                <span id="arrow"></span>\n                            </span>\n                        </div>\n                        <div id="dropDownContainer" class="jqx-drop-down jqx-drop-down-container jqx-visibility-hidden">\n                            <jqx-list-box id="listBox" unfocusable\n                                    animation="[[animation]]"\n                                    data-source="[[dataSource]]"\n                                    disabled="[[disabled]]"\n                                    display-loading-indicator="[[displayLoadingIndicator]]"\n                                    display-member="[[displayMember]]"\n                                    filterable="[[filterable]]"\n                                    filter-callback="[[filterCallback]]"\n                                    filter-mode="[[filterMode]]"\n                                    filter-input-placeholder="[[filterInputPlaceholder]]"\n                                    grouped="[[grouped]]"\n                                    group-member="[[groupMember]]"\n                                    item-height="[[itemHeight]]"\n                                    item-template="[[itemTemplate]]"\n                                    incremental-search-delay="[[incrementalSearchDelay]]"\n                                    incremental-search-mode="[[incrementalSearchMode]]"\n                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"\n                                    loading-indicator-position="[[loadingIndicatorPosition]]"\n                                    name="[[name]]"\n                                    placeholder="[[dropDownPlaceholder]]"\n                                    readonly="[[readonly]]"\n                                    selected-indexes="{{selectedIndexes}}"\n                                    selection-mode="[[selectionMode]]"\n                                    selected-values="{{selectedValues}}"\n                                    sorted="[[sorted]]"\n                                    theme="[[theme]]"\n                                    value-member="[[valueMember]]"\n                                    horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"\n                                    vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]"\n                                    virtualized="[[virtualized]]">\n                                <content></content>\n                            </jqx-list-box>\n                            <div id="resizeBar" class="jqx-drop-down-resize-bar">\n                                <div></div>\n                            </div>\n                         </div>\n                    </div>\n                    <span class="jqx-hint" id="hint">[[hint]]</span>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,o,n){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,o,n);var i=this;switch(e){case"animation":i.$.dropDownContainer.setAttribute("animation",i.animation);break;case"disabled":i._setFocusable(),i.close(),i._positionDetection.handleAutoPositioning();break;case"dataSource":case"displayMember":case"inputMember":i.$.actionButton&&(i.$.actionButton.innerHTML=i.placeholder),i._setDropDownSize(),i._positionDetection.checkBrowserBounds("vertically"),i._positionDetection.positionDropDown(),i._positionDetection.checkBrowserBounds("horizontally");break;case"dropDownAppendTo":i._positionDetection.dropDownAppendToChangedHandler();break;case"dropDownOpenMode":i._setFocusable(),i.$dropDownContainer.addClass("jqx-visibility-hidden"),i.$.dropDownButton.removeAttribute("selected"),i.removeAttribute("drop-down-button-focus"),i.removeAttribute("action-button-focus"),i.opened=!1;break;case"dropDownOverlay":n||i._positionDetection.removeOverlay();break;case"dropDownPosition":i._positionDetection.dropDownPositionChangedHandler();break;case"dropDownMinWidth":case"dropDownWidth":case"dropDownMaxWidth":case"dropDownHeight":case"dropDownMinHeight":case"dropDownMaxHeight":i._setDropDownSize();break;case"opened":if(i.disabled||i.readonly)return;n?i.open():i.close();break;case"placeholder":i._applySelection();break;case"readonly":i.close();break;case"resizeIndicator":n?i.$.dropDownContainer.setAttribute("resize-indicator",""):i.$.dropDownContainer.removeAttribute("resize-indicator");break;case"resizeMode":i.$.dropDownContainer.setAttribute("resize-mode",i.resizeMode);break;case"selectedValues":case"selectedIndexes":0===n.length?i.$.actionButton.innerHTML=i.placeholder:i._applySelection();break;case"selectionDisplayMode":i._applySelection();break;case"tokenTemplate":i._tokenTemplate=i._validateTemplate(i.tokenTemplate),i._applySelection();break;case"unfocusable":i._setFocusable()}}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("jqx-resize-trigger-container")){var o=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,o.concat(Array.prototype.slice.call(arguments)))}if(!e)return void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}));t.$.listBox.appendChild(e),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize()}},{key:"attached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attached",this).call(this),e.isCompleted&&e.$.dropDownContainer&&(e._positionDetection.dropDownAttached("_setDropDownSize"),e._positionDetection.checkBrowserBounds())}},{key:"detached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detached",this).call(this),e.$.dropDownContainer&&(e.close(),e._positionDetection.dropDownDetached())}},{key:"clearItems",value:function(){var e=this;e.$.listBox&&(e.$.listBox.clearItems(),e.$.actionButton.innerHTML=e.placeholder)}},{key:"clearSelection",value:function(){var e=this;e.$.listBox&&(e.$.listBox.clearSelection(),e.$.actionButton.innerHTML=e.placeholder)}},{key:"close",value:function(){var e=this;if(!e.$dropDownContainer.hasClass("jqx-visibility-hidden")){e.$.fireEvent("closing").defaultPrevented||(e.$dropDownContainer.addClass("jqx-visibility-hidden"),e.$.fireEvent("close"),e.$.dropDownButton&&e.$.dropDownButton.removeAttribute("selected"),e.opened=!1,e._preventDropDownClose=!1,e._positionDetection.removeOverlay(!0),e._edgeMacFF&&!e.hasAnimation&&e.$.dropDownContainer&&(e.$.dropDownContainer.style.top=e.$.dropDownContainer.style.left="",e.$dropDownContainer.addClass("not-in-view")))}}},{key:"cloneNode",value:function(){var e=this;if(e.$.listBox){var t=HTMLElement.prototype.cloneNode.apply(e,Array.prototype.slice.call(arguments,0,1));return t.dataSource=e.dataSource,t}}},{key:"ensureVisible",value:function(e){var t=this;t.$.listBox&&t.$.listBox.ensureVisible(e)}},{key:"getItem",value:function(e){var t=this;if(t.$.listBox)return t.$.listBox.getItem(e)}},{key:"insert",value:function(e,t){var o=this;o.$.listBox&&(o.$.listBox.insert(e,t),o._applySelection(),o._dropDownSize&&"auto"===o._dropDownSize.height&&o._setDropDownSize())}},{key:"insertBefore",value:function(e,t){var o=this;if(!o.isCompleted){var n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(o,n.concat(Array.prototype.slice.call(arguments)))}if(!e||!t)return void o.error(o.localize("invalidNode",{elementType:o.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}));o.$.listBox&&(o.$.listBox.insertBefore(e,t),o._dropDownSize&&"auto"===o._dropDownSize.height&&o._setDropDownSize())}},{key:"open",value:function(){var e=this,t=function(){for(var t=0;t<e.items.length;t++)if(!e.items[t].disabled)return e.items[t]};if(!e.disabled&&e.offsetHeight&&e.$dropDownContainer.hasClass("jqx-visibility-hidden")){if(e.$dropDownContainer.hasClass("not-in-view")&&e.$dropDownContainer.removeClass("not-in-view"),e.$.dropDownContainer.style.transition=null,e.dropDownAppendTo&&e.dropDownAppendTo.length>0){var o=e.getBoundingClientRect();if(e.$.container.contains(e.$.dropDownContainer)){var n=0,i=setInterval(function(){var t=e.getBoundingClientRect();n++,t.top===e._positionTop&&n<10||(e.open(),clearInterval(i),e._positionTop=t.top)},100);return}o.top!==e._positionTop&&(e._positionTop=o.top)}e.$.fireEvent("opening").defaultPrevented||(e.opened=!0,e._positionDetection.placeOverlay(),e._positionDetection.checkBrowserBounds("vertically"),e._positionDetection.positionDropDown(),e._positionDetection.checkBrowserBounds("horizontally"),e.$dropDownContainer.removeClass("jqx-visibility-hidden"),e.$.fireEvent("open"),e.$.dropDownButton&&("dropDownButton"===e.dropDownOpenMode?e.$.dropDownButton.setAttribute("selected",""):e.$.dropDownButton.removeAttribute("selected")),(e.$.listBox&&!e._focusedItem||e._focusedItem&&!e._focusedItem._focused)&&(e.selectedIndexes.length>0?e._focus(e.items[e.selectedIndexes[0]]):e._focus(t)),e.$.input&&!JQX.Utilities.Core.isMobile&&e.$.input.focus())}}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);var e=this;e.$.dropDownContainer&&(e._positionDetection=new JQX.Utilities.PositionDetection(e,e.$.dropDownContainer,e.$.container,"close"),e._positionDetection.getDropDownParent(!0),e._positionDetection.setDropDownPosition(),e._calculateDropDownSize(),e.$.dropDownContainer.setAttribute("resize-mode",e.resizeMode),e.resizeIndicator&&e.$.dropDownContainer.setAttribute("resize-indicator",""),e._positionDetection.handleAutoPositioning()),e.opened&&e.open(),e._positionTop=e.getBoundingClientRect().top,e._edgeMacFF=JQX.Utilities.Core.Browser.Edge||JQX.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e._edgeMacFF&&e.hasAnimation&&e.$.dropDownContainer&&e.$dropDownContainer.addClass("not-in-view"),e._createElement()}},{key:"remove",value:function(e){var t=this;t.$.listBox&&(t.$.listBox.remove(e),t._applySelection(),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize())}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("jqx-resize-trigger-container")){var o=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,o.concat(Array.prototype.slice.call(arguments)))}if(!(e&&e instanceof JQX.ListItem))return void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}));t.$.listBox.removeChild(e),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize()}},{key:"select",value:function(e){var t=this;t.$.listBox&&t.$.listBox.select(e)}},{key:"_setFocusable",value:function(){var e=this;if(e.disabled||e.unfocusable)return e.removeAttribute("tabindex"),e.$.actionButton.removeAttribute("tabindex"),void e.$.dropDownButton.removeAttribute("tabindex");var t=e.tabIndex>0?e.tabIndex:0;"dropDownButton"===e.dropDownOpenMode?(e.removeAttribute("tabindex"),e.$.actionButton.setAttribute("tabindex",t),e.$.dropDownButton.setAttribute("tabindex",t)):(e.$.actionButton.removeAttribute("tabindex"),e.$.dropDownButton.removeAttribute("tabindex"),e.tabIndex=t)}},{key:"unselect",value:function(e){var t=this;t.$.listBox&&t.$.listBox.unselect(e)}},{key:"update",value:function(e,t){var o=this;o.$.listBox&&(o.$.listBox.update(e,t),o._applySelection())}},{key:"_resizeBarMoveHandler",value:function(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}},{key:"_createToken",value:function(){var e=this,t=void 0,o=document.createDocumentFragment(),n=e.selectedIndexes[e.selectedIndexes.length-1];t="plain"!==e.selectionDisplayMode||"one"!==e.selectionMode&&"zeroOrOne"!==e.selectionMode&&"radioButton"!==e.selectionMode?"tokens"===e.selectionDisplayMode?1===e.selectedIndexes.length&&["oneOrManyExtended","oneOrMany","one","radioButton"].indexOf(e.selectionMode)>-1?"":"&#10006":1===e.selectedIndexes.length?"":",":"";for(var i=e.selectedIndexes,r=e.$.listBox._items,a=0;a<i.length;a++){var l=i[a];r[l]&&o.appendChild(e._applyTokenTemplate(r[l][e.inputMember],"tokens"!==e.selectionDisplayMode&&l===n?"":t))}return o}},{key:"_applySelection",value:function(){var e=this;if("placeholder"===e.selectionDisplayMode||0===e.selectedIndexes.length)return void(e.$.actionButton.innerHTML=e.placeholder);e.$.listBox._items&&0!==e.$.listBox._items.length&&(e.$.actionButton.innerHTML="",e.$.actionButton.appendChild(e._createToken()))}},{key:"_applyTokenTemplate",value:function(e,t){var o=this,n=document.createElement("span"),i=function(){return"<span class='jqx-drop-down-list-selection-label'>"+e+"</span><span class='jqx-drop-down-list-unselect-button'>"+t+"</span>"};if(n.classList.add("jqx-token"),o._tokenTemplate)for(var r=document.importNode(o._tokenTemplate.content,!0),a=r.childNodes.length,l=/{{\w+}}/g,s=void 0,d=0;d<a;d++)s=l.exec(r.childNodes[d].innerHTML),s&&(r.childNodes[d].innerHTML=r.childNodes[d].innerHTML.replace(s[0],i())),r.childNodes[d].outerHTML&&(n.innerHTML+=r.childNodes[d].outerHTML);else"function"==typeof o.tokenTemplate?o.tokenTemplate(n,{label:e,iconSeparator:t}):n.innerHTML=i();return n}},{key:"_bindingCompleteHandler",value:function(){var e=this;e.$.listBox&&requestAnimationFrame(function(){e._setDropDownSize(),e._positionDetection.checkBrowserBounds()})}},{key:"_buttonsDownHandler",value:function(e){var t=this;if(!t.disabled){if(t.hasRippleAnimation)if(t.$.buttonsContainer&&"dropDownButton"!==t.dropDownOpenMode){var o=t.$.buttonsContainer;o.firstElementChild.noRipple=!0,JQX.Utilities.Animation.Ripple.animate(o,e.pageX,e.pageY),o.firstElementChild.noRipple=!1}else JQX.Utilities.Animation.Ripple.animate(e.target,e.pageX,e.pageY);t._preventsSelectStart=!0,"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.actionButton&&t.$.actionButton.setAttribute("active",""),t.opened&&(t._preventDropDownClose=!0)}}},{key:"_buttonsMouseEventsHandler",value:function(e){var t=this;t.disabled||("mouseenter"===e.type?(t.setAttribute("hover",""),e.target.setAttribute("hover","")):(t.removeAttribute("hover"),e.target.removeAttribute("hover")))}},{key:"_calculateDropDownSize",value:function(){var e=this;e._dropDownSize={};var t=window.getComputedStyle(e.$.dropDownContainer),o=parseFloat(t.getPropertyValue("border-top-width").trim()),n=parseFloat(t.getPropertyValue("border-bottom-width").trim()),i=parseFloat(t.getPropertyValue("margin-top").trim()),r=parseFloat(t.getPropertyValue("margin-bottom").trim()),a=parseFloat(t.getPropertyValue("padding-top").trim()),l=parseFloat(t.getPropertyValue("padding-bottom").trim());JQX.Utilities.Core.CSSVariablesSupport()&&(e._dropDownSize.width=t.getPropertyValue("--jqx-drop-down-list-drop-down-width").trim(),e._dropDownSize.height=t.getPropertyValue("--jqx-drop-down-list-drop-down-height").trim()),(!e._dropDownSize.width||e._dropDownSize.width.indexOf("initial")>-1)&&(e._dropDownSize.width=e.offsetWidth),e._dropDownSize.height||(e._dropDownSize.height="auto"),e._dropDownSize.minHeight=parseFloat(t.getPropertyValue("min-height").trim()),e._dropDownSize.maxHeight=parseFloat(t.getPropertyValue("max-height").trim()),e._dropDownSize.borderWidth=(isNaN(o)?0:o)+(isNaN(n)?0:n),e._dropDownSize.paddingWidth=(isNaN(a)?0:a)+(isNaN(l)?0:l),e._dropDownSize.marginWidth=(isNaN(i)?0:i)+(isNaN(r)?0:r)}},{key:"_createElement",value:function(){var e=this;e._tokenTemplate=e._validateTemplate(e.tokenTemplate),e._applySelection(),e._setDropDownSize(),e._setFocusable(),e.$.arrow.noRipple=!0}},{key:"_documentDownHandler",value:function(e){var t=this;if(!t.disabled&&!t.readonly){var o=e.originalEvent.target;if(o===t._overlay&&(t._overlayDown=!0),t.enableShadowDOM){o=e.originalEvent.composedPath()[0];for(var n=o.getRootNode().host;n;)n.closest(".jqx-drop-down-container")===t.$.dropDownContainer&&(t._isDropDownClicked=!0),n=n.getRootNode().host}else t._isDropDownClicked=o.closest(".jqx-drop-down-container")===t.$.dropDownContainer;if(t._buttonClicked=o.closest(".jqx-action-button")||o.closest(".jqx-drop-down-button"),t.$.listBox){var i=o.closest("jqx-list-item");t.$.listBox.contains(i)||(i=void 0),t.hasRippleAnimation&&i&&JQX.Utilities.Animation.Ripple.animate(i,e.pageX,e.pageY),(i||o===t.$.listBox.$.filterInput||o.closest(".jqx-token"))&&(t._preventDropDownClose=!0)}if(t._isDropDownClicked&&(t._preventDropDownClose=!0),o===t.$.resizeBar&&"none"!==t.resizeMode){t._resizeDetails||(t._resizeDetails={});var r=t.$.dropDownContainer.getBoundingClientRect();t._resizeDetails.started=!0,t._resizeDetails.x=e.pageX,t._resizeDetails.y=e.pageY,t._resizeDetails.width=t.$.dropDownContainer.offsetWidth,t._resizeDetails.height=t.$.dropDownContainer.offsetHeight,t._resizeDetails.offsetXL=e.clientX-r.left,t._resizeDetails.offsetXR=r.left+t.$.dropDownContainer.offsetWidth-e.clientX,t._resizeDetails.offsetY=r.top+t.$.dropDownContainer.offsetHeight-e.clientY,t._resizeDetails.offsetYtop=e.clientY-r.top,t._preventDropDownClose=!0}}}},{key:"_documentMoveHandler",value:function(e){function t(){if(d=e.pageY-n._resizeDetails.y,"bottom"===s)n._resizeDetails.height=Math.min(r.clientHeight-a.top-6,Math.max(0,n._resizeDetails.height+d)),n._resizeDetails.y=Math.max(a.top+r.scrollTop-n._resizeDetails.offsetY,Math.min(r.clientHeight+r.scrollTop-1.5*n._resizeDetails.offsetY,e.pageY));else{if(n._resizeDetails.height=Math.min(n._dropDownSize.maxHeight,Math.max(0,Math.min(l.top,n._resizeDetails.height-d))),d=Math.max(0,a.top+(a.height-Math.max(n._dropDownSize.minHeight,n._resizeDetails.height))),n.dropDownAppendTo&&n.dropDownAppendTo.length>0){var t=Math.abs(parseFloat(getComputedStyle(n.$.dropDownContainer).getPropertyValue("margin-bottom")))||0;n.$.dropDownContainer.style.top=n.dropDownAppendTo&&n.dropDownAppendTo.length>0?t+d+"px":""}var o=l.top+r.scrollTop+n._resizeDetails.offsetYtop;n._resizeDetails.y=Math.max(n._resizeDetails.offsetYtop,Math.min(o,Math.max(o-n._dropDownSize.maxHeight,e.pageY)))}n.$.dropDownContainer.style.height=n._resizeDetails.height+"px"}function o(){d=e.pageX-n._resizeDetails.x,n._resizeDetails.width=Math.min(r.clientWidth-a.left-6,Math.max(0,n._resizeDetails.width+d)),n.$.dropDownContainer.style.width=n._resizeDetails.width+"px",n._resizeDetails.x=Math.max(a.left+r.scrollLeft-n._resizeDetails.offsetXR,Math.min(r.clientWidth+r.scrollLeft-1.5*n._resizeDetails.offsetXR,e.pageX))}var n=this,i=n.enableShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if("auto"===n.dropDownOpenMode&&null!==n.dropDownAppendTo&&(n.contains(i)||n.$.dropDownContainer.contains(i)?n._isElementHovered=!0:(n._isElementHovered=!1,n._autoClose())),n._resizeDetails&&(!n._resizeDetails||n._resizeDetails.started)){n.setAttribute("resizing",""),n._resizeDetails.resizeEventFired||(n.$.fireEvent("resizeStart",{position:{left:e.pageX,top:e.pageY}}),n._resizeDetails.resizeEventFired=!0);var r=document.documentElement,a=n.$.dropDownContainer.getBoundingClientRect(),l=n.getBoundingClientRect(),s=n.$.dropDownContainer.hasAttribute("top")?"top":"bottom",d=void 0;switch(n.resizeMode){case"vertical":t();break;case"horizontal":o();break;case"both":o(),t()}}}},{key:"_documentUpHandler",value:function(e){var t=this;if(t.$.actionButton.removeAttribute("active"),t._resizeDetails&&t._resizeDetails.started)return t._resizeDetails.started=t._resizeDetails.resizeEventFired=!1,t.removeAttribute("resizing"),t._preventDropDownClose=!1,t.focus(),void t.$.fireEvent("resizeEnd",{position:{left:e.pageX,top:e.pageY}});if(t.disabled||t._isDropDownClicked||t.readonly)return void delete t._isDropDownClicked;if(t._overlayDown)return t.close(),void delete t._overlayDown;var o=e.originalEvent.target,n=o.closest?o.closest("jqx-drop-down-list"):void 0;if(t.enableShadowDOM&&(o=e.originalEvent.composedPath()[0],n=o.getRootNode().host),t._preventsSelectStart=!1,void 0!==o&&o!==t.$.resizeBar){if("tokens"===t.selectionDisplayMode&&o.classList.contains("jqx-drop-down-list-selection-label")&&n===t){"none"!==t.dropDownOpenMode&&t.open();var i=t.$.listBox._items.filter(function(e){return e[t.inputMember].toString()===o.textContent})[0];return t.$.listBox._scrollView.scrollTop=i.offsetTop,void t._focus(i)}if("tokens"===t.selectionDisplayMode&&o.classList.contains("jqx-drop-down-list-unselect-button")&&n===t){if(1===t.selectedIndexes.length&&["zeroOrMany","zeroOrOne","checkBox"].indexOf(t.selectionMode)<0)return;return void t.unselect(t.$.listBox._items.filter(function(e){return e[t.inputMember].toString()===o.previousElementSibling.textContent})[0])}var r=o.closest(".jqx-action-button");if(t._buttonClicked&&("dropDownButton"===t.dropDownOpenMode&&r&&t._buttonClicked===t.$.actionButton?t.$.fireEvent("actionButtonClick"):o.closest(".jqx-drop-down-button")!==t._buttonClicked&&r!==t._buttonClicked||t.$.fireEvent("dropDownButtonClick")),t._buttonClicked=void 0,r===t.$.actionButton||o.closest(".jqx-drop-down-button")===t.$.dropDownButton)return"dropDownButton"===t.dropDownOpenMode&&r===t.$.actionButton?void t.close():void(t.$dropDownContainer.hasClass("jqx-visibility-hidden")&&"none"!==t.dropDownOpenMode?t.open():t.close());o=t._getUpEventTarget(o),void 0!==o&&("dropDownContainer"!==o&&"item"!==o||"item"===o&&"checkBox"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0)&&t.close()}}},{key:"_dragStartHandler",value:function(e){var t=this;t._resizeDetails&&t._resizeDetails.started&&e.preventDefault()}},{key:"_dropDownTransitionendHandler",value:function(){var e=this;e._edgeMacFF&&!e.opened&&e.hasAnimation&&(e.$.dropDownContainer.style.top=e.$.dropDownContainer.style.left="",e.$dropDownContainer.addClass("not-in-view"))}},{key:"_focus",value:function(e){this.$.listBox._focus(e)}},{key:"_blurEventHandler",value:function(){var e=this;e.$.dropDownButton&&(e.removeAttribute("focus"),e.$.dropDownButton.removeAttribute("focus")),e.$.actionButton&&(e.removeAttribute("focus"),e.$.actionButton.removeAttribute("focus")),e.nodeName&&"JQX-DROP-DOWN-LIST"===e.nodeName&&!e._preventDropDownClose&&e.close()}},{key:"_focusEventHandler",value:function(){var e=this;e.$.dropDownButton&&(e.setAttribute("focus",""),e.$.dropDownButton.setAttribute("focus","")),e.$.actionButton&&(e.setAttribute("focus",""),e.$.actionButton.setAttribute("focus","")),e.removeAttribute("drop-down-button-focus"),e.removeAttribute("action-button-focus")}},{key:"_buttonsFocusHandler",value:function(e){var t=this;e.target===t.$.dropDownButton?"focus"===e.type?t.setAttribute("drop-down-button-focus",""):(t.removeAttribute("drop-down-button-focus"),t.nodeName&&"JQX-DROP-DOWN-LIST"===t.nodeName&&!t._preventDropDownClose&&t.close()):"focus"===e.type?t.setAttribute("action-button-focus",""):t.removeAttribute("action-button-focus")}},{key:"_getUpEventTarget",value:function(e){for(var t=this,o=e;o;){if(o instanceof JQX.ListItem&&o.ownerListBox===t.$.listBox){if(o.unselectable||o.disabled)return;o="item";break}if(o===t.$.dropDownContainer){o="dropDownContainer";break}o=o.parentElement}if(t.enableShadowDOM&&null!==o)for(o=e.getRootNode().host;o;){if(o===t.$.dropDownContainer){o="dropDownContainer";break}o=o.parentElement}return o}},{key:"_keyDownHandler",value:function(e){var t=this,o=t.enableShadowDOM?t.shadowRoot.activeElement||document.activeElement:document.activeElement,n=t.enableShadowDOM?e.composedPath()[0]:e.target;if(!(t.$.listBox&&n===t.$.listBox.$.filterInput||o!==t&&o!==t.$.dropDownButton&&o!==t.$.actionButton))switch(e.key){case"Enter":case" ":n.setAttribute("active",""),e.preventDefault(),n!==t.$.actionButton&&(t._keyPressed=!0,t.opened?(t._focusedItem&&t.select(t._focusedItem),("Enter"===e.key&&["none"].indexOf(t.selectionMode)<0||" "===e.key&&["none","one","radioButton"].indexOf(t.selectionMode)>-1)&&t.close()):t.opened||t.readonly||"none"===t.dropDownOpenMode||t.open());break;case"End":case"Home":case"PageUp":case"PageDown":case"ArrowUp":case"ArrowDown":if(t.readonly)return;if(e.altKey)return t._keyPressed=!1,void(t.$dropDownContainer.hasClass("jqx-visibility-hidden")?t.open():t.close());e.preventDefault(),t.$.listBox._handleKeyStrokes(e.key);break;case"Escape":e.preventDefault(),t.close();break;default:if(t.readonly)return;"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!0),t.$.listBox._applyIncrementalSearch(e.key)}}},{key:"_keyUpHandler",value:function(e){var t=this,o=t.enableShadowDOM?e.composedPath()[0]:e.target;t.$.listBox&&o===t.$.listBox.$.filterInput||("Enter"!==e.key&&" "!==e.key||(o.removeAttribute("active"),t.$dropDownContainer.hasClass("jqx-visibility-hidden")||(t._keyPressed=!1)),t.$.listBox&&"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!1))}},{key:"_listBoxChangeHandler",value:function(e){var t=this;if((t.dropDownAppendTo&&t.dropDownAppendTo.length>0||t.enableShadowDOM)&&t.$.fireEvent("change",e.detail),"list"===t.autoComplete&&e.detail){var o=t.$.listBox._items[e.detail.index];t._lastSelectedItem=o||void 0}t._applySelection(t.selectionMode,e.detail)}},{key:"_listBoxItemClickHandler",value:function(e){var t=this;(t.dropDownAppendTo&&t.dropDownAppendTo.length>0||t.enableShadowDOM)&&t.$.fireEvent(e.type,e.detail),"checkBox"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0&&t.close(),"JQX-COMBO-BOX"!==t.nodeName||JQX.Utilities.Core.isMobile||t.$.input.focus(),delete t._isDropDownClicked}},{key:"_listBoxKeyDownHandler",value:function(e){var t=this;return"Enter"===e.key?(t.close(),"dropDownButton"===t.dropDownOpenMode?t.$.dropDownButton.focus():t.focus(),void e.stopPropagation()):"Escape"===e.key?void t.close():void 0}},{key:"_mouseEnterHandler",value:function(){var e=this;e._isElementHovered=!0,e.tagName.indexOf("JQX-DROP-DOWN-")>-1&&"auto"===e.dropDownOpenMode&&!e.disabled&&!e.readonly&&e.open()}},{key:"_mouseLeaveHandler",value:function(){var e=this;e.removeAttribute("hover"),e._isElementHovered=!1,"auto"!==e.dropDownOpenMode||e.disabled||e.readonly||e._autoClose()}},{key:"_mouseWheelHandler",value:function(e){var t=this;t.disabled||t.readonly||t.items&&0===t.items.length||t.$dropDownContainer&&!t.$dropDownContainer.hasClass("jqx-visibility-hidden")||t.$.listBox&&(e.preventDefault(),t.$.listBox._handleKeyStrokes(e.deltaY>0?"ArrowDown":"ArrowUp"))}},{key:"_autoClose",value:function(){var e=this;e._autoCloseTimeout=setTimeout(function(){e._isElementHovered||e.close(),clearTimeout(e._autoCloseTimeout)}.bind(e),e.autoCloseDelay)}},{key:"_propertyValidator",value:function(e,t){return"number"!=typeof t&&"string"!=typeof t?e:t}},{key:"_resizeHandler",value:function(){var e=this;"none"===e.resizeMode&&(e._calculateDropDownSize(),e._setDropDownSize())}},{key:"_selectStartHandler",value:function(e){this._preventsSelectStart&&e.preventDefault()}},{key:"_setDropDownSize",value:function(){var e=this;if(e._dropDownSize||e._calculateDropDownSize(),["dropDownMinWidth","dropDownMinHeight","dropDownMaxWidth","dropDownMaxHeight"].forEach(function(t){e.$.dropDownContainer.style[t.replace("dropDown","").replace(/^./,"m")]=e[t]?e[t]+(e[t].toString().endsWith("%")?"%":"px"):null}),e.dropDownWidth){if("auto"!==e.dropDownWidth)e.$.dropDownContainer.style.width=("initial"===e.dropDownWidth?e.offsetWidth:parseFloat(e.dropDownWidth))+"px";else if(e.$.dropDownContainer.style.width="auto",e.$.listBox){var t=2+2*parseInt(window.getComputedStyle(e.$.listBox.$.itemsContainer).getPropertyValue("--jqx-list-item-horizontal-offset"));e.$.dropDownContainer.style.width=t+e.$.listBox._scrollWidth+"px"}}else e.$.dropDownContainer.style.width="auto"===e._dropDownSize.width?"auto":(parseFloat(e._dropDownSize.width)||0)+"px";if(e.dropDownHeight&&"auto"!==e.dropDownHeight)e.$.dropDownContainer.style.height=parseFloat(e.dropDownHeight)+((e.dropDownHeight+"").indexOf("%")>-1?"%":"px");else if(!e.$.listBox||"auto"!==e._dropDownSize.height&&"auto"!==e.dropDownHeight)e.$.dropDownContainer.style.height=e._dropDownSize.height;else{e.$.dropDownContainer.style.height="";var o=2*parseInt(window.getComputedStyle(e.$.listBox.$.itemsContainer).getPropertyValue("--jqx-list-item-vertical-offset"));isNaN(o)&&(o=6);var n=o;e.$.listBox.items.length>0&&e.$.listBox.items.map(function(e){return n+=e.height||e.offsetHeight}),n=n+e._dropDownSize.paddingWidth+e._dropDownSize.borderWidth,e.$.dropDownContainer.style.height=n+"px"}e.$.listBox&&e.$.listBox._refreshLayout()}},{key:"_styleChangedHandler",value:function(e){var t=this;if(t.dropDownAppendTo&&t.dropDownAppendTo.length>0)for(var o=e.detail.styleProperties,n=["font-size","font-family","font-style","font-weight"],i=0;i<n.length;i++)o[n[i]]&&(t.$.dropDownContainer.style[n[i]]=o[n[i]].value);"auto"===t._dropDownSize.height&&t._setDropDownSize()}},{key:"_validateTemplate",value:function(e){var t=this;if(e&&"function"!=typeof e)return"content"in document.createElement("template")?(e instanceof HTMLTemplateElement||(e=document.getElementById(e)),null!==e&&"content"in e?e:void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"tokenTemplate"}))):void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}))}},{key:"items",get:function(){var e=this;if(e.$&&e.$.listBox)return e.$.listBox.items}},{key:"_focusedItem",get:function(){var e=this;if(e.$&&e.$.listBox)return e.$.listBox._focusedItem}}],[{key:"properties",get:function(){return{autoCloseDelay:{value:100,type:"number"},dataSource:{value:null,type:"any",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownButtonPosition:{allowedValues:["none","left","right","top","bottom"],value:"right",type:"string"},dropDownMinHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"default",type:"string"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPlaceholder:{value:"No Items",type:"string"},dropDownPosition:{allowedValues:["auto","top","bottom","overlay-top","overlay-center","overlay-bottom","center-bottom","center-top"],value:"auto",type:"string"},dropDownMinWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxWidth:{value:"",type:"any",validator:"_propertyValidator"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterCallback:{value:null,type:"function?"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},hint:{value:"",type:"string"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",
allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},inputMember:{value:"label",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},label:{value:"",type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},placeholder:{value:"",type:"string"},renderMode:{allowedValues:["outlined","filled","underlined"],value:"outlined",type:"string"},resizeMode:{value:"none",allowedValues:["none","horizontal","vertical","both"],type:"string"},resizeIndicator:{value:!1,type:"boolean"},selectionDisplayMode:{value:"plain",allowedValues:["plain","placeholder","tokens"],type:"string"},selectionMode:{value:"one",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},sorted:{value:!1,type:"boolean"},tokenTemplate:{value:null,type:"any"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}},{key:"listeners",get:function(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","actionButton.focus":"_buttonsFocusHandler","actionButton.blur":"_buttonsFocusHandler","document.selectstart":"_selectStartHandler","document.dragstart":"_dragStartHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.move":"_documentMoveHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",focus:"_focusEventHandler",blur:"_blurEventHandler","dropDownButton.focus":"_buttonsFocusHandler","dropDownButton.blur":"_buttonsFocusHandler","dropDownContainer.transitionend":"_dropDownTransitionendHandler","listBox.change":"_listBoxChangeHandler","listBox.itemClick":"_listBoxItemClickHandler","listBox.keydown":"_listBoxKeyDownHandler","listBox.bindingComplete":"_bindingCompleteHandler",mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler",resize:"_resizeHandler","resizeBar.move":"_resizeBarMoveHandler",styleChanged:"_styleChangedHandler",wheel:"_mouseWheelHandler"}}},{key:"styleUrls",get:function(){return["jqx.dropdownlist.css","jqx.dropdown.css"]}},{key:"requires",get:function(){return{"JQX.ListBox":"jqxlistbox.js"}}}]),t}(JQX.ContentElement));
//# sourceMappingURL=jqxdropdownlist.js.map
