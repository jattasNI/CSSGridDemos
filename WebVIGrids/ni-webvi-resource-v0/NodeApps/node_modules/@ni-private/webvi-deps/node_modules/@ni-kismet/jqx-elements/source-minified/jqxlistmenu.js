"use strict";JQX("jqx-list-menu",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="hamburgerIcon" class="jqx-hamburger-icon jqx-hidden">\n                        <div id="hamburgerIconLineTop" class="jqx-hamburger-icon-line jqx-hamburger-icon-line-top"></div>\n                        <div id="hamburgerIconLineCenter" class="jqx-hamburger-icon-line jqx-hamburger-icon-line-center"></div>\n                        <div id="hamburgerIconLineBottom" class="jqx-hamburger-icon-line jqx-hamburger-icon-line-bottom"></div>\n                        <div id="customIconContainer" class="jqx-hamburger-icon-custom-container jqx-hidden"></div>\n                    </div>\n                    <div id="view" class="jqx-list-menu-view">\n                        <div id="header" class="jqx-header jqx-hidden">\n                            <jqx-button id="backButton" animation="[[animation]]" disabled="[[disabled]]" unfocusable>\n                                <div class="jqx-arrow jqx-arrow-left"></div>\n                            </jqx-button>\n                            <div id="title" class="jqx-title"></div>\n                        </div>\n                        <div class="jqx-list-menu-filter-input-container jqx-hidden" id="filterInputContainer">\n                            <input id="filterInput" class="jqx-filter-input" disabled="[[disabled]]" placeholder="[[filterInputPlaceholder]]" type="text" />\n                        </div>\n                        <jqx-repeat-button id="scrollButtonNear" class="jqx-menu-scroll-button jqx-spin-button jqx-scroll-button-near jqx-hidden" animation="[[animation]]" unfocusable>\n                            <div id="arrowNear" class="jqx-arrow jqx-arrow-up"></div>\n                        </jqx-repeat-button>\n                        <div id="mainContainer" class="jqx-menu-main-container">\n                            <content></content>\n                        </div>\n                        <jqx-repeat-button id="scrollButtonFar" class="jqx-menu-scroll-button jqx-spin-button jqx-scroll-button-far jqx-hidden" animation="[[animation]]" unfocusable>\n                            <div id="arrowFar" class="jqx-arrow jqx-arrow-down"></div>\n                        </jqx-repeat-button>\n                        <div id="loadingIndicatorContainer" class="jqx-loader-container jqx-hidden">\n                            <span id="loadingIndicator" class="jqx-loader"></span>\n                            <span id="loadingIndicatorPlaceHolder" class="jqx-loader-label jqx-hidden">[[loadingIndicatorPlaceholder]]</span>\n                        </div>\n                    </div>\n                </div>'}},{key:"attached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attached",this).call(this),e.isCompleted&&null!==e.dropDownAppendTo&&e._minimized&&e._dropDownParent.appendChild(e.$.view)}},{key:"detached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detached",this).call(this),e._close(),null!==e.dropDownAppendTo&&e._minimized&&e._dropDownParent.removeChild(e.$.view)}},{key:"addItem",value:function(e,t){var i=this;if(e instanceof JQX.MenuItem||e instanceof JQX.MenuItemsGroup){var n=void 0,o=void 0,a=void 0,r=void 0;if(void 0===t)t=i.$.mainContainer,n=void 0,o=1,a=t,r=i._topLevelFilter;else{if("string"==typeof t&&(t=i.getItem(t)),void 0===t||!(t instanceof JQX.MenuItemsGroup)||!i.contains(t)&&t.closest(".jqx-list-menu-view")!==i.$.view)return;n=t,o=t.level+1,a=t.itemContainer,r=t.filter}if(i._createItemHTMLStructure(e,o,t,i._getCurrentViewItems(n).length,0),e instanceof JQX.MenuItemsGroup&&i._processHTML(e,o+1),i._view!==t&&!t.$.hasClass("jqx-hidden")&&t.offsetHeight>0&&t.offsetWidth>0&&(!i._view&&!i.$.mainContainer.contains(t)||i._view&&!i._view.contains(t))&&e.$.addClass("jqx-hidden"),i.grouped){for(var l=Array.from(a.children),s=l.length-1;s>=0;s--)l[s].$.hasClass("jqx-list-menu-group-label")&&a.removeChild(l[s]);i._unsortItems(t,!0)}if(a.appendChild(e),i.grouped){var d=i._view;i._applyGrouping(t,!0),i._home(),d&&i.changePage(d.path)}i.filterable&&void 0!==r&&""!==r&&null===i._findItem(e,r)&&(e.$.addClass("jqx-hidden"),e.hidden=!0),i._toggleFilterInputGroupLabelVisibility(),i._checkOverflow()}}},{key:"back",value:function(e){var t=this,i=t.animation,n=!1===e&&"none"!==i;n&&(t.animation="none"),t._backButtonClickHandler(),n&&(t.animation=i)}},{key:"changePage",value:function(e){var t=this,i=t.getItem(e);if(!(void 0===i||i instanceof JQX.MenuItem||i.hidden)){var n=[i],o=i.parentItem,a=0;for(t._discardKeyboardHover();o;)n.unshift(o),o=o.parentItem;if(t._view){var r=n.indexOf(t._view);-1===r?t._home():a=r+1}for(var l=a;l<n.length&&(!n[l].disabled&&!n[l].hidden);l++)t._menuItemsGroupSelectionHandler(n[l],{type:"expand"},!0)}}},{key:"maximize",value:function(){var e=this;if(e._minimized){if(e._positionDetection.removeOverlay(),e._minimized=!1,e._minimizedDropDownOpened&&(e.$hamburgerIcon.removeClass("jqx-close-button"),e._minimizedDropDownOpened=!1),null!==e.dropDownAppendTo&&e._appendMinimizedContainerToMenu(e.$.view,null),e.$view.removeClass("jqx-visibility-hidden"),e.$view.removeClass("jqx-list-menu-view-minimized"),e.$hamburgerIcon.addClass("jqx-hidden"),e.removeAttribute("minimized"),e.enableShadowDOM){e.$.view.id=e.$.view.getAttribute("jqx-id");for(var t=e.$.view.querySelectorAll("[jqx-id]"),i=0;i<t.length;i++)t[i].id=t[i].getAttribute("jqx-id")}e.$.mainContainer.scrollTop=0,e._checkOverflow()}}},{key:"minimize",value:function(){var e=this;if(!e._minimized){if(e.$view.addClass("jqx-visibility-hidden"),e.enableShadowDOM){e.$.view.removeAttribute("id");for(var t=e.$.view.querySelectorAll("[jqx-id]"),i=0;i<t.length;i++)t[i].removeAttribute("id")}e._edgeMacFF&&e.$view.addClass("not-in-view"),e.$hamburgerIcon.removeClass("jqx-hidden"),setTimeout(function(){null!==e.dropDownAppendTo&&e._appendMinimizedContainerToExternalElement(e.$.view),e.$view.addClass("jqx-list-menu-view-minimized"),e.$.mainContainer.scrollTop=0,e._checkOverflow()},0),e._minimized=!0,e.setAttribute("minimized","")}}},{key:"removeItem",value:function(e){var t=this;if("string"==typeof e&&(e=t.getItem(e)),void 0!==e&&(e instanceof JQX.MenuItem||e instanceof JQX.MenuItemsGroup)&&(t.contains(e)||e.closest(".jqx-list-menu-view")===t.$.view)){for(var i=e.parentElement;e.contains(t._view);)t._backButtonClickHandler(void 0,!0);var n=t._view;t.grouped&&(t._home(),t._discardGrouping()),i.removeChild(e),t._menuItems={},t._refreshItemPaths(t.$.mainContainer,!0,function(e){return t._getCurrentViewItems(e===t.$.mainContainer?void 0:e)}),t.grouped&&(t._applyGrouping(t.$.mainContainer),n&&t.changePage(n.path)),t._toggleFilterInputGroupLabelVisibility(),t._checkOverflow()}}},{key:"propertyChangedHandler",value:function(e,i,n){if("disabled"===e||"dropDownOverlay"===e||"minimizeIconTemplate"===e||"minimizeWidth"===e||"overflow"===e||"unfocusable"===e)return void babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,i,n);var o=this;switch(e){case"animation":o.$.view.setAttribute("animation",n);break;case"checkable":case"checkboxes":o._minimized&&null!==o.dropDownAppendTo&&(n?o.$.view.setAttribute(e,""):o.$.view.removeAttribute(e));break;case"checkMode":o._changeToRadioButtonMode(n,o.$.mainContainer),o._minimized&&null!==o.dropDownAppendTo&&o.$.view.setAttribute("check-mode",n);break;case"dataSource":o.$header.addClass("jqx-hidden"),o.$mainContainer.removeClass("header-shown"),o._view=void 0,o._menuItems={},o._topLevelFilter="",o._processDataSource(),o._toggleFilterInputGroupLabelVisibility(),o._checkOverflow();break;case"displayLoadingIndicator":if(n){var a=o.$.mainContainer.querySelector("[hover]");a&&a.removeAttribute("hover"),o._discardKeyboardHover(),o.$loadingIndicatorContainer.removeClass("jqx-hidden")}else o.$loadingIndicatorContainer.addClass("jqx-hidden");break;case"dropDownAppendTo":var r=o._dropDownParent;if(o._positionDetection.getDropDownParent(),o._dropDownParent===r||!o._minimized)return;o._close(),null===n?o._appendMinimizedContainerToMenu(o.$.view,null):o._appendMinimizedContainerToExternalElement(o.$.view),o.$.mainContainer.scrollTop=0,o._checkOverflow();break;case"dropDownPosition":o._close(),o._minimized&&null!==o.dropDownAppendTo&&o.$.view.setAttribute("drop-down-position",n);break;case"filterable":if(o._toggleFilterInputGroupLabelVisibility(!0),!1===n){""!==o._topLevelFilter&&o._applyFilter("");for(var l=o._filteredLowerLevelGroups.length-1;l>=0;l--)o._applyFilter("",o._filteredLowerLevelGroups[l])}o._checkOverflow();break;case"filterMode":if(!o.filterable)return;""!==o._topLevelFilter&&o._applyFilter(o._topLevelFilter);for(var s=o._filteredLowerLevelGroups.length-1;s>=0;s--)o._applyFilter(o._filteredLowerLevelGroups[s].filter,o._filteredLowerLevelGroups[s]);break;case"grouped":o._home(),n?o._applyGrouping(o.$.mainContainer):o._discardGrouping(),o._toggleFilterInputGroupLabelVisibility(!1,!0),o._checkOverflow();break;case"loadingIndicatorPosition":null!==o.dropDownAppendTo&&o._minimized&&o.$.view.setAttribute("loading-indicator-position",n),"center"===n?o.$loadingIndicatorPlaceHolder.addClass("jqx-hidden"):o.$loadingIndicatorPlaceHolder.removeClass("jqx-hidden");break;case"theme":babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,i,n),null!==o.dropDownAppendTo&&o._minimized&&(""!==i&&o.$view.removeClass(i),n&&o.$view.addClass(n))}}},{key:"_appendGroupLabels",value:function(e,t){for(var i=0;i<e.length;i++){var n=document.createElement("div");n.$=JQX.Utilities.Extend(n),n.className="jqx-list-menu-group-label",n.innerHTML=e[i],n.groupChildren=t[i],t[i][0].parentElement.insertBefore(n,t[i][0]);for(var o=0;o<t[i].length;o++)t[i][o].groupLabel=n}}},{key:"_applyFilter",value:function(e,t){for(var i=this,n=i._getCurrentViewItems(t),o=0;o<n.length;o++){var a=i._findItem(n[o],e);a&&a.hidden?(a.hidden=!1,(t===i._view||void 0!==i._view&&void 0!==t&&!t.contains(i._view)||void 0===i._view)&&a.$.removeClass("jqx-hidden")):a||(n[o].hidden=!0,n[o].$.addClass("jqx-hidden"))}if(t){t.filter=e;var r=i._filteredLowerLevelGroups.indexOf(t);""===e?-1!==r&&i._filteredLowerLevelGroups.splice(r,1):-1===r&&i._filteredLowerLevelGroups.push(t)}else i._topLevelFilter=e}},{key:"_backButtonClickHandler",value:function(e,t){var i=this,n=i._view;if(e&&e.stopPropagation(),!(!n||i.disabled&&e||i.displayLoadingIndicator||i._inTransition)){var o=i.hasAnimation,a=i.animation,r=!1;o&&t&&(o=!1,r=!0,i.animation="none"),i._discardKeyboardHover(),i.$scrollButtonNear.addClass("jqx-hidden"),i.$scrollButtonFar.addClass("jqx-hidden"),i.$mainContainer.removeClass("scroll-buttons-shown"),n.firstElementChild.classList.remove("jqx-hidden"),o?(i._inTransition=!0,n.container.$.addClass("no-transition"),n.container.$.addClass("jqx-hidden"),n.$.addClass("right"),n.$.removeClass("right"),n.container.$.removeClass("no-transition")):(n.$.removeClass("jqx-menu-items-group-opened"),n.container.$.addClass("jqx-hidden")),i._showHideMenuItemsGroupSiblings(n,"removeClass",o),o?setTimeout(function(){n.container.style.top=n.parentElement.getBoundingClientRect().top-n.getBoundingClientRect().top+"px"},0):r&&(i.animation=a),1===n.level?(i.$header.addClass("jqx-hidden"),i.$mainContainer.removeClass("header-shown"),i._view=void 0):(i.$.title.innerHTML=n.parentItem.titleLabel,i._view=n.parentItem),i._toggleFilterInputGroupLabelVisibility(),i.$.mainContainer.scrollTop=0,o||i._checkOverflow(),e&&i.focus()}}},{key:"_bounceBottom",value:function(e){function t(){o.scrollTop-=5,o.scrollTop>e?window.requestAnimationFrame(t):n.$mainContainer.removeClass("bounce-bottom")}function i(){o.scrollTop+=5,o.scrollTop!==o.scrollHeight-o.offsetHeight?window.requestAnimationFrame(i):window.requestAnimationFrame(t)}var n=this,o=n.$.mainContainer;n.$mainContainer.addClass("bounce-bottom"),window.requestAnimationFrame(i)}},{key:"_bounceTop",value:function(){function e(){n.scrollTop-=5,n.scrollTop>0?window.requestAnimationFrame(e):window.requestAnimationFrame(t)}function t(){n.scrollTop+=5,50!==n.scrollTop?window.requestAnimationFrame(t):(n.scrollTop=0,i.$mainContainer.removeClass("bounce-top"))}var i=this,n=i.$.mainContainer;i.$mainContainer.addClass("bounce-top"),window.requestAnimationFrame(e)}},{key:"_checkOverflow",value:function(){var e=this,t=e.overflow;if("hidden"!==t){var i=Math.round(e.$.mainContainer.scrollHeight)>Math.round(e.$.mainContainer.offsetHeight),n=Math.round(e.$.mainContainer.scrollTop)>0,o=Math.round(e.$.mainContainer.offsetHeight+e.$.mainContainer.scrollTop)<Math.round(e.$.mainContainer.scrollHeight);i?"auto"===t?(e.$mainContainer.hasClass("scroll-buttons-shown")||e.$mainContainer.addClass("scroll-buttons-shown"),n?e.$scrollButtonNear.removeClass("jqx-hidden"):e.$scrollButtonNear.addClass("jqx-hidden"),o?e.$scrollButtonFar.removeClass("jqx-hidden"):e.$scrollButtonFar.addClass("jqx-hidden"),!1===(n&&o)?e.$mainContainer.addClass("one-button-shown"):e.$mainContainer.removeClass("one-button-shown"),e.disabled||(e.$.scrollButtonNear.disabled=!1,e.$.scrollButtonFar.disabled=!1)):(e.$scrollButtonNear.removeClass("jqx-hidden"),e.$scrollButtonFar.removeClass("jqx-hidden"),e.disabled?(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0):(e.$.scrollButtonNear.disabled=!n,e.$.scrollButtonFar.disabled=!o)):!i&&"auto"===t&&e.$mainContainer.hasClass("scroll-buttons-shown")?(e.$mainContainer.removeClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown"),e.$scrollButtonNear.addClass("jqx-hidden"),e.$scrollButtonFar.addClass("jqx-hidden")):i||"scroll"!==t||(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0)}}},{key:"_close",value:function(){var e=this;e._discardKeyboardHover(!0),e._minimized&&e._minimizedDropDownOpened&&(e._positionDetection.removeOverlay(),e.$view.addClass("jqx-visibility-hidden"),e._edgeMacFF&&(e.$.view.style.left="",e.$.view.style.top="",e.$view.addClass("not-in-view")),e.$hamburgerIcon.removeClass("jqx-close-button"),e._minimizedDropDownOpened=!1)}},{key:"_createElement",value:function(){var e=this;e.mode="vertical",e._positionDetection=new JQX.Utilities.PositionDetection(e),e._positionDetection.getDropDownParent(),null===e.dataSource&&e.$.mainContainer.firstElementChild instanceof HTMLUListElement&&e._processUList();var t=e.getElementsByTagName("jqx-menu-item"),i=function(){e._setFocusable(),e._menuItems={},e._topLevelFilter="",e._filteredLowerLevelGroups=[],e.$.view.setAttribute("animation",e.animation),null===e.dataSource?e._processHTML(void 0,1):e._processDataSource(),e._toggleFilterInputGroupLabelVisibility(),"scroll"===e.overflow&&(e.$mainContainer.addClass("scroll-buttons-shown"),e.$scrollButtonNear.removeClass("jqx-hidden"),e.$scrollButtonFar.removeClass("jqx-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,!1,[e.$.scrollButtonNear,e.$.scrollButtonFar])),e._applyMinimizeIconTemplate(e.minimizeIconTemplate,null),null!==e.minimizeWidth&&e.offsetWidth<=e.minimizeWidth?e.minimize():e._checkOverflow(),e.displayLoadingIndicator&&e.$loadingIndicatorContainer.removeClass("jqx-hidden"),"center"!==e.loadingIndicatorPosition&&e.$loadingIndicatorPlaceHolder.removeClass("jqx-hidden"),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted())};0===t.length?i():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(t,i))}},{key:"_createMenuItemsGroupContainer",value:function(e,t){var i=document.createElement("div"),n=document.createElement("div");return i.className="jqx-menu-drop-down jqx-hidden",i.$=JQX.Utilities.Extend(i),i.level=t,i.setAttribute("level",t),i.menuItemsGroup=e,n.className="jqx-menu-item-container",n.$=JQX.Utilities.Extend(n),n.container=i,n.menuItemsGroup=e,e.checkable&&n.setAttribute("checkable",""),n.setAttribute("check-mode",e.checkMode),i.itemContainer=n,i.appendChild(n),i}},{key:"_discardGrouping",value:function(){for(var e=this,t=Array.from(e.$.view.getElementsByClassName("jqx-list-menu-group-label")),i=0;i<t.length;i++){var n=t[i];n.parentElement.removeChild(n)}e._unsortItems(e.$.mainContainer)}},{key:"_discardKeyboardHover",value:function(){var e=this;e._focusedViaKeyboard&&(e._focusedViaKeyboard===e.$.backButton?(e.$.backButton.removeAttribute("hover"),e.$.backButton.$.button.removeAttribute("hover")):(e._focusedViaKeyboard.removeAttribute("focus"),e._focusedViaKeyboard.removeAttribute("hover")),e._focusedViaKeyboard=void 0)}},{key:"_documentUpHandler",value:function(e){var t=this,i=e.originalEvent.target;if(t._endSwiping(e,Date.now()),t._swipeDetails)return"left"===t._swipeDetails.direction?t._swipeDetails.start>e.pageX&&t._swipeDetails.start-e.pageX>t.offsetWidth/4&&t._selectionHandler({target:t._swipeDetails.target},t._swipeDetails.target,!0):t._swipeDetails.start<e.pageX&&e.pageX-t._swipeDetails.start>t.offsetWidth/4&&t._backButtonClickHandler(),void delete t._swipeDetails;i===t.$.filterInput||t.disabled||t.displayLoadingIndicator||!i.closest||(t.contains(i)||i.closest(".jqx-list-menu-view")===t.$.view?!t.contains(i)&&i.closest(".jqx-list-menu-view")!==t.$.view||t===document.activeElement||t.focus():(t._close(),t._scrolling&&delete t._scrolling))}},{key:"_ensureVisible",value:function(e){var t=this,i=t.$.mainContainer;if(i.$.hasClass("scroll-buttons-shown")||"hidden"===t.overflow){var n=i.getBoundingClientRect(),o=e.getBoundingClientRect(),a=[t.$.scrollButtonNear,t.$.scrollButtonFar],r=i.scrollTop;(n.top>o.top||n.bottom<o.bottom)&&(i.scrollTop=e.offsetTop,t._updateScrollButtonVisibility(i,!1,a)),t._fireScrollBottomReachedEvent(r)}}},{key:"_fireScrollBottomReachedEvent",value:function(e){var t=this,i=t.$.mainContainer,n=i.scrollTop;e!==n&&n===i.scrollHeight-i.offsetHeight&&t.$.fireEvent("scrollBottomReached")}},{key:"_getCurrentViewItems",value:function(e){var t=this;if(t.grouped){if(void 0===e)return t.$.view.querySelectorAll(".jqx-menu-main-container > jqx-menu-item, .jqx-menu-main-container > jqx-menu-items-group");for(var i=e.container.firstElementChild.children,n=[],o=0;o<i.length;o++){var a=i[o];(a instanceof JQX.MenuItem||a instanceof JQX.MenuItemsGroup)&&n.push(a)}return n}return void 0===e?t.$.mainContainer.children:e.container.firstElementChild.children}},{key:"_sortItems",value:function(e){var t=this;if(t.grouped){var i=[],n=[],o=void 0;e instanceof JQX.MenuItemsGroup?o=e.container.firstElementChild:e===t.$.mainContainer&&(o=e);var a=Array.from(o.children);a.sort(function(e,t){return e.label.localeCompare(t.label)});for(var r=a.length-1;r>=0;r--)o.insertBefore(a[r],o.firstElementChild);for(var l=0;l<a.length;l++){var s=a[l],d=s.label.charAt(0),u=i.indexOf(d.toUpperCase());-1===u?(i.push(d.toUpperCase()),n.push([s])):n[u].push(s)}t._appendGroupLabels(i,n)}}},{key:"_home",value:function(){for(var e=this;e._view;)e._backButtonClickHandler(void 0,!0)}},{key:"_keydownHandler",value:function(e){var t=this,i=e.key;if(document.activeElement===t&&-1!==["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Escape","Home"," "].indexOf(i)&&!t.disabled&&!t.displayLoadingIndicator){e.preventDefault();var n=t._view,o=n?n.itemContainer:t.$.mainContainer,a=t.$.backButton.hasAttribute("hover")?t.$.backButton:o.querySelector("[focus]");switch(i){case"ArrowDown":t._navigate("_getNextEnabledChild",a,o);break;case"ArrowLeft":t._backButtonClickHandler();break;case"ArrowRight":a&&a instanceof JQX.MenuItemsGroup&&t._menuItemsGroupSelectionHandler(a,{type:"keydown"});break;case"ArrowUp":t._navigate("_getPreviousEnabledChild",a,o);break;case"End":case"Home":if(n&&"Home"===i)return t.$.mainContainer.scrollTop=0,t._checkOverflow(),t.$.backButton.setAttribute("hover",""),t.$.backButton.$.button.setAttribute("hover",""),t._focusedViaKeyboard=t.$.backButton,void(a&&a.removeAttribute("focus"));var r="End"===i?t._getLastEnabledChild(o):t._getFirstEnabledChild(o);if(!r||a===r)return;a&&(a===t.$.backButton?(t.$.backButton.removeAttribute("hover"),t.$.backButton.$.button.removeAttribute("hover")):a.removeAttribute("focus")),t._hoverViaKeyboard(r);break;case"Enter":t._minimized&&!t._minimizedDropDownOpened?t._hamburgerIconClickHandler(void 0,t.$.view):a&&(a===t.$.backButton?t._backButtonClickHandler():t._selectionHandler({target:a}));break;case"Escape":t._minimized&&t._minimizedDropDownOpened&&!t._view?t._close():t._backButtonClickHandler();break;case" ":a&&(a===t.$.backButton?t._backButtonClickHandler():t._toggleItem(a))}}}},{key:"_mainContainerDownHandler",value:function(e){var t=this;!JQX.Utilities.Core.isMobile||t.disabled||t.displayLoadingIndicator||(t._dragStartDetails={startY:e.pageY,x:e.pageX,y:e.pageY,startTime:Date.now(),target:e.originalEvent.target})}},{key:"_mainContainerHandler",value:function(){}},{key:"_mainContainerMoveHandler",value:function(e){var t=this;if(t._dragStartDetails){var i=e.pageY,n=t._dragStartDetails.y-i,o=t.$.mainContainer.scrollTop;t.$.mainContainer.scrollTop+=n,o!==t.$.mainContainer.scrollTop&&(t._checkOverflow(),t._fireScrollBottomReachedEvent(o)),t._dragStartDetails={startY:t._dragStartDetails.startY,x:e.pageX,y:i,startTime:t._dragStartDetails.startTime,target:e.originalEvent.target},t._scrolling=!0}}},{key:"_mainContainerSwipeHandler",value:function(e){var t=this;if(JQX.Utilities.Core.isMobile&&!t.disabled&&!t.displayLoadingIndicator){var i=e.originalEvent.target,n=i.closest("jqx-menu-item"),o=i.closest("jqx-menu-items-group");if("swiperight"===e.type){var a=n||o;a&&(delete t._dragStartDetails,delete t._scrolling,t._swipeDetails={direction:"right",start:e.pageX,target:a})}else o&&null===n&&(delete t._dragStartDetails,delete t._scrolling,t._swipeDetails={direction:"left",start:e.pageX,target:o})}}},{key:"_getRootDetails",value:function(e,t){var i=this;if(e){if(!i.enableShadowDOM)return{activeElement:e.activeElement,isInsideElement:i.contains(t.target)};for(var n=void 0,o=void 0;e&&(!n&&e.activeElement&&(n=e.activeElement),e.host===i&&(o=!0),e!==document);)e=e.host?e.host.getRootNode():e.getRootNode();return{activeElement:n,isInsideElement:o}}}},{key:"_menuItemsGroupSelectionHandler",value:function(e,t,i){var n=this,o=e.container,a=o.level,r=n._getRootDetails(t.target?t.target.getRootNode():null,t);if(n._view!==e&&(n._discardKeyboardHover(),r&&r.activeElement!==n&&null!==n.dropDownAppendTo&&"click"===t.type&&!r.isInsideElement&&n.focus(),!n._inTransition)){if("click"===t.type&&!t.target.classList.contains("jqx-menu-items-group-arrow")&&n._toggleItem(e))return void n._ripple(e,t);var l=n.hasAnimation,s=n.animation,d=!1;l&&i&&(l=!1,d=!0,n.animation="none"),2===a&&(n.$header.removeClass("jqx-hidden"),n.$mainContainer.addClass("header-shown")),n.$.title.innerHTML=e.titleLabel,n._view=e,n._toggleFilterInputGroupLabelVisibility(),e.removeAttribute("hover"),e.removeAttribute("focus"),e.$.addClass("jqx-menu-items-group-opened"),n._showHideMenuItemsGroupSiblings(e,"addClass",l),l?(n._inTransition=!0,e.firstElementChild.classList.add("animate"),setTimeout(function(){o.style.top=e.parentElement.getBoundingClientRect().top-e.getBoundingClientRect().top+"px"},0)):e.firstElementChild.classList.add("jqx-hidden"),o.$.removeClass("jqx-hidden"),d&&(n.animation=s),n.$.mainContainer.scrollTop=0,l||n._checkOverflow(),n.$.fireEvent("expand",{item:e,label:e.label,path:e.path,value:e.value})}}},{key:"_mouseoutMouseoverHandler",value:function(e){var t=this;if(!t.disabled&&!t.displayLoadingIndicator){var i=e.target.closest("jqx-menu-item")||e.target.closest("jqx-menu-items-group");null===i||t._view&&i.level<=t._view.level||i.disabled||i.templateApplied||(t._discardKeyboardHover(),"mouseover"===e.type?(i.setAttribute("hover",""),t._discardKeyboardHover(!0)):i.removeAttribute("hover"))}}},{key:"_navigate",value:function(e,t,i){var n=this;if(!t)return void("_getNextEnabledChild"===e?n._view?(n.$.backButton.setAttribute("hover",""),n.$.backButton.$.button.setAttribute("hover",""),n._focusedViaKeyboard=n.$.backButton):n._hoverViaKeyboard(n._getFirstEnabledChild(i)):n._hoverViaKeyboard(n._getLastEnabledChild(i)));var o=void 0;if("_getNextEnabledChild"===e&&t===n.$.backButton){if(!(o=n._getFirstEnabledChild(i)))return;n.$.backButton.removeAttribute("hover"),n.$.backButton.$.button.removeAttribute("hover")}else{if("_getPreviousEnabledChild"===e&&n._view&&t===n._getFirstEnabledChild(i))return n.$.backButton.setAttribute("hover",""),n.$.backButton.$.button.setAttribute("hover",""),n._focusedViaKeyboard=n.$.backButton,void t.removeAttribute("focus");o=n[e](t)}o&&(t.removeAttribute("focus"),n._hoverViaKeyboard(o))}},{key:"_processHTML",value:function(e,t){var i=this,n=void 0,o=void 0;void 0===e&&(e=i.$.mainContainer),t>1&&(n=i._createMenuItemsGroupContainer(e,t),o=n.itemContainer);for(var a=Array.from(e.children),r=[],l=0,s=0;s<a.length;s++)if(t>1&&0===s)l++;else{var d=a[s];d instanceof JQX.MenuItem||d instanceof JQX.MenuItemsGroup?(i._createItemHTMLStructure(d,t,e,s-l),d.checked&&(d.disabled||d.templateApplied?d.checked=!1:r.push(d)),t>1&&o.appendChild(d),d instanceof JQX.MenuItemsGroup&&i._processHTML(d,t+1)):(d.parentElement.removeChild(d),l++)}if(t>1){if(e.container=n,e.itemContainer=o,e instanceof JQX.MenuItemsGroup){var u=document.createElement("div");u.className="jqx-menu-items-group-arrow jqx-arrow-right right",e.children[0].appendChild(u)}e.appendChild(n)}i._validateRadioButtonSelection(e,t,r),i._sortItems(e)}},{key:"_resizeHandler",value:function(){var e=this,t=e.minimizeWidth;if(null!==t){if(!e._minimized&&e.offsetWidth<=t)return void e.minimize();if(e._minimized&&e.offsetWidth>t)return void e.maximize()}e._checkOverflow()}},{key:"_scroll",value:function(e){var t=this,i=t.$.mainContainer,n=e.classList.contains("jqx-scroll-button-near")?-1:1,o=i.scrollTop;i.scrollTop=i.scrollTop+10*n,o!==i.scrollTop&&(t._updateScrollButtonVisibility(i,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]),t._fireScrollBottomReachedEvent(o))}},{key:"_selectionHandler",value:function(e,t,i){function n(){var t=o._getRootDetails(a.getRootNode(),e);t&&t.activeElement!==o&&null!==o.dropDownAppendTo&&"click"===e.type&&!t.isInsideElement&&o.focus()}var o=this,a=e.target;if(!o.disabled&&!o.displayLoadingIndicator){if(o._scrolling||o._swipeDetails&&!i)return delete o._dragStartDetails,delete o._scrolling,void delete o._swipeDetails;if(void 0===t){if("click"===e.type){var r=a.closest("jqx-repeat-button");if(r)return void o._scroll(r,e)}var l=a.closest("jqx-menu-item");if(l)return l.disabled||l.templateApplied?void n():(o._toggleItem(l)||o.$.fireEvent("itemClick",{item:l,label:l.label,value:l.value}),o._ensureVisible(l),o._ripple(l,e),void n());if((t=a.closest("jqx-menu-items-group"))&&(a===t.container||a===t.container.firstElementChild))return}t&&!t.disabled&&o._menuItemsGroupSelectionHandler(t,e)}}},{key:"_showHideMenuItemsGroupSiblings",value:function(e,t,i){for(var n=e.parentElement,o=n.children,a=0;a<o.length;a++){(function(n){var a=o[n];if(a===e)return"continue";a.hidden||(i?"addClass"===t?a.$.addClass("animate"):(a.$.removeClass("jqx-hidden"),a.$.addClass("right"),setTimeout(function(){a.$.removeClass("right")},0)):a.$[t]("jqx-hidden"))})(a)}}},{key:"_toggleFilterInputGroupLabelVisibility",value:function(e,t){var i=this,n=i._getCurrentViewItems(i._view).length;if(!0!==t){var o=!i.$filterInputContainer.hasClass("jqx-hidden");i.filterable&&n>1?(o||(i.$mainContainer.addClass("filter-input-shown"),i.$filterInputContainer.removeClass("jqx-hidden")),i._view?i.$.filterInput.value=i._view.filter||"":i.$.filterInput.value=i._topLevelFilter):o&&(i.$mainContainer.removeClass("filter-input-shown"),i.$filterInputContainer.addClass("jqx-hidden"))}if(!e&&i.grouped&&n>0){var a=i._view?i._view.container.firstElementChild.firstElementChild.$:i.$.mainContainer.firstElementChild.$;1===n?a.addClass("jqx-hidden"):a.removeClass("jqx-hidden")}}},{key:"_viewHandler",value:function(e){var t=this;if("transitionend"===e.type){var i=e.target;if(i===t.$.view||t.$.backButton.contains(i))return;return i.classList.contains("animate")&&(i.classList.remove("animate"),i.classList.add("jqx-hidden")),i.classList.contains("jqx-menu-drop-down")&&(i.style.top=""),i.classList.contains("jqx-menu-items-group-opened")&&i.classList.remove("jqx-menu-items-group-opened"),t._checkOverflow(),void(t._inTransition=!1)}if(t._minimized&&null!==t.dropDownAppendTo)switch(e.type){case"click":t._selectionHandler(e);break;case"mouseout":case"mouseover":t._mouseoutMouseoverHandler(e)}}}],[{key:"properties",get:function(){return{displayLoadingIndicator:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["top-left","top-right","bottom-left","bottom-right","auto"],type:"string"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},grouped:{value:!1,type:"boolean"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"}}}},{key:"listeners",get:function(){return{resize:"_resizeHandler","backButton.click":"_backButtonClickHandler","filterInput.keyup":"_filterInputKeyupHandler","mainContainer.down":"_mainContainerDownHandler","mainContainer.move":"_mainContainerMoveHandler","mainContainer.swipeleft":"_mainContainerSwipeHandler","mainContainer.swiperight":"_mainContainerSwipeHandler","view.click":"_viewHandler","view.mouseout":"_viewHandler","view.mouseover":"_viewHandler","view.transitionend":"_viewHandler","view.wheel":"_wheelHandler"}}},{key:"styleUrls",get:function(){return["jqx.listmenu.css"]}}]),t}(JQX.Menu));
//# sourceMappingURL=jqxlistmenu.js.map
