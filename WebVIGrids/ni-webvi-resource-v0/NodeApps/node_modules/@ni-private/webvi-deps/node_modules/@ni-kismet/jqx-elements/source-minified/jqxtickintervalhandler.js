"use strict";JQX.Utilities.Assign("TickIntervalHandler",function(){function e(i,t,a,l,n,s,r){babelHelpers.classCallCheck(this,e);var o=this;o.context=i,o.minLabel=t,o.maxLabel=a,o.labelClass=l,o.dimension=n,o.logarithmic=r,i.customInterval?i.customTicks.length>0?o.labelsSize=o.getCustomTicksLabelSize():o.labelsSize={minLabelSize:0,minLabelOtherSize:0,maxLabelSize:0,maxLabelOtherSize:0}:o.labelsSize=o.getMinAndMaxLabelSize(),s?(o.getNiceInterval=o.getNiceIntervalInteger,o.getPossibleBiggerLabel=o.getPossibleBiggerLabelInteger):(o.getNiceInterval=o.getNiceIntervalFloatingPoint,o.getPossibleBiggerLabel=o.getPossibleBiggerLabelFloatingPoint)}return babelHelpers.createClass(e,[{key:"getInterval",value:function(e,i,t,a){var l=this.context,n=l._measurements.innerRadius,s=void 0,r=1;"radial"===e?(s=Math.max(this.labelsSize.minLabelSize,this.labelsSize.minLabelOtherSize,this.labelsSize.maxLabelSize,this.labelsSize.maxLabelOtherSize),r=1.35):(s=Math.max(this.labelsSize.minLabelSize,this.labelsSize.maxLabelSize),r=1.45),s*=r;var o=void 0;o="radial"===e?function(){var e=2*Math.PI*n*(Math.abs(l.startAngle-l.endAngle)/360);return Math.round(e)}():l[this.dimension]-this.labelsSize.minLabelSize/2-this.labelsSize.maxLabelSize/2,o=Math.max(10,o);var b=Math.ceil(o/s),m="radial"===e?4*b:3*b,h=this.getNiceInterval(i,t,b,!0),g=this.getNiceInterval(i,t,m);if(l._cachedLabelsSize=this.labelsSize,b>2&&!l.customInterval){var c=this.getPossibleBiggerLabel(b,h);if(c.length>Math.max(this.minLabel.length,this.maxLabel.length)){var u=this.minLabel;this.minLabel=c,this.labelsSize=this.getMinAndMaxLabelSize(),l._cachedLabelsSize=this.labelsSize;var v=this.getInterval(e,i,t,a);return this.minLabel=u,this.labelsSize=this.getMinAndMaxLabelSize(),v}}return{major:h,minor:g}}},{key:"getNiceIntervalFloatingPoint",value:function(e,i,t,a){var l=i-e,n=Math.floor(Math.log10(l)-Math.log10(t)),s=Math.pow(10,n),r=t*s,o=void 0;o=l<2*r?1:l<3*r?2:l<7*r?5:10;var b=o*s;if(a&&this.context._range/b>t){switch(o){case 5:o=10;break;case 2:o=5;break;case 1:o=2}b=o*s}return this.nearestPowerOfTen=s,this.logarithmic&&a?Math.max(1,b):b}},{key:"getPossibleBiggerLabelFloatingPoint",value:function(e,i){var t=this.context,a=parseFloat(t.min-t._numericProcessor.getPreciseModulo(parseFloat(t.min),i)+parseFloat(i)),l=a,n=void 0,s=void 0;this.logarithmic&&(a=Math.pow(10,a)),n=t._formatLabel(a);for(var r=1;r<e&&!((l+=i)>=t._drawMax);r++)s=this.logarithmic?Math.pow(10,l):l,s=t._formatLabel(s),s.length>n.length&&(n=s);return n}},{key:"getNiceIntervalInteger",value:function(e,i,t,a){var l=new JQX.Utilities.BigNumber(i).subtract(new JQX.Utilities.BigNumber(e)),n=Math.floor(Math.log10(l.toString())-Math.log10(t)),s=new JQX.Utilities.BigNumber(10).pow(new JQX.Utilities.BigNumber(n)),r=new JQX.Utilities.BigNumber(t).multiply(s),o=void 0;o=-1===l.compare(new JQX.Utilities.BigNumber(2*r))?1:-1===l.compare(new JQX.Utilities.BigNumber(3*r))?2:-1===l.compare(new JQX.Utilities.BigNumber(7*r))?5:10;var b=new JQX.Utilities.BigNumber(o).multiply(s);if(a&&1===new JQX.Utilities.BigNumber(this.context._range).divide(b).compare(t)){switch(o){case 5:o=10;break;case 2:o=5;break;case 1:o=2}b=new JQX.Utilities.BigNumber(o).multiply(s)}return-1===b.compare(1)&&(b=new JQX.Utilities.BigNumber(1)),this.nearestPowerOfTen=s,b}},{key:"getPossibleBiggerLabelInteger",value:function(e,i){var t=this.context,a=new JQX.Utilities.BigNumber(10),l=new JQX.Utilities.BigNumber(t.min).subtract(new JQX.Utilities.BigNumber(t.min).mod(i)).add(i),n=l,s=void 0,r=void 0;this.logarithmic&&(l=a.pow(l)),s=t._formatLabel(l);for(var o=1;o<e&&(n=n.add(i),-1===n.compare(t._drawMax));o++)r=this.logarithmic?a.pow(n):n,r=t._formatLabel(r),r.length>s.length&&(s=r);return s}},{key:"getMinAndMaxLabelSize",value:function(){var e=this,i=e.context,t=i.$.container,a=document.createElement("span");a.className=e.labelClass,a.style.position="absolute",a.style.visibility="hidden",t.appendChild(a),a.innerHTML=e.minLabel;var l=a[e.dimension],n=a[i._settings.otherSize];a.innerHTML=e.maxLabel;var s=a[e.dimension],r=a[i._settings.otherSize];return t.removeChild(a),{minLabelSize:l,minLabelOtherSize:n,maxLabelSize:s,maxLabelOtherSize:r}}},{key:"getCustomTicksLabelSize",value:function(){var e=this,i=e.context,t=i.$.container,a=document.createElement("span"),l=i.customTicks;a.className=e.labelClass,a.style.position="absolute",a.style.visibility="hidden",t.appendChild(a),a.innerHTML=i._formatLabel(l[0]);for(var n=a[e.dimension],s=a[i._settings.otherSize],r=1;r<i.customTicks.length;r++){a.innerHTML=i._formatLabel(i.customTicks[r]);var o=a[e.dimension],b=a[i._settings.otherSize];o>n&&(n=o),b>s&&(s=b)}return t.removeChild(a),{minLabelSize:n,minLabelOtherSize:s,maxLabelSize:n,maxLabelOtherSize:s}}}]),e}());
//# sourceMappingURL=jqxtickintervalhandler.js.map
