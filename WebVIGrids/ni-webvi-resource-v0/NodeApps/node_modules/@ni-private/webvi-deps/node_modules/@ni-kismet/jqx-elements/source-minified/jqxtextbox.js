"use strict";JQX("jqx-text-box",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                    <span id="label" inner-h-t-m-l="[[label]]" class="jqx-label"></span>\n                    <div id="content" class="jqx-content">\n                        <input class="jqx-input" type="text" id="input"\n                            disabled="[[disabled]]"\n                            maxlength="[[maxLength]]"\n                            name="[[name]]"\n                            placeholder="[[placeholder]]"\n                            readonly="[[readonly]]">\n                        <div id="autoCompleteString"></div>\n                        <div id="dropDownContainer" class="jqx-drop-down jqx-drop-down-container jqx-visibility-hidden">\n                           <jqx-list-box id="listBox"\n                               data-source="[[dataSource]]"\n                               unfocusable="true"\n                               disabled="[[disabled]]"\n                               display-loading-indicator="[[displayLoadingIndicator]]"\n                               display-member="[[displayMember]]"\n                               item-height="[[itemHeight]]"\n                               item-template="[[itemTemplate]]"\n                               filter-callback="[[filterCallback]]"\n                               filter-mode="[[filterMode]]"\n                               loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"\n                               loading-indicator-position="[[loadingIndicatorPosition]]"\n                               placeholder="[[dropDownPlaceholder]]"\n                               readonly="[[readonly]]"\n                               selection-mode="[[selectionMode]]"\n                               value-member="[[valueMember]]">\n                                <content></content>\n                            </jqx-list-box>\n                         </div>\n                    </div>\n                    <span id="hint" class ="jqx-hint"></span>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,o,l){var n=this;switch(e){case"autoComplete":n.$.listBox._filteredItems&&n.$.listBox._filteredItems.length!==n.$.listBox._items.length&&babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_autoComplete",this).call(this,!0),n.$.input.autocomplete="none"!==l?"off":"on";break;case"dataSource":case"valueMember":n._clearSelection(),n._setDropDownSize(),n._positionDetection.checkBrowserBounds("vertically"),n._positionDetection.positionDropDown(),n._positionDetection.checkBrowserBounds("horizontally");break;case"displayMember":case"inputMember":var a=n.$.listBox;if(a.selectedIndexes.length){var i=a._items[a.selectedIndexes[0]][n.inputMember];n.$.listBox.$.filterInput.value=i,n.$.input.value="escaped"===n.displayMode?n._toEscapedDisplayMode(i):n._toDefaultDisplayMode(i),n.set("value",n._toDefaultDisplayMode(n.$.input.value))}break;case"displayMode":n.$.input.value="escaped"===l?n._toEscapedDisplayMode(n.value):n.value=n._toDefaultDisplayMode(n.$.input.value);break;case"dropDownOpenMode":n._setFocusable(),n.$dropDownContainer.addClass("jqx-visibility-hidden"),n.opened=!1;break;case"value":(n.$.input!==document.activeElement||n.$.input===document.activeElement&&n.$.input.value===n._oldValue)&&(n.$.input.value="escaped"===n.displayMode?n._toEscapedDisplayMode(n.value):n.value,n._oldValue=o),n.value||n.clearSelection(),l.length>0?n.$.addClass("has-value"):n.$.removeClass("has-value");break;case"hint":if(null===l)return n.$.hint.innerHTML="",void n.$.removeClass("invalid");n._handleHintContainer();break;default:babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,o,l)}}},{key:"open",value:function(){var e=this;if(0!==e.$.listBox.items.length&&"none"!==e.autoComplete)return 0===e.$.input.value.length&&e.$.listBox._filteredItems&&e.$.listBox._filteredItems.length!==e.$.listBox._items.length?void babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_autoComplete",this).call(this,!0):void babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"open",this).call(this)}},{key:"close",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"close",this).call(this),e.$.autoCompleteString.textContent="",e.$.listBox._focusedItem&&(e.$.listBox._focusedItem._focused=!1),"none"!==e.autoComplete&&e.$.input._filteredItems&&e.$.input._filteredItems[0]&&e.$.input._filteredItems[0]!==e.$.input.value&&babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_autoComplete",this).call(this,!0)}},{key:"focus",value:function(){this.$.input.focus()}},{key:"_setFocusable",value:function(){var e=this;if(e.disabled||e.unfocusable)return void(e.$.input.tabIndex=-1);e.$.input.removeAttribute("tabindex")}},{key:"reset",value:function(){var e=this;"escaped"===e.displayMode?(e.value=e._initializationValue,e.$.input.value=e._toEscapedDisplayMode(e._initializationValue)):e.$.input.value=e.value=e._initializationValue,!e.value&&e.$.listBox&&e.clearSelection()}},{key:"_bindingCompleteHandler",value:function(){var e=this;e.$.listBox&&(e._setDropDownSize(),e._positionDetection.checkBrowserBounds())}},{key:"_createElement",value:function(){var e=this;e._browserIsIEorEdge=JQX.Utilities.Core.Browser.IE||JQX.Utilities.Core.Browser.Edge,e.autoFocus&&e.$.input.focus(),e.value&&(e.$.input.value="escaped"===e.displayMode?e._toEscapedDisplayMode(e.value):e.value),"none"!==e.autoComplete&&(e.$.input.autocomplete="off"),e._setDropDownSize(),e._handleSelectedText(),e._setFocusable(),e._initializationValue=e._oldValue=e.value,e.value.length>0?e.$.addClass("has-value"):e.$.removeClass("has-value"),e._handleHintContainer()}},{key:"_focusHandler",value:function(e){var t=this;if("blur"===e.type){if(t._isDropDownClicked)return;return t.removeAttribute("focus"),t.$.autoCompleteString.textContent="",t.value.length>0?t.$.addClass("has-value"):t.$.removeClass("has-value"),("auto"===t.autoComplete||"inline"===t.autoComplete)&&t.$.input.value.length>0&&t.$.listBox._focusedItem&&t.$.listBox._focusedItem._focused&&(t.$.input.value=t.$.listBox._focusedItem[t.inputMember]),t._preventDropDownClose||t.close(),void(t._oldValue!==t.value&&t.$.fireEvent("change",{oldValue:t._oldValue,newValue:t.value}))}t.disabled||(t.setAttribute("focus",""),t._oldValue=t.value,t.selectAllOnFocus&&t.$.input.select())}},{key:"_handlePointerInEscapedSymbol",value:function(e){var t=this;if("escaped"===t.displayMode){var o=t.$.input.selectionStart,l=t.$.input.selectionEnd,n=t.$.input.value;if("\\"===n[o-1]&&n[o].match(/n|r|s|t|f/g)){if(o===l){var a="next"===e?1:-1;return t.$.input.selectionStart=o+a,void(t.$.input.selectionEnd=o+a)}t.$.input.selectionStart=o-1,"\\"===n[l-1]&&n[l].match(/n|r|s|t|f/g)&&(t.$.input.selectionEnd=l+1)}}}},{key:"_handleSelectedText",value:function(){var e=this;null===e.selectionStart||null===e.selectionEnd||e.selectionStart===e.selectionEnd||e.selectAllOnFocus||(e.selectionStart=e.selectionStart<0?0:e.selectionStart,e.selectionEnd=e.selectionEnd>e.value.length?e.value.length:e.selectionEnd,e.$.input.setSelectionRange(e.selectionStart,e.selectionEnd))}},{key:"_handleHintContainer",value:function(){var e=this;if(e.hint){var t=e.$.hint;if("function"==typeof e.hint){var o=e.value;e.hint(o,t)?e.$.addClass("invalid"):e.$.removeClass("invalid")}else"string"==typeof e.hint&&(t.innerHTML=e.hint,e.$.removeClass("invalid"))}}},{key:"_keyDownHandler",value:function(e){var o=this;switch(o._showAutoCompleteHighlighter=!1,e.key){case"ArrowUp":case"ArrowDown":if(e.altKey)return e.preventDefault(),void("ArrowDown"===e.key?o.open():o.close());if(o.opened){if(e.preventDefault(),o.$.listBox._handleKeyStrokes(e.key),"inline"!==o.autoComplete)break;o._showAutoCompleteHighlighter=!0,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_updateAutoCompleteHelper",this).call(this)}break;case"PageUp":case"PageDown":e.preventDefault(),o.$.input.selectionStart=o.$.input.selectionEnd="PageUp"===e.key?0:o.$.input.value.length;break;case"Enter":if(o.opened&&o.$.listBox._focusedItem&&o.$.listBox._focusedItem._focused&&(o.$.listBox.$.filterInput.value=o.$.listBox._focusedItem[o.inputMember],o.$.input.value="escaped"===o.displayMode?o._toEscapedDisplayMode(o.$.listBox._focusedItem[o.inputMember]):o._toDefaultDisplayMode(o.$.listBox._focusedItem[o.inputMember]),o.select(o.$.listBox._focusedItem),o.close()),"default"!==o.enterKeyBehavior){var l=o.$.input.value;o._oldValue!==l&&(e.preventDefault(),o.$.fireEvent("change",{oldValue:o._oldValue,newValue:l,type:"submit"}),"clearOnSubmit"===o.enterKeyBehavior&&(JQX.MaskedTextBox&&o instanceof JQX.MaskedTextBox?(o._cleanMask(),o._setMaskToInput(),o.$.input.selectionStart=o.$.input.selectionEnd=0):o.$.input.value=""),o._oldValue=o.value=o._toDefaultDisplayMode(o.$.input.value)),o._submitted=!0}break;case"Escape":if(o.close(),o._closedFromKeyCombination=!0,"none"===o.escKeyMode)return;switch(o.escKeyMode){case"none":break;case"clearValue":o.value=o.$.input.value="";break;case"previousValue":o.$.input.value="escaped"===o.displayMode?o._toEscapedDisplayMode(o._oldValue):o._oldValue}break;case" ":"escaped"===o.displayMode&&function(t){var l=o.$.input.selectionStart,n=o.$.input.selectionEnd,a=o.$.input.value;e.preventDefault(),a=a.substring(0,l)+t+a.substring(n,a.length),o.value=o._toDefaultDisplayMode(a),o.$.input.value=a,o.$.input.selectionStart=o.$.input.selectionEnd=l+2}("\\s");break;case"Backspace":if("escaped"===o.displayMode&&o.$.input.selectionStart===o.$.input.selectionEnd){var n=o.$.input.selectionStart;"\\"!==o.$.input.value[n-2]||"s"!==o.$.input.value[n-1]&&"n"!==o.$.input.value[n-1]||(o.$.input.value=o.$.input.value.substring(0,n-2)+o.$.input.value.substring(n-2,o.$.input.value.length),o.$.input.selectionStart=n-2)}}}},{key:"_keyUpHandler",value:function(e){var t=this;t.disabled||"Escape"===e.key||e.target===t.$.listBox.$.filterInput||e.target===t.$.input&&"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!1)}},{key:"_listBoxItemClickHandler",value:function(e){var o=this,l=e.detail;if(babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_listBoxItemClickHandler",this).call(this,e),l.selected){if("escaped"===o.displayMode){var n=o.$.input.value;o.value=o._toDefaultDisplayMode(n),o.$.input.value=n}else o.value=o.$.input.value;o._oldValue!==o.value&&(o.$.fireEvent("change",{oldValue:o._oldValue,newValue:o.value}),o.$.input.focus())}}},{key:"_submitKeyUpHandler",value:function(){var e=this;e._submitted&&("clearOnSubmit"===e.enterKeyBehavior&&(e.$.input.selectionStart=e.$.input.selectionEnd=0),e._submitted=!1)}},{key:"_textBoxKeyUpHandler",value:function(e){var o=this;if(!(o.disabled||e.altKey||e.ctrlKey)){if("escaped"===o.displayMode){var l=o.$.input.value;o.value=o._toDefaultDisplayMode(o.$.input.value),o.$.input.value=l}else o.value=o.$.input.value;var n=void 0;if(1===o.$.listBox.selectedIndexes.length&&(n=o.$.listBox.getItem(o.$.listBox.selectedValues[0]),o.value!==n[o.inputMember]&&o.unselect(n)),o._showAutoCompleteHighlighter||(o.$.autoCompleteString.textContent=""),"Alt"===e.key||"Control"===e.key||!o.opened&&"Escape"===e.key||"Enter"===e.key)return void(o._closedFromKeyCombination=!1);if(e.key&&e.key.indexOf("Arrow")>-1)return void o._handlePointerInEscapedSymbol("ArrowRight"===e.key?"next":void 0);if("none"!==o.autoComplete&&(o.$.input.value.length>0||"auto"===o.dropDownOpenMode)){var a=babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_autoComplete",this).bind(o);if(o._autoCompleteTimer&&clearTimeout(o._autoCompleteTimer),0===o.$.listBox._items.length&&"function"!=typeof o.dataSource)return void o.close();o._autoCompleteTimer=setTimeout(function(){a(!0)},o.autoCompleteDelay)}else o.close();"Enter"===e.key&&o.value!==o.value&&o._browserIsIEorEdge&&(o.value=o.$.input.value,o.$.fireEvent("change",{value:o.value}))}}},{key:"_listBoxChangeHandler",value:function(e){var t=this;if(e.stopPropagation(),e.detail.selected){var o=t.$.listBox._items[e.detail.index][t.inputMember];t.$.listBox.$.filterInput.value=o,t.$.input.value="escaped"===t.displayMode?t._toEscapedDisplayMode(o):t._toDefaultDisplayMode(o),t.set("value",t._toDefaultDisplayMode(t.$.input.value))}"none"!==t.autoComplete&&"function"!=typeof t.dataSource&&t._autoComplete(!0)}},{key:"_mouseEventsHandler",value:function(e){var t=this;"mouseenter"===e.type?t.setAttribute("hover",""):t.removeAttribute("hover")}},{key:"_textBoxChangeHandler",value:function(e){var t=this;if(e.stopPropagation(),"escaped"===t.displayMode){var o=t.$.input.value,l=t.$.input.selectionStart,n=t.$.input.selectionEnd,a=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||window.clipboardData;if(a){var i=a.getData("text"),u=t.$.input.value;e.preventDefault(),i=t._toEscapedDisplayMode(i),t.$.input.value=u.substring(0,l)+i+u.substring(n,u.length)}t.value=t._toDefaultDisplayMode(t.$.input.value),t.$.input.value=o}else t.value=t.$.input.value;t._handleHintContainer()}},{key:"_textBoxSelectHandler",value:function(){var e=this;e.disabled||(e.selectionStart=e.$.input.selectionStart,e.selectionEnd=e.$.input.selectionEnd)}},{key:"_toEscapedDisplayMode",value:function(e){for(var t=[{key:/\r\n|\n\r|\n|\r/g,value:"\\n"},{key:/\s/g,value:"\\s"},{key:/\n/g,value:"\\n"},{key:/\t/g,value:"\\t"},{key:/\f/g,value:"\\f"},{key:/\r/g,value:"\\r"}],o=0;o<t.length;o++)e=e.replace(t[o].key,t[o].value);return e}},{key:"_toDefaultDisplayMode",value:function(e){e||(e="");for(var t=[{key:/\\s/g,value:" "},{key:/\\n/g,value:"\n"},{key:/\\t/g,value:"\t"},{key:/\\f/g,value:"\f"},{key:/\\r/g,value:"\r"}],o=0;o<t.length;o++)e=e.replace(t[o].key,t[o].value);return e}},{key:"_documentDownHandler",value:function(e){var t=this;if(!t.disabled&&!t.readonly){var o=e.originalEvent.target;if(t.enableShadowDOM){o=e.originalEvent.composedPath()[0];for(var l=o.getRootNode().host;l;)l.closest(".jqx-drop-down-container")===t.$.dropDownContainer&&(t._isDropDownClicked=!0),l=l.getRootNode().host}else t._isDropDownClicked=o.closest(".jqx-drop-down-container")===t.$.dropDownContainer;var n=e.originalEvent.target.closest("jqx-list-item");t.hasRippleAnimation&&n&&JQX.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY),(n||t._isDropDownClicked)&&(t._preventDropDownClose=!0)}}},{key:"_documentUpHandler",value:function(e){var o=this;if(!o.disabled){var l=o.enableShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(l){if("escaped"===o.displayMode&&l===o.$.input&&o._handlePointerInEscapedSymbol(),o._isDropDownClicked||o.readonly)return void delete o._isDropDownClicked;if(l===o.$.input&&"auto"===o.dropDownOpenMode)return void babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_autoComplete",this).call(this,!0);for(;l;){if(l instanceof JQX.ListItem&&l.ownerListBox===o.$.listBox){if(l.unselectable||l.disabled)return;return"escaped"===o.displayMode?(o.value=l[o.inputMember],o.$.input.value=o._toEscapedDisplayMode(l[o.inputMember])):o.$.input.value=o.value=l[o.inputMember],o.$.fireEvent("change",{oldValue:o._oldValue,newValue:o.value,type:"submit"}),o._oldValue=o.value,"clearOnSubmit"===o.enterKeyBehavior&&(o.$.input.value=o.value=""),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_autoComplete",this).call(this,!0),o.close(),l="item",void o.$.input.focus()}if(l===o.$.listBox)return void(l="listBox");l=l.parentElement}return"listBox"!==l&&"item"!==l?void o.close():void 0}}}}],[{key:"properties",get:function(){return{autoFocus:{value:!1,type:"boolean"},autoComplete:{allowedValues:["none","manual","auto","inline"],type:"string",value:"manual"},displayMode:{value:"default",allowedValues:["default","escaped"],type:"string"},dropDownOpenMode:{allowedValues:["none","default","auto"],value:"default",type:"string"},enterKeyBehavior:{value:"submit",allowedValues:["submit","clearOnSubmit"],type:"string"},form:{value:"",type:"string"},hint:{value:null,reflectToAttribute:!1,type:"any"},maxLength:{value:null,type:"number?"},minLength:{value:2,type:"number"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}."}},type:"object"},required:{value:!1,type:"boolean"},requiredMessage:{value:"",type:"string"},selectAllOnFocus:{value:!1,type:"boolean"},selectionMode:{value:"zeroOrOne",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},type:{value:"input",type:"string",defaultReflectToAttribute:!0,readonly:!0},value:{value:"",type:"string"}}}},{key:"listeners",get:function(){return{"document.up":"_documentUpHandler",focus:"_focusHandler",keydown:"_keyDownHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","input.blur":"_focusHandler","input.change":"_textBoxChangeHandler","input.focus":"_focusHandler","input.keyup":"_textBoxKeyUpHandler","input.paste":"_textBoxChangeHandler","input.select":"_textBoxSelectHandler","listBox.bindingComplete":"_bindingCompleteHandler"}}},{key:"requires",get:function(){return{"JQX.ComboBox":"jqxcombobox.js"}}},{key:"styleUrls",get:function(){return["jqx.textbox.css"]}}]),t}(JQX.ComboBox));
//# sourceMappingURL=jqxtextbox.js.map
