"use strict";JQX.Utilities.Assign("Draw",function(){function t(e,i){babelHelpers.classCallCheck(this,t);var r=this;r.host=e,r.renderEngine=i||"",r.refresh();var a=["clear","removeElement","attr","getAttr","line","circle","rect","path","pieslice","pieSlicePath","text","measureText"];for(var n in a)r._addFn(JQX.Utilities.Draw.prototype,a[n])}return babelHelpers.createClass(t,[{key:"_addFn",value:function(t,e){t[e]||(t[e]=function(){return this.renderer[e].apply(this.renderer,arguments)})}},{key:"_initRenderer",value:function(t){return this.createRenderer(this,t)}},{key:"_internalRefresh",value:function(){var t=this;if(t.renderer||(t.host.innerHTML="",t._initRenderer(t.host)),"none"!==window.getComputedStyle(t.host).display){var e=t.renderer;if(e){var i=e.getRect();t._render({x:1,y:1,width:i.width,height:i.height})}}}},{key:"_render",value:function(t){this._plotRect=t}},{key:"refresh",value:function(){this._internalRefresh()}},{key:"getSize",value:function(){var t=this._plotRect;return{width:t.width,height:t.height}}},{key:"toGreyScale",value:function(t){if(-1===t.indexOf("#"))return t;var e=this.cssToRgb(t);e[0]=e[1]=e[2]=Math.round(.3*e[0]+.59*e[1]+.11*e[2]);var i=this.rgbToHex(e[0],e[1],e[2]);return"#"+i[0]+i[1]+i[2]}},{key:"decToHex",value:function(t){return t.toString(16)}},{key:"hexToDec",value:function(t){return parseInt(t,16)}},{key:"rgbToHex",value:function(t,e,i){return[this.decToHex(t),this.decToHex(e),this.decToHex(i)]}},{key:"hexToRgb",value:function(t,e,i){return[this.hexToDec(t),this.hexToDec(e),this.hexToDec(i)]}},{key:"cssToRgb",value:function(t){return t.indexOf("rgb")<=-1?this.hexToRgb(t.substring(1,3),t.substring(3,5),t.substring(5,7)):t.substring(4,t.length-1).split(",")}},{key:"hslToRgb",value:function(t){var e=void 0,i=void 0,r=void 0,a=parseFloat(t[0]),n=parseFloat(t[1]),s=parseFloat(t[2]);if(0===n)e=i=r=s;else{var h=s<.5?s*(1+n):s+n-s*n,o=2*s-h;e=this.hueToRgb(o,h,a+1/3),i=this.hueToRgb(o,h,a),r=this.hueToRgb(o,h,a-1/3)}return[255*e,255*i,255*r]}},{key:"hueToRgb",value:function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}},{key:"rgbToHsl",value:function(t){var e=parseFloat(t[0])/255,i=parseFloat(t[1])/255,r=parseFloat(t[2])/255,a=Math.max(e,i,r),n=Math.min(e,i,r),s=void 0,h=void 0,o=(a+n)/2;if(a===n)s=h=0;else{var l=a-n;switch(h=o>.5?l/(2-a-n):l/(a+n),a){case e:s=(i-r)/l+(i<r?6:0);break;case i:s=(r-e)/l+2;break;case r:s=(e-i)/l+4}s/=6}return[s,h,o]}},{key:"swap",value:function(t,e){var i=t;t=e,e=i}},{key:"getNum",value:function(t){if(t.constructor!==Array){if(isNaN(t))return 0}else for(var e=0;e<t.length;e++)if(!isNaN(t[e]))return t[e];return 0}},{key:"_ptRotate",value:function(t,e,i,r,a){var n=Math.sqrt(Math.pow(Math.abs(t-i),2)+Math.pow(Math.abs(e-r),2)),s=Math.asin((t-i)/n),h=s+a;return t=i+Math.cos(h)*n,e=r+Math.sin(h)*n,{x:t,y:e}}},{key:"log",value:function(t,e){return Math.log(t)/(e?Math.log(e):1)}},{key:"_mod",value:function(t,e){var i=Math.abs(t>e?e:t),r=1;if(0!==i)for(;i*r<100;)r*=10;return t*=r,e*=r,t%e/r}},{key:"createRenderer",value:function(t,e){var i=t,r=i.renderer=null;return document.createElementNS&&"HTML5"!==i.renderEngine&&(r=new JQX.Utilities.SvgRenderer(this)),null!==r||"HTML5"!==i.renderEngine&&void 0!==i.renderEngine||(r=new JQX.Utilities.HTML5Renderer(this)),r.init(e),i.renderer=r,r}},{key:"getByPriority",value:function(t){for(var e=void 0,i=0;i<t.length;i++){var r=t[i];if(void 0!==r&&null!==r&&""!==r){e=r;break}}return e}},{key:"get",value:function(t,e,i){return void 0!==i?t[e][i]:t[e]}},{key:"min",value:function(t,e){for(var i=NaN,r=0;r<t.length;r++){var a=this.get(t,r,e);(isNaN(i)||a<i)&&(i=a)}return i}},{key:"max",value:function(t,e){for(var i=NaN,r=0;r<t.length;r++){var a=this.get(t,r,e);(isNaN(i)||a>i)&&(i=a)}return i}},{key:"sum",value:function(t,e){for(var i=0,r=0;r<t.length;r++){var a=this.get(t,r,e);isNaN(a)||(i+=a)}return i}},{key:"count",value:function(t,e){for(var i=0,r=0;r<t.length;r++){var a=this.get(t,r,e);isNaN(a)||i++}return i}},{key:"avg",value:function(t,e){return this.sum(t,e)/Math.max(1,this.count(t,e))}},{key:"filter",value:function(t,e){if(!e)return t;for(var i=[],r=0;r<t.length;r++)e(t[r])&&i.push(t[r]);return i}},{key:"scale",value:function(t,e,i,r){if(isNaN(t))return NaN;if((t<Math.min(e.min,e.max)||t>Math.max(e.min,e.max))&&(!r||!0!==r.ignore_range))return NaN;var a=NaN,n=1;if(void 0===e.type||"logarithmic"!==e.type){var s=Math.abs(e.max-e.min);s||(s=1),n=Math.abs(t-Math.min(e.min,e.max))/s}else if("logarithmic"===e.type){var h=e.base;isNaN(h)&&(h=10);var o=Math.min(e.min,e.max);o<=0&&(o=1);var l=Math.max(e.min,e.max);l<=0&&(l=1);var u=this.log(l,h);l=Math.pow(h,u);var c=this.log(o,h);o=Math.pow(h,c);var d=this.log(t,h);n=Math.abs(d-c)/(u-c)}if("logarithmic"===i.type){var v=i.base;isNaN(v)&&(v=10);var f=this.log(i.max,v),p=this.log(i.min,v);i.flip&&(n=1-n);var g=Math.min(p,f)+n*Math.abs(f-p);a=Math.pow(v,g)}else a=Math.min(i.min,i.max)+n*Math.abs(i.max-i.min),i.flip&&(a=Math.max(i.min,i.max)-a+i.min);return a}},{key:"axis",value:function(t,e,i){if(i<=1)return[e,t];(isNaN(i)||i<2)&&(i=2);for(var r=0;Math.round(t)!==t&&Math.round(e)!==e&&r<10;)t*=10,e*=10,r++;for(var a=(e-t)/i;r<10&&Math.round(a)!==a;)t*=10,e*=10,a*=10,r++;for(var n=[1,2,5],s=0,h=void 0;;){var o=s%n.length,l=Math.floor(s/n.length),u=Math.pow(10,l)*n[o];if(o=(s+1)%n.length,l=Math.floor((s+1)/n.length),h=Math.pow(10,l)*n[o],a>=u&&a<h)break;s++}for(var c=h,d=[],v=this.renderer._rnd(t,c,!1),f=r<=0?1:Math.pow(10,r);v<e+c;)d.push(v/f),v+=c;return d}},{key:"_widgetToImage",value:function(t,e,i,r,a){var n=t;if(!n)return!1;void 0!==i&&""!==i||(i="image."+e);var s=n.renderEngine,h=n.animation;if(n.animation="none",n.renderEngine="HTML5",n.renderEngine!==s)try{n.refresh()}catch(t){return n.renderEngine=s,n.refresh(),n.animation=h,!1}var o=n.renderer.getContainer().firstElementChild,l=!0;"function"==typeof r&&(l=r(t,o));var u=!0;return l&&(u=this.exportImage(t,o,e,i,a)),n.renderEngine!==s&&(n.renderEngine=s,n.refresh(),n.animation=h),u}},{key:"_saveAsImage",value:function(t,e){return this._widgetToImage(this,t,e)}},{key:"saveAsPNG",value:function(t){return this._saveAsImage("png",t)}},{key:"saveAsJPEG",value:function(t){return this._saveAsImage("jpeg",t)}},{key:"exportImage",value:function(t,e,i,r,a){if(!e)return!1;var n="pdf"===i.toLowerCase();n&&(i="jpeg"),void 0!==r&&""!==r||(r="image."+i);var s=!0;if("print"!==i){try{if(e)if(n){a=a||"portrait";var h=e.toDataURL("image/"+i),o={content:{image:h,width:Math.min(e.width/1.35,"portrait"===a?515:762)},pageOrientation:a};try{pdfMake.createPdf(o).download(r)}catch(e){t.error(t.localize("missingReference",{files:"pdfmake.min.js"}))}}else{JQX.Utilities.DataExporter||t.error(t.localize("missingReference",{files:"jqxexport.js"}));var l=new JQX.Utilities.DataExporter;e.toBlob(function(t){l.downloadFile(t,i,r)})}}catch(t){s=!1}return s}var u=window.open("","","width=800,height=500"),c=u.document.open(),d='<!DOCTYPE html><html><head><meta charset="utf-8" /><title>jQWidgets Chart</title></head><body><img src="'+e.toDataURL()+'" /></html>';try{c.write(d),c.close(),setTimeout(function(){u.print(),u.close()},100)}catch(t){}}}]),t}()),JQX.Utilities.Assign("Renderer",function(){function t(e){babelHelpers.classCallCheck(this,t);var i=this;i.draw=e,i._gradients={},i._toRadiansCoefficient=2*Math.PI/360}return babelHelpers.createClass(t,[{key:"pieSlicePath",value:function(t,e,i,r,a,n,s){r||(r=1);var h=Math.abs(a-n),o=h>180?1:0;h>=360&&(n=a+359.99);var l=a*this._toRadiansCoefficient,u=n*this._toRadiansCoefficient,c=t,d=t,v=e,f=e,p=!isNaN(i)&&i>0;p&&(s=0);var g=Math.cos(l),y=Math.sin(l),m=Math.cos(u),_=Math.sin(u);if(s+i>0){if(s>0){var x=h/2+a,M=x*this._toRadiansCoefficient;t+=s*Math.cos(M),e-=s*Math.sin(M)}p&&(c=t+i*g,v=e-i*y,d=t+i*m,f=e-i*_)}var k=t+r*g,b=t+r*m,w=e-r*y,N=e-r*_,C="",T=Math.abs(Math.abs(n-a)-360)>.02;return p?(C="M "+d+","+f,C+=" a"+i+","+i,C+=" 0 "+o+",1 "+(c-d)+","+(v-f),C+=T?" L"+k+","+w:" M"+k+","+w,C+=" a"+r+","+r,C+=" 0 "+o+",0 "+(b-k)+","+(N-w),T&&(C+=" Z")):(C="M "+b+","+N,C+=" a"+r+","+r,C+=" 0 "+o+",1 "+(k-b)+","+(w-N),T&&(C+=" L"+t+","+e,C+=" Z")),C}},{key:"measureText",value:function(t,e,i,r){var a=this._getTextParts(t,e,i),n=a.width,s=a.height;!1===r&&(s/=.6);var h={};if(isNaN(e)&&(e=0),0===e)h={width:this._rup(n),height:this._rup(s)};else{var o=e*Math.PI*2/360,l=Math.abs(Math.sin(o)),u=Math.abs(Math.cos(o)),c=Math.abs(n*l+s*u),d=Math.abs(n*u+s*l);h={width:this._rup(d),height:this._rup(c)}}return r&&(h.textPartsInfo=a),h}},{key:"alignTextInRect",value:function(t,e,i,r,a,n,s,h,o,l){var u=o*Math.PI*2/360,c=Math.sin(u),d=Math.cos(u),v=a*c,f=a*d;"center"===s||""===s||"undefined"===s?t+=i/2:"right"===s&&(t+=i),"center"===h||"middle"===h||""===h||"undefined"===h?e+=r/2:"bottom"===h?e+=r-n/2:"top"===h&&(e+=n/2),l=l||"";var p="middle";-1!==l.indexOf("top")?p="top":-1!==l.indexOf("bottom")&&(p="bottom");var g="center";return-1!==l.indexOf("left")?g="left":-1!==l.indexOf("right")&&(g="right"),"center"===g?(t-=f/2,e-=v/2):"right"===g&&(t-=f,e-=v),"top"===p?(t-=n*c,e+=n*d):"middle"===p&&(t-=n*c/2,e+=n*d/2),t=this._rup(t),e=this._rup(e),{x:t,y:e}}},{key:"adjustColor",value:function(t,e){if("string"!=typeof t)return"#000000";if(-1===t.indexOf("#"))return t;var i=this.draw,r=i.cssToRgb(t),a=i.rgbToHsl(r);a[2]=Math.min(1,a[2]*e),a[1]=Math.min(1,a[1]*e*1.1),r=i.hslToRgb(a),t="#";for(var n=0;n<3;n++){var s=Math.round(r[n]);s=i.decToHex(s),1===s.toString().length&&(t+="0"),t+=s}return t.toUpperCase()}},{key:"_rup",value:function(t){var e=Math.round(t);return t>e&&e++,e}},{key:"_ptdist",value:function(t,e,i,r){return Math.sqrt((i-t)*(i-t)+(r-e)*(r-e))}},{key:"_rnd",value:function(t,e,i,r){if(isNaN(t))return t;void 0===r&&(r=!0);var a=t-(!0===r?t%e:this._mod(t,e));return t===a?a:(i?t>a&&(a+=e):a>t&&(a-=e),1===e?Math.round(a):a)}},{key:"_ptrnd",value:function(t){if(!document.createElementNS)return Math.round(t)===t?t:this._rnd(t,1,!1,!0);var e=this._rnd(t,.5,!1,!0);return.5!==Math.abs(e-Math.round(e))?e>t?e-.5:e+.5:e}},{key:"_getContrastColor",value:function(t){if(void 0!==t){var e=this.draw.hexToRgb(t.slice(1,3),t.slice(3,5),t.slice(5,7));return(.299*e[0]+.587*e[1]+.114*e[2])/255>.6?"#000000":"#FFFFFF"}}}]),t}()),JQX.Utilities.Assign("SvgRenderer",function(t){function e(t){babelHelpers.classCallCheck(this,e);var i=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=i;return r._svgns="http://www.w3.org/2000/svg",r._openGroups=[],r._clipId=0,i}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"init",value:function(t){var e=document.createElement("div");e.className="drawContainer",e.onselectstart=function(){return!1},t.appendChild(e),this.host=t,this.container=e;try{var i=document.createElementNS(this._svgns,"svg");i.setAttribute("version","1.1"),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("overflow","hidden"),e.appendChild(i),this.canvas=i}catch(t){return!1}return this._id=(new Date).getTime(),this.clear(),!0}},{key:"getType",value:function(){return"SVG"}},{key:"refresh",value:function(){}},{key:"getRect",value:function(){return{x:0,y:0,width:Math.max(this._rup(this.host.offsetWidth)-1,0),height:Math.max(this._rup(this.host.offsetHeight)-1,0)}}},{key:"getContainer",value:function(){return this.container}},{key:"clear",value:function(){for(;this.canvas.childNodes.length>0;)this.removeElement(this.canvas.firstElementChild);this._defaultParent=void 0,this._defs=document.createElementNS(this._svgns,"defs"),this._gradients={},this.canvas.appendChild(this._defs)}},{key:"removeElement",value:function(t){if(void 0!==t)try{for(;t.firstChild;)this.removeElement(t.firstChild);t.parentNode?t.parentNode.removeChild(t):this.canvas.removeChild(t)}catch(t){}}},{key:"beginGroup",value:function(){var t=this._activeParent(),e=document.createElementNS(this._svgns,"g");return t.appendChild(e),this._openGroups.push(e),e}},{key:"endGroup",value:function(){0!==this._openGroups.length&&this._openGroups.pop()}},{key:"_activeParent",value:function(){return 0===this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]}},{key:"createClipRect",value:function(t){var e=document.createElementNS(this._svgns,"clipPath"),i=document.createElementNS(this._svgns,"rect");return this.attr(i,{x:t.x,y:t.y,width:t.width,height:t.height,fill:"none"}),this._clipId=this._clipId||0,e.id="cl"+this._id+"_"+(++this._clipId).toString(),e.appendChild(i),this._defs.appendChild(e),e}},{key:"getWindowHref",value:function(){var t=window.location.href;return t?(t=t.replace(/([\('\)])/g,"\\$1"),t=t.replace(/#.*$/,"")):t}},{key:"setClip",value:function(t,e){var i="url("+this.getWindowHref()+"#"+e.id+")";return this.attr(t,{"clip-path":i})}},{key:"addHandler",value:function(t,e,i){t.addEventListener(e,i)}},{key:"removeHandler",value:function(){}},{key:"on",value:function(t,e,i){this.addHandler(t,e,i)}},{key:"off",value:function(t,e,i){this.removeHandler(t,e,i)}},{key:"shape",value:function(t,e){var i=document.createElementNS(this._svgns,t);if(i){for(var r in e)i.setAttribute(r,e[r]);return this._activeParent().appendChild(i),i}}},{key:"_getTextParts",value:function(t,e,i){var r={width:0,height:0,parts:[]};if(void 0===t)return r;var a=t.toString().split("<br>"),n=this._activeParent(),s=document.createElementNS(this._svgns,"text");this.attr(s,i);for(var h=0;h<a.length;h++){var o=a[h],l=s.ownerDocument.createTextNode(o);s.appendChild(l),n.appendChild(s);var u=void 0;try{u=s.getBBox()}catch(t){}var c=this._rup(u.width),d=this._rup(.6*u.height);s.removeChild(l),r.width=Math.max(r.width,c),r.height+=d+(h>0?4:0),r.parts.push({width:c,height:d,text:o})}return n.removeChild(s),r}},{key:"_measureText",value:function(t,i,r,a){return babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"measureText",this).call(this,t,i,r,a)}},{key:"measureText",value:function(t,e,i){return this._measureText(t,e,i,!1)}},{key:"text",value:function(t,e,i,r,a,n,s,h,o,l,u){var c=this._measureText(t,n,s,!0,this),d=c.textPartsInfo,v=d.parts,f=this._getContrastColor(arguments[11]),p=void 0;if(o||(o="center"),l||(l="center"),(v.length>1||h)&&(p=this.beginGroup()),h){var g=this.createClipRect({x:this._rup(e)-1,y:this._rup(i)-1,width:this._rup(r)+2,height:this._rup(a)+2});this.setClip(p,g)}var y=this._activeParent(),m=0,_=0;m=d.width,_=d.height,(isNaN(r)||r<=0)&&(r=m),(isNaN(a)||a<=0)&&(a=_);var x=r||0,M=a||0,k=0;if(!n||0===n){i+=_,"center"===l||"middle"===l?i+=(M-_)/2:"bottom"===l&&(i+=M-_),r||(r=m),a||(a=_),y=this._activeParent();for(var b=void 0,w=v.length-1;w>=0;w--){b=document.createElementNS(this._svgns,"text"),this.attr(b,s),this.attr(b,{cursor:"default"});var N=b.ownerDocument.createTextNode(v[w].text);b.appendChild(N);var C=e,T=v[w].width,P=v[w].height;"center"===o?C+=(x-T)/2:"right"===o&&(C+=x-T),this.attr(b,{x:this._rup(C),y:this._rup(i+k),width:this._rup(T),height:this._rup(P)}),void 0!==f&&(b.style.fill=f),y.appendChild(b),k-=v[w].height+4}return p?(this.endGroup(),p):b}var R=this.alignTextInRect(e,i,r,a,m,_,o,l,n,u);e=R.x,i=R.y;var S=this.shape("g",{transform:"translate("+e+","+i+")"}),H=this.shape("g",{transform:"rotate("+n+")"});S.appendChild(H),k=0;for(var E=v.length-1;E>=0;E--){var I=document.createElementNS(this._svgns,"text");this.attr(I,s),this.attr(I,{cursor:"default"});var A=I.ownerDocument.createTextNode(v[E].text);I.appendChild(A);var G=0,F=v[E].width,L=v[E].height;"center"===o?G+=(d.width-F)/2:"right"===o&&(G+=d.width-F),this.attr(I,{x:this._rup(G),y:this._rup(k),width:this._rup(F),height:this._rup(L)}),H.appendChild(I),k-=L+4}return y.appendChild(S),p&&this.endGroup(),S}},{key:"line",value:function(t,e,i,r,a){var n=this.shape("line",{x1:t,y1:e,x2:i,y2:r});return this.attr(n,a),n}},{key:"path",value:function(t,e){var i=this.shape("path");return i.setAttribute("d",t),e&&this.attr(i,e),i}},{key:"rect",value:function(t,e,i,r,a){t=this._ptrnd(t),e=this._ptrnd(e),i=Math.max(1,this._rnd(i,1,!1)),r=Math.max(1,this._rnd(r,1,!1));var n=this.shape("rect",{x:t,y:e,width:i,height:r});return a&&this.attr(n,a),n}},{key:"circle",value:function(t,e,i,r){var a=this.shape("circle",{cx:t,cy:e,r:i});return r&&this.attr(a,r),a}},{key:"pieslice",value:function(t,e,i,r,a,n,s,h){var o=this.pieSlicePath(t,e,i,r,a,n,s),l=this.shape("path");return l.setAttribute("d",o),h&&this.attr(l,h),l}},{key:"attr",value:function(t,e){if(t&&e)for(var i in e)"textContent"===i?t.textContent=e[i]:t.setAttribute(i,e[i])}},{key:"removeAttr",value:function(t,e){if(t&&e)for(var i in e)"textContent"===i?t.textContent="":t.removeAttribute(e[i])}},{key:"getAttr",value:function(t,e){return t.getAttribute(e)}},{key:"_toLinearGradient",value:function(t,e,i){var r="grd"+this._id+t.replace("#","")+(e?"v":"h"),a="url("+this.getWindowHref()+"#"+r+")";if(this._gradients[a])return a;var n=document.createElementNS(this._svgns,"linearGradient");this.attr(n,{x1:"0%",y1:"0%",x2:e?"0%":"100%",y2:e?"100%":"0%",id:r});for(var s=0;s<i.length;s++){var h=i[s],o=document.createElementNS(this._svgns,"stop"),l="stop-color:"+this.adjustColor(t,h[1]);this.attr(o,{offset:h[0]+"%",style:l}),n.appendChild(o)}return this._defs.appendChild(n),this._gradients[a]=!0,a}},{key:"_toRadialGradient",value:function(t,e,i){var r="grd"+this._id+t.replace("#","")+"r"+(void 0!==i?i.key:""),a="url("+this.getWindowHref()+"#"+r+")";if(this._gradients[a])return a;var n=document.createElementNS(this._svgns,"radialGradient");void 0===i?this.attr(n,{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:r}):this.attr(n,{cx:i.x,cy:i.y,r:i.outerRadius,id:r,gradientUnits:"userSpaceOnUse"});for(var s=0;s<e.length;s++){var h=e[s],o=document.createElementNS(this._svgns,"stop"),l="stop-color:"+this.adjustColor(t,h[1]);this.attr(o,{offset:h[0]+"%",style:l}),n.appendChild(o)}return this._defs.appendChild(n),this._gradients[a]=!0,a}}]),e}(JQX.Utilities.Renderer)),JQX.Utilities.Assign("HTML5Renderer",function(t){function e(t){babelHelpers.classCallCheck(this,e);var i=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=i;return r._renderers=new JQX.Utilities.HTML5RenderHelpers(r),i}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"init",value:function(t){try{this.host=t;var e=document.createElement("div"),i=document.createElement("canvas");e.className="chartContainer",e.style.position="relative",e.onselectstart=function(){return!1},i.id="__jqxCanvasWrap",i.style.width="100%",i.style.height="100%",e.appendChild(i),t.appendChild(e),this.canvas=i,i.width=t.offsetWidth,i.height=t.offsetHeight,this.ctx=i.getContext("2d"),this._elements={},this._maxId=0,this._gradientId=0,this._gradients={},this._currentPoint={x:0,y:0},this._lastCmd="",this._pos=0}catch(t){return!1}return!0}},{key:"getType",value:function(){return"HTML5"}},{key:"getContainer",value:function(){return this.host.getElementsByClassName("chartContainer")[0]}},{key:"getRect",value:function(){return{x:0,y:0,width:this.canvas.width-1,height:this.canvas.height-1}}},{key:"beginGroup",value:function(){}},{key:"endGroup",value:function(){}},{key:"setClip",value:function(){}},{key:"createClipRect",value:function(){}},{key:"addHandler",value:function(){}},{key:"removeHandler",value:function(){}},{key:"on",value:function(t,e,i){this.addHandler(t,e,i)}},{key:"off",value:function(t,e,i){this.removeHandler(t,e,i)}},{key:"clear",value:function(){this._elements={},this._maxId=0,this._renderers._gradients={},this._gradientId=0}},{key:"removeElement",value:function(t){void 0!==t&&this._elements[t.id]&&delete this._elements[t.id]}},{key:"shape",value:function(t,e){var i={type:t,id:this._maxId++};for(var r in e)i[r]=e[r];return this._elements[i.id]=i,i}},{key:"attr",value:function(t,e){for(var i in e)t[i]=e[i]}},{key:"removeAttr",value:function(t,e){for(var i in e)delete t[e[i]]}},{key:"rect",value:function(t,e,i,r,a){if(isNaN(t))throw'Invalid value for "x"';if(isNaN(e))throw'Invalid value for "y"';if(isNaN(i))throw'Invalid value for "width"';if(isNaN(r))throw'Invalid value for "height"';var n=this.shape("rect",{x:t,y:e,width:i,height:r});return a&&this.attr(n,a),n}},{key:"path",value:function(t,e){var i=this.shape("path",e);return this.attr(i,{d:t}),i}},{key:"line",value:function(t,e,i,r,a){return this.path("M "+t+","+e+" L "+i+","+r,a)}},{key:"circle",value:function(t,e,i,r){var a=this.shape("circle",{x:t,y:e,r:i});return r&&this.attr(a,r),a}},{key:"pieslice",value:function(t,e,i,r,a,n,s,h){var o=this.path(this.pieSlicePath(t,e,i,r,a,n,s),h);return this.attr(o,{x:t,y:e,innerRadius:i,outerRadius:r,angleFrom:a,angleTo:n}),o}},{key:"_getCSSStyle",value:function(t){var e=document.createElement("div");e.className=t,e.style.position="absolute",e.style.visibility="hidden",this.host.appendChild(e);var i=window.getComputedStyle(e);return i={color:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight},this.host.removeChild(e),i}},{key:"_getTextParts",value:function(t,e,i){var r="Arial",a="10pt",n="";if(i&&i.class){var s=this._getCSSStyle(i.class);s.fontSize&&(a=s.fontSize),s.fontFamily&&(r=s.fontFamily),s.fontWeight&&(n=s.fontWeight)}this.ctx.font=n+" "+a+" "+r;for(var h={width:0,height:0,parts:[]},o=t.toString().split("<br>"),l=0;l<o.length;l++){var u=o[l],c=this.ctx.measureText(u).width,d=document.createElement("span");d.className="jqxchart",d.font=this.ctx.font,d.textContent=u,this.host.appendChild(d);var v=.6*d.offsetHeight;this.host.removeChild(d),h.width=Math.max(h.width,this._rup(c)),h.height+=v+(l>0?4:0),h.parts.push({width:c,height:v,text:u})}return h}},{key:"_measureText",value:function(t,i,r,a){return babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"measureText",this).call(this,t,i,r,a)}},{key:"measureText",value:function(t,e,i){return this._measureText(t,e,i,!1)}},{key:"text",value:function(t,e,i,r,a,n,s,h,o,l,u){var c=this.shape("text",{text:t,x:e,y:i,width:r,height:a,angle:n,clip:h,halign:o,valign:l,rotateAround:u});if(s&&this.attr(c,s),c.fontFamily="Arial",c.fontSize="10pt",c.fontWeight="",c.color=this._getContrastColor(arguments[11]),s&&s.class){var d=this._getCSSStyle(s.class);c.fontFamily=d.fontFamily||c.fontFamily,c.fontSize=d.fontSize||c.fontSize,c.fontWeight=d.fontWeight||c.fontWeight,c.color=c.color||d.color}c.color=c.color||"#000000";var v=this._measureText(t,0,s,!0);return this.attr(c,{textPartsInfo:v.textPartsInfo,textWidth:v.width,textHeight:v.height}),(r<=0||isNaN(r))&&this.attr(c,{width:v.width}),(a<=0||isNaN(a))&&this.attr(c,{height:v.height}),c}},{key:"_toLinearGradient",value:function(t,e,i){if(this._renderers._gradients[t])return t;for(var r=[],a=0;a<i.length;a++)r.push({percent:i[a][0]/100,color:this.adjustColor(t,i[a][1])});var n="gr"+this._gradientId++;return this.createGradient(n,e?"vertical":"horizontal",r),n}},{key:"_toRadialGradient",value:function(t,e){if(this._renderers._gradients[t])return t;for(var i=[],r=0;r<e.length;r++)i.push({percent:e[r][0]/100,color:this.adjustColor(t,e[r][1])});var a="gr"+this._gradientId++;return this.createGradient(a,"radial",i),a}},{key:"createGradient",value:function(t,e,i){this._renderers.createGradient(this,t,e,i)}},{key:"refresh",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t in this._elements){var e=this._elements[t];this._renderers.setFillStyle(this,e),this._renderers.setStroke(this,e),this._renderers[this._elements[t].type](this.ctx,e)}}}]),e}(JQX.Utilities.Renderer)),JQX.Utilities.Assign("HTML5RenderHelpers",function(){function t(e){babelHelpers.classCallCheck(this,t),this.HTML5Renderer=e,this._cmds="mlcazq"}return babelHelpers.createClass(t,[{key:"ptrnd",value:function(t){if(.5===Math.abs(Math.round(t)-t))return t;var e=Math.round(t);return e<t&&(e-=1),e+.5}},{key:"createGradient",value:function(t,e,i,r){t._gradients[e]={orientation:i,colorStops:r}}},{key:"setStroke",value:function(t,e){var i=t.ctx,r=e["stroke-width"];i.strokeStyle=e.stroke||"transparent",i.lineWidth=0===r?.01:void 0!==r?r:1,void 0!==e["fill-opacity"]?i.globalAlpha=e["fill-opacity"]:void 0!==e.opacity?i.globalAlpha=e.opacity:i.globalAlpha=1,i.setLineDash&&(e["stroke-dasharray"]?i.setLineDash(e["stroke-dasharray"].split(",")):i.setLineDash([]))}},{key:"setFillStyle",value:function(t,e){var i=t.ctx;if(i.fillStyle="transparent",void 0!==e["fill-opacity"]?i.globalAlpha=e["fill-opacity"]:void 0!==e.opacity?i.globalAlpha=e.opacity:i.globalAlpha=1,e.fill&&-1===e.fill.indexOf("#")&&t._gradients[e.fill]){var r="horizontal"!==t._gradients[e.fill].orientation,a="radial"===t._gradients[e.fill].orientation,n=this.ptrnd(e.x),s=this.ptrnd(e.y),h=this.ptrnd(e.x+(r?0:e.width)),o=this.ptrnd(e.y+(r?e.height:0)),l=void 0;if(("circle"===e.type||"path"===e.type||"rect"===e.type)&&a){var u=this.ptrnd(e.x),c=this.ptrnd(e.y),d=e.innerRadius||0,v=e.outerRadius||e.r||0;"rect"===e.type&&(u+=e.width/2,c+=e.height/2),l=i.createRadialGradient(u,c,d,u,c,v)}a||((isNaN(n)||isNaN(h)||isNaN(s)||isNaN(o))&&(n=0,s=0,h=r?0:i.canvas.width,o=r?i.canvas.height:0),l=i.createLinearGradient(n,s,h,o));for(var f=t._gradients[e.fill].colorStops,p=0;p<f.length;p++)l.addColorStop(f[p].percent,f[p].color);i.fillStyle=l}else e.fill&&(i.fillStyle=e.fill)}},{key:"rect",value:function(t,e){0!==e.width&&0!==e.height&&(t.fillRect(this.ptrnd(e.x),this.ptrnd(e.y),e.width,e.height),t.strokeRect(this.ptrnd(e.x),this.ptrnd(e.y),e.width,e.height))}},{key:"circle",value:function(t,e){0!==e.r&&(t.beginPath(),t.arc(this.ptrnd(e.x),this.ptrnd(e.y),e.r,0,2*Math.PI,!1),t.closePath(),t.fill(),t.stroke())}},{key:"_parsePoint",value:function(t){return{x:this._parseNumber(t),y:this._parseNumber(t)}}},{key:"_parseNumber",value:function(t){var e=!1,i=void 0;for(i=this._pos;i<t.length;i++)if(t[i]>="0"&&t[i]<="9"||"."===t[i]||"e"===t[i]||"-"===t[i]&&!e||"-"===t[i]&&i>=1&&"e"===t[i-1])e=!0;else{if(e||" "!==t[i]&&","!==t[i])break;this._pos++}var r=parseFloat(t.substring(this._pos,i));if(!isNaN(r))return this._pos=i,r}},{key:"_isRelativeCmd",value:function(t){return-1!==this._cmds.indexOf(t)}},{key:"_parseCmd",value:function(t){for(var e=this._pos;e<t.length;e++){if(-1!==this._cmds.toLowerCase().indexOf(t[e].toLowerCase()))return this._pos=e+1,this._lastCmd=t[e],this._lastCmd;if(" "!==t[e]){if(t[e]>="0"&&t[e]<="9"){if(this._pos=e,""===this._lastCmd)break;return this._lastCmd}}else this._pos++}}},{key:"_toAbsolutePoint",value:function(t){return{x:this._currentPoint.x+t.x,y:this._currentPoint.y+t.y}}},{key:"path",value:function(t,e){var i=this,r=e.d;this._pos=0,this._lastCmd="";var a=void 0;for(this._currentPoint={x:0,y:0},t.beginPath();this._pos<r.length;){var n=this._parseCmd(r);if(void 0===n)break;if("M"!==n&&"m"!==n)if("L"!==n&&"l"!==n){if("A"===n||"a"===n){var s=function(){var e=i._parseNumber(r),a=i._parseNumber(r),s=i._parseNumber(r)*(Math.PI/180),h=i._parseNumber(r),o=i._parseNumber(r),l=i._parsePoint(r);if(i._isRelativeCmd(n)&&(l=i._toAbsolutePoint(l)),0===e||0===a)return"continue";var u=i._currentPoint,c={x:Math.cos(s)*(u.x-l.x)/2+Math.sin(s)*(u.y-l.y)/2,y:-Math.sin(s)*(u.x-l.x)/2+Math.cos(s)*(u.y-l.y)/2},d=Math.pow(c.x,2)/Math.pow(e,2)+Math.pow(c.y,2)/Math.pow(a,2);d>1&&(e*=Math.sqrt(d),a*=Math.sqrt(d));var v=(h===o?-1:1)*Math.sqrt((Math.pow(e,2)*Math.pow(a,2)-Math.pow(e,2)*Math.pow(c.y,2)-Math.pow(a,2)*Math.pow(c.x,2))/(Math.pow(e,2)*Math.pow(c.y,2)+Math.pow(a,2)*Math.pow(c.x,2)));isNaN(v)&&(v=0);var f={x:v*e*c.y/a,y:v*-a*c.x/e},p={x:(u.x+l.x)/2+Math.cos(s)*f.x-Math.sin(s)*f.y,y:(u.y+l.y)/2+Math.sin(s)*f.x+Math.cos(s)*f.y},g=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},y=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(g(t)*g(e))},m=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(y(t,e))},_=m([1,0],[(c.x-f.x)/e,(c.y-f.y)/a]),x=[(c.x-f.x)/e,(c.y-f.y)/a],M=[(-c.x-f.x)/e,(-c.y-f.y)/a],k=m(x,M);y(x,M)<=-1&&(k=Math.PI),y(x,M)>=1&&(k=0),0===o&&k>0&&(k-=2*Math.PI),1===o&&k<0&&(k+=2*Math.PI);var b=e>a?e:a,w=e>a?1:e/a,N=e>a?a/e:1;return t.translate(p.x,p.y),t.rotate(s),t.scale(w,N),t.arc(0,0,b,_,_+k,1-o),t.scale(1/w,1/N),t.rotate(-s),t.translate(-p.x,-p.y),"continue"}();if("continue"===s)continue}if("Z"!==n&&"z"!==n||void 0===a)if("C"!==n&&"c"!==n)if("Q"!==n&&"q"!==n);else{var h=this._parsePoint(r),o=this._parsePoint(r);t.quadraticCurveTo(h.x,h.y,o.x,o.y),this._currentPoint=o}else{var l=this._parsePoint(r),u=this._parsePoint(r),c=this._parsePoint(r);t.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y),this._currentPoint=c}else t.lineTo(a.x,a.y),this._currentPoint=a}else{var d=this._parsePoint(r);if(void 0===d)break;t.lineTo(d.x,d.y),this._currentPoint=d}else{var v=this._parsePoint(r);if(void 0===v)break;t.moveTo(v.x,v.y),this._currentPoint=v,void 0===a&&(a=v)}}t.fill(),t.stroke(),t.closePath()}},{key:"text",value:function(t,e){var i=this.ptrnd(e.x),r=this.ptrnd(e.y),a=this.ptrnd(e.width),n=this.ptrnd(e.height),s=e.halign,h=e.valign,o=e.angle,l=e.rotateAround,u=e.textPartsInfo,c=u.parts,d=e.clip;void 0===d&&(d=!0),t.save(),s||(s="center"),h||(h="center"),d&&(t.rect(i,r,a,n),t.clip());var v=e.textWidth,f=e.textHeight,p=a||0,g=n||0;if(t.fillStyle=e.color,t.font=e.fontWeight+" "+e.fontSize+" "+e.fontFamily,!o||0===o){r+=f,"center"===h||"middle"===h?r+=(g-f)/2:"bottom"===h&&(r+=g-f),a||(a=v),n||(n=f);for(var y=0,m=c.length-1;m>=0;m--){var _=c[m],x=i,M=c[m].width;"center"===s?x+=(p-M)/2:"right"===s&&(x+=p-M),t.fillText(_.text,x,r+y),y-=_.height+(m>0?4:0)}return void t.restore()}var k=this.HTML5Renderer.alignTextInRect(i,r,a,n,v,f,s,h,o,l);i=k.x,r=k.y;var b=o*Math.PI*2/360;t.translate(i,r),t.rotate(b);for(var w=0,N=u.width,C=c.length-1;C>=0;C--){var T=0;"center"===s?T+=(N-c[C].width)/2:"right"===s&&(T+=N-c[C].width),t.fillText(c[C].text,T,w),w-=c[C].height+4}t.restore()}}]),t}()),JQX.Utilities.Assign("Plot",function(){function t(e){babelHelpers.classCallCheck(this,t),this.renderer=e}return babelHelpers.createClass(t,[{key:"get",value:function(t,e,i){return void 0!==i?t[e][i]:t[e]}},{key:"min",value:function(t,e){for(var i=NaN,r=0;r<t.length;r++){var a=this.get(t,r,e);(isNaN(i)||a<i)&&(i=a)}return i}},{key:"max",value:function(t,e){for(var i=NaN,r=0;r<t.length;r++){var a=this.get(t,r,e);(isNaN(i)||a>i)&&(i=a)}return i}},{key:"sum",value:function(t,e){for(var i=0,r=0;r<t.length;r++){var a=this.get(t,r,e);isNaN(a)||(i+=a)}return i}},{key:"count",value:function(t,e){for(var i=0,r=0;r<t.length;r++){var a=this.get(t,r,e);isNaN(a)||i++}return i}},{key:"avg",value:function(t,e){return this.sum(t,e)/Math.max(1,this.count(t,e))}},{key:"filter",value:function(t,e){if(!e)return t;for(var i=[],r=0;r<t.length;r++)e(t[r])&&i.push(t[r]);return i}},{key:"scale",value:function(t,e,i,r){if(isNaN(t))return NaN;if((t<Math.min(e.min,e.max)||t>Math.max(e.min,e.max))&&(!r||!0!==r.ignore_range))return NaN;var a=NaN,n=1;if(void 0===e.type||"logarithmic"!==e.type){var s=Math.abs(e.max-e.min);s||(s=1),n=Math.abs(t-Math.min(e.min,e.max))/s}else if("logarithmic"===e.type){var h=e.base;isNaN(h)&&(h=10);var o=Math.min(e.min,e.max);o<=0&&(o=1);var l=Math.max(e.min,e.max);l<=0&&(l=1);var u=Math.log(l)/Math.log(h);l=Math.pow(h,u);var c=Math.log(o)/Math.log(h);o=Math.pow(h,c);var d=Math.log(t)/Math.log(h);n=Math.abs(d-c)/(u-c)}if("logarithmic"===i.type){var v=i.base;isNaN(v)&&(v=10);var f=Math.log(i.max)/Math.log(v),p=Math.log(i.min)/Math.log(v);i.flip&&(n=1-n);var g=Math.min(p,f)+n*Math.abs(f-p);a=Math.pow(v,g)}else a=Math.min(i.min,i.max)+n*Math.abs(i.max-i.min),i.flip&&(a=Math.max(i.min,i.max)-a+i.min);return a}},{key:"axis",value:function(t,e,i){if(i<=1)return[e,t];(isNaN(i)||i<2)&&(i=2);for(var r=0;Math.round(t)!==t&&Math.round(e)!==e&&r<10;)t*=10,e*=10,r++;for(var a=(e-t)/i;r<10&&Math.round(a)!==a;)t*=10,e*=10,a*=10,r++;for(var n=[1,2,5],s=0,h=void 0;;){var o=s%n.length,l=Math.floor(s/n.length),u=Math.pow(10,l)*n[o];if(o=(s+1)%n.length,l=Math.floor((s+1)/n.length),h=Math.pow(10,l)*n[o],a>=u&&a<h)break;s++}for(var c=h,d=[],v=this.renderer._rnd(t,c,!1),f=r<=0?1:Math.pow(10,r);v<e+c;)d.push(v/f),v+=c;return d}}]),t}());
//# sourceMappingURL=jqxdraw.js.map
