"use strict";JQX("jqx-tooltip",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="content" class="jqx-tooltip-content" inner-h-t-m-l="[[innerHTML]]">\n                        <content></content>\n                    </div>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,o,n){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,o,n);var l=this,i=void 0;switch(e){case"openMode":l.close(),l._handleEventListeners(o),l._handleResize();break;case"selector":l._oldOwnerElement=l._ownerElement,l._handleSelector(n),l._handleEventListeners();break;case"tooltipTemplate":l._handleTemplate(o);break;case"value":l.tooltipTemplate?l._handleTemplate():l.$.content.innerHTML=l.value;break;case"visible":i=n?"open":"close",l.$.fireEvent(i,{owner:l._ownerElement})}l._applyPosition()}},{key:"ready",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),e._isParentPositionStatic="static"===window.getComputedStyle(e.parentElement||document.querySelector("body")).position,e._handleSelector(e.selector),e.visible&&e._applyPosition(),e._handleEventListeners(),e._handleResize(),e.value=e.$.content.innerHTML=e.value?e.value:e.innerHTML,e._handleTemplate()}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted){var o=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,o.concat(Array.prototype.slice.call(arguments)))}if(!e)return void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}));t.$.content.appendChild(e),t._applyPosition()}},{key:"close",value:function(){var e=this;e._isOpening&&clearTimeout(e._isOpening),e.visible&&(e.$.fireEvent("close",{owner:e._ownerElement}),e.visible=!1)}},{key:"insertBefore",value:function(e,t){var o=this;if(!o.isCompleted){var n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(o,n.concat(Array.prototype.slice.call(arguments)))}if(!e||!t)return void o.error(o.localize("invalidNode",{elementType:o.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}));o.$.content.insertBefore(e,t),o._applyPosition()}},{key:"open",value:function(){var e=this;e.disabled||e.readonly||e.visible||(e._isOpening=setTimeout(function(){e._applyPosition(),e.$.fireEvent("open",{owner:e._ownerElement});var t=e.context;e.context=e,e.visible=!0,e.context=t},e.delay))}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted){var o=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(t,o.concat(Array.prototype.slice.call(arguments)))}if(!e)return void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}));t.$.content.removeChild(e),t._applyPosition()}},{key:"toggle",value:function(){var e=this;e.visible?e.close():e.open()}},{key:"_applyPosition",value:function(){function e(e){for(var o=[],n=e.parentElement;n&&"BODY"!==n.nodeName;)o.push(n),n=!t.enableShadowDOM||n.parentElement?n.parentElement:n.getRootNode().host;return o}var t=this;if(t._ownerElement&&t.parentElement){t._isParentPositionStatic="static"===window.getComputedStyle(t.parentElement).position;var o=t._ownerElement.getBoundingClientRect(),n=t.parentElement?t.parentElement.getBoundingClientRect():{top:0,left:0},l=void 0,i=void 0;t.parentElement&&"BODY"===t.parentElement.nodeName.toUpperCase()?(l=o.top+window.scrollY+parseInt(t.offset[1]),i=o.left+window.scrollX+parseInt(t.offset[0])):(l=o.top-n.top+parseInt(t.offset[1]),i=o.left-n.left+parseInt(t.offset[0]));var r=function(){for(var o=e(t),n=o.length,l=null,i=t._ownerElement.getBoundingClientRect(),r=0;r<n;r++){if("static"!==window.getComputedStyle(o[r]).getPropertyValue("position")){l=o[r];break}}return{top:i.top,left:i.left,nonStaticParent:l}}(),a=t.position,s=void 0;switch(a){case"auto":case"bottom":case"top":case"left":case"right":var p=t["_position"+a.charAt(0).toUpperCase()+a.slice(1)](i,l,r);l=p.top,i=p.left,s=p.translate;break;case"absolute":l=parseInt(t.offset[1])||0,i=parseInt(t.offset[0])||0}s?t.$.container.style.setProperty("--jqx-tooltip-arrow-translate",s+"px"):t.$.container.style.removeProperty("--jqx-tooltip-arrow-translate"),t.style.top=l+"px",t.style.left=i+"px"}}},{key:"_positionAuto",value:function(e,t,o){for(var n=this,l=n._ownerElement.parentElement,i=void 0;l;){if("hidden"===getComputedStyle(l).getPropertyValue("overflow")){i=l;break}l=l.parentElement}i||(i=document.body);var r=i.getBoundingClientRect(),a=parseFloat(window.getComputedStyle(n).getPropertyValue("--jqx-tooltip-arrow-width"))||0,s=n._positionTop(e,t,o),p=o.nonStaticParent,f=n.offsetWidth/2-a,d=0,c=0;if(p){var m=p.getBoundingClientRect();d=m.top,c=m.left}return s.top+d>=r.top?(t=s.top,e=Math.max(r.left-c,s.left+Math.min(0,r.right-(s.left+c+n.offsetWidth))),{left:e,top:t,translate:Math.max(-f,Math.min(f,s.left-e))}):(s=n._positionBottom(e,t,o),s.top+n.offsetHeight+d<=r.bottom?(t=s.top,e=Math.max(r.left-c,s.left+Math.min(0,r.right-(s.left+c+n.offsetWidth))),{left:e,top:t,translate:Math.max(-f,Math.min(f,s.left-e))}):(s=n._positionLeft(e,t,o),t=s.top,f=n.offsetHeight/2-a,t=Math.max(r.top-d,s.top+Math.min(0,r.bottom-(s.top+d+n.offsetHeight))),s.left+c>=r.left?e=s.left:(s=n._positionRight(e,t,o),e=s.left),{left:e,top:t,translate:Math.max(-f,Math.min(f,s.top-t))}))}},{key:"_positionTop",value:function(e,t,o){var n=this;if(n.set("arrowDirection","bottom"),null===o.nonStaticParent)return t=o.top+window.scrollY-n.offsetHeight,e=o.left+window.scrollX-n.offsetWidth/2+n._ownerElement.offsetWidth/2,{left:e,top:t};if(n._isParentPositionStatic){if(t=n._ownerElement.offsetTop-n.offsetHeight,e=n._ownerElement.offsetLeft-n.offsetWidth/2+n._ownerElement.offsetWidth/2,n._ownerElement instanceof SVGElement){var l=n._ownerElement.getBoundingClientRect(),i=n._ownerElement.parentNode.getBoundingClientRect();t=l.top-i.top-n.offsetHeight/2,e=l.left-n.offsetWidth/2+i.left/2}return{left:e,top:t}}if(n._ownerElement instanceof SVGElement&&n._ownerElement.parentElement){var r=n._ownerElement.getBoundingClientRect(),a=n._ownerElement.parentNode.getBoundingClientRect();return t=r.top-a.top-n.offsetHeight,e=r.left-a.left-n.offsetWidth/2+r.width/2,{left:e,top:t}}return t-=n.offsetHeight,e=e-n.offsetWidth/2+n._ownerElement.offsetWidth/2,{left:e,top:t}}},{key:"_positionBottom",value:function(e,t,o){var n=this;return n.set("arrowDirection","top"),null===o.nonStaticParent?(t=o.top+window.scrollY+n._ownerElement.offsetHeight,e=o.left+window.scrollX-n.offsetWidth/2+n._ownerElement.offsetWidth/2,{left:e,top:t}):n._isParentPositionStatic?(t=n._ownerElement.offsetTop+n._ownerElement.offsetHeight,e=n._ownerElement.offsetLeft-n.offsetWidth/2+n._ownerElement.offsetWidth/2,{left:e,top:t}):(t+=n._ownerElement.offsetHeight,e=e-n.offsetWidth/2+n._ownerElement.offsetWidth/2,{left:e,top:t})}},{key:"_positionLeft",value:function(e,t,o){var n=this;return n.set("arrowDirection","right"),null===o.nonStaticParent?(t=o.top+window.scrollY+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2,e=o.left+window.scrollX-n.offsetWidth,{left:e,top:t}):n._isParentPositionStatic?(t=n._ownerElement.offsetTop+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2,e=n._ownerElement.offsetLeft-n.offsetWidth,{left:e,top:t}):(t=t+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2,e-=n.offsetWidth,{left:e,top:t})}},{key:"_positionRight",value:function(e,t,o){var n=this;return n.set("arrowDirection","left"),null===o.nonStaticParent?(t=o.top+window.scrollY+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2,e=o.left+window.scrollX+n._ownerElement.offsetWidth,{left:e,top:t}):n._isParentPositionStatic?(t=n._ownerElement.offsetTop+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2,e=n._ownerElement.offsetLeft+n._ownerElement.offsetWidth,{left:e,top:t}):(t=t+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2,e+=n._ownerElement.offsetWidth,{left:e,top:t})}},{key:"_eventsHandler",value:function(e){var t=this;if(!t.disabled&&!t.readonly)return"click"===e.type?void(t.visible?this.close():this.open()):void("mouseenter"===e.type||"focus"===e.type?this.open():this.close())}},{key:"_handleEventListeners",value:function(e){var t=this;if(t._oldOwnerElement&&"manual"!==t.openMode&&(t._oldOwnerElement.$.unlisten("mouseenter.tooltip"),t._oldOwnerElement.$.unlisten("mouseleave.tooltip"),t._oldOwnerElement.$.unlisten("focus.tooltip"),t._oldOwnerElement.$.unlisten("blur.tooltip"),t._oldOwnerElement.$.unlisten("click.tooltip"),t._oldOwnerElement=null),t._ownerElement){if(e)switch(e){case"hover":t._ownerElement.$.unlisten("mouseenter.tooltip"),t._ownerElement.$.unlisten("mouseleave.tooltip");break;case"focus":t._ownerElement.$.unlisten("focus.tooltip"),t._ownerElement.$.unlisten("blur.tooltip");break;case"click":t._ownerElement.$.unlisten("click.tooltip")}if("manual"!==t.openMode)switch(t._ownerElement instanceof JQX.BaseElement||(t._ownerElement.$=JQX.Utilities.Extend(t._ownerElement)),t.openMode){case"hover":t._ownerElement.$.listen("mouseenter.tooltip",t._eventsHandler.bind(t)),t._ownerElement.$.listen("mouseleave.tooltip",t._eventsHandler.bind(t));break;case"focus":t._ownerElement.$.listen("focus.tooltip",t._eventsHandler.bind(t)),t._ownerElement.$.listen("blur.tooltip",t._eventsHandler.bind(t));break;case"click":t._ownerElement.$.listen("click.tooltip",t._eventsHandler.bind(t))}}}},{key:"_handleResize",value:function(){function e(){t._applyPosition()}var t=this;"click"===t.openMode?window.addEventListener("resize",e):window.removeEventListener("resize",e)}},{key:"_handleSelector",value:function(e){var t=this;return"string"==typeof e?void(t._ownerElement=e.length>0?document.getElementById(e):void 0):e instanceof HTMLElement||e instanceof SVGElement?void(t._ownerElement=e):null===e?void(t._ownerElement=void 0):void t.error(t.localize("invalidSelector",{elementType:t.nodeName.toLowerCase(),property:"selector"}))}},{key:"_handleTemplate",value:function(e){var t=this,o=t.tooltipTemplate;if(e&&(t.$.content.innerHTML=t.value?t.value:""),null!==o&&o){if("function"==typeof t.tooltipTemplate)return void t.tooltipTemplate(t.$.content,{value:t.value});if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(null===(o=document.getElementById(o))||!("content"in o))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"template"}));for(var n=o.content,l=n.childNodes.length,i=/{{\w+}}/g,r=void 0,a=[],s=0;s<l;s++)for(r=i.exec(n.childNodes[s].innerHTML);r;)a.push({childNodeIndex:s,bindingString:r[0]}),r=i.exec(n.childNodes[s].innerHTML);for(var p=a.length,f=document.importNode(o.content,!0),d=void 0,c=void 0,m=0;m<p;m++){d=f.childNodes[a[m].childNodeIndex],c=a.length;for(var u=0;u<c;u++)d.innerHTML=d.innerHTML.replace(a[m].bindingString,t.value)}t.$.content.innerHTML="";for(var h=0;h<f.childNodes.length;h++)f.childNodes[h].outerHTML&&(t.$.content.innerHTML+=f.childNodes[h].outerHTML)}}}],[{key:"properties",get:function(){return{arrow:{value:!1,type:"boolean"},arrowDirection:{allowedValues:["bottom","top","left","right"],value:"bottom",type:"string"},delay:{value:0,type:"number"},messages:{extend:!0,value:{en:{invalidSelector:'{{elementType}}: "{{property}}" must be a String, an HTMLElement or null.',htmlTemplateNotSuported:"{{elementType}}: Browser doesn't support HTMLTemplate elements.",invalidTemplate:'{{elementType}}: "{{property}}" property accepts a string that must match the id of an HTMLTemplate element from the DOM.',invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},offset:{value:[0,0],type:"array"},openMode:{allowedValues:["click","focus","hover","manual"],value:"hover",type:"string"},position:{allowedValues:["bottom","top","left","right","absolute","auto"],value:"top",type:"string"},selector:{value:null,type:"any?"},tooltipTemplate:{value:null,type:"any"},value:{value:"",type:"string",reflectToAttribute:!1},visible:{value:!1,type:"boolean"}}}},{key:"styleUrls",get:function(){return["jqx.tooltip.css"]}}]),t}(JQX.ContentElement));
//# sourceMappingURL=jqxtooltip.js.map
