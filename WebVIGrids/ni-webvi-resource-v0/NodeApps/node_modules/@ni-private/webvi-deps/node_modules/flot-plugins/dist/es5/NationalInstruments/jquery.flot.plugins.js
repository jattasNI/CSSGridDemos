"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var i=[],o=!0,r=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){r=!0,n=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw n}}return i}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var i=[],o=!0,r=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){r=!0,n=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw n}}return i}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var i=[],o=!0,r=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){r=!0,n=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw n}}return i}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var i=[],o=!0,r=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){r=!0,n=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw n}}return i}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var o=_superPropBase(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){function i(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(i,t)})(t)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _construct(t,e,i){return _construct=isNativeReflectConstruct()?Reflect.construct:function(t,e,i){var o=[null];o.push.apply(o,e);var r=Function.bind.apply(t,o),n=new r;return i&&_setPrototypeOf(n,i.prototype),n},_construct.apply(null,arguments)}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){function i(){this.pluginName="scattergraph",this.pluginVersion="1.0",this.defaultOptions={series:{scattergraph:{data:[],show:!1,lineWidth:2,filled:!1,drawLines:!1,color:"black",shape:"circle",size:5}}};var t=new Map([[0,"red"],[1,"green"],[2,"blue"],[3,"cyan"],[4,"yellow"],[5,"magenta"],[6,"salmon"],[7,"teal"],[8,"grey"],[9,"black"]]),e=new Map([[0,"circle"],[1,"square"],[2,"triangle_n"],[3,"triangle_s"],[4,"triangle_e"],[5,"triangle_w"],[6,"cross_v"],[7,"cross_d"],[8,"diamond"],[9,"asterisk"]]),i=new Map([[0,1],[1,2],[2,3],[3,4],[4,5],[5,9],[6,14],[7,23],[8,37],[9,60]]);this.init=function(o){function r(t,e,i,o){if(!0===t.getOptions().series.scattergraph.show&&i[0]){if(!Array.isArray(i[0])&&Array.isArray(i[0].x))E=!0,S=i[0].x.length;else if(Array.isArray(i[0])&&Array.isArray(i[0][0])&&!Array.isArray(i[0][0][0]))P=!0,S=i[0].length;else{if(!Array.isArray(i[0])||"object"!==_typeof(i[0][0]))return void console.log("unknown data type for scatter graph");z=!0,S=i[0].length}for(var r,n,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,u=0;u<S;u++)z?(r=i[0][u].x,n=i[0][u].y):E?(r=i[0].x[u],n=i[0].y[u]):P&&(r=i[0][u][0],n=i[0][u][1]),r>a&&(a=r),n>s&&(s=n),r<l&&(l=r),n<h&&(h=n);o.pointsize=2,o.points.length=0,o.points.push(l,h),o.points.push(a,s),o.format=[{x:!0,y:!1,number:!0,computeRange:!0},{x:!1,y:!0,number:!0,computeRange:!0}]}}function n(o,n){n.series.scattergraph.show&&(n.series.scattergraph.colors?"string"==typeof n.series.scattergraph.colors?n.series.scattergraph.colors=a(JSON.parse(n.series.scattergraph.colors)):Array.isArray(n.series.scattergraph.colors)?n.series.scattergraph.colors=a(n.series.scattergraph.colors):"function"!=typeof n.series.scattergraph.colors&&console.log("colors is unknown type"):n.series.scattergraph.colors=t,n.series.scattergraph.sizes?"string"==typeof n.series.scattergraph.sizes?n.series.scattergraph.sizes=u(JSON.parse(n.series.scattergraph.sizes)):Array.isArray(n.series.scattergraph.sizes)?n.series.scattergraph.sizes=u(n.series.scattergraph.sizes):"function"!=typeof n.series.scattergraph.sizes&&console.log("sizes is unknown type"):n.series.scattergraph.sizes=i,n.series.scattergraph.shapes?"string"==typeof n.series.scattergraph.shapes?n.series.scattergraph.shapes=h(JSON.parse(n.series.scattergraph.shapes)):Array.isArray(n.series.scattergraph.shapes)?n.series.scattergraph.shapes=h(n.series.scattergraph.shapes):"function"!=typeof n.series.scattergraph.shapes&&console.log("sizes is unknown type"):n.series.scattergraph.shapes=e,o.hooks.drawSeries.push(R),o.hooks.processRawData.push(r),L=n)}function a(t){var e,i=new Map;for(e=0;e<t.length;e++)i.set(t[e].value,t[e].color);return i}function s(t){var e;return void 0!==t&&("function"==typeof L.series.scattergraph.colors?e=L.series.scattergraph.colors(t):L.series.scattergraph.colors&&(e=L.series.scattergraph.colors.get(t))),e||L.series.scattergraph.color}function h(t){var e,i=new Map;for(e=0;e<t.length;e++)i.set(t[e].value,t[e].shape);return i}function l(t){var e;return void 0!==t&&("function"==typeof L.series.scattergraph.shapes?e=L.series.scattergraph.shapes(t):L.series.scattergraph.shapes&&(e=L.series.scattergraph.shapes.get(t))),e||L.series.scattergraph.shape}function u(t){var e,i=new Map;for(e=0;e<t.length;e++)i.set(t[e].value,parseFloat(t[e].size));return i}function d(t){var e;return void 0!==t&&("function"==typeof L.series.scattergraph.sizes?e=L.series.scattergraph.sizes(t):L.series.scattergraph.sizes&&(e=L.series.scattergraph.sizes.get(t))),void 0===e?L.series.scattergraph.size:e}function c(t,e,i,o,r,n,a,s){t.save(),t.strokeStyle=s,t.beginPath(),t.moveTo(e.p2c(o),i.p2c(r)),t.lineTo(e.p2c(n),i.p2c(a)),t.stroke(),t.restore()}function f(t,e,i,o,r){t.beginPath(),t.arc(e,i,o/2,0,2*Math.PI),r?t.fill():t.stroke()}function p(t,e,i,o,r){r?t.fillRect(e-o/2,i-o/2,o,o):t.strokeRect(e-o/2,i-o/2,o,o)}function g(t,e,i,o,r){var n=o*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(e,i-n/2),t.lineTo(e-o/2,i+n/2),t.lineTo(e+o/2,i+n/2),t.lineTo(e,i-n/2),t.lineTo(e-o/2,i+n/2),r?t.fill():t.stroke()}function m(t,e,i,o,r){var n=o*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(e,i+n/2),t.lineTo(e-o/2,i-n/2),t.lineTo(e+o/2,i-n/2),t.lineTo(e,i+n/2),t.lineTo(e-o/2,i-n/2),r?t.fill():t.stroke()}function v(t,e,i,o,r){var n=o*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(e+n/2,i),t.lineTo(e-n/2,i+n/2),t.lineTo(e-n/2,i-n/2),t.lineTo(e+n/2,i),t.lineTo(e-n/2,i+n/2),r?t.fill():t.stroke()}function b(t,e,i,o,r){var n=o*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(e-n/2,i),t.lineTo(e+n/2,i+n/2),t.lineTo(e+n/2,i-n/2),t.lineTo(e-n/2,i),t.lineTo(e+n/2,i+n/2),r?t.fill():t.stroke()}function y(t,e,i,o){var r=o;t.beginPath(),t.moveTo(e,i-r/2),t.lineTo(e,i+r/2),t.moveTo(e-r/2,i),t.lineTo(e+r/2,i),t.stroke()}function x(t,e,i,o){var r=o;t.beginPath(),t.moveTo(e-r/2,i-r/2),t.lineTo(e+r/2,i+r/2),t.moveTo(e-r/2,i+r/2),t.lineTo(e+r/2,i-r/2),t.stroke()}function w(t,e,i,o,r){var n=o;t.beginPath(),t.moveTo(e,i-n/2),t.lineTo(e+n/2,i),t.lineTo(e,i+n/2),t.lineTo(e-n/2,i),t.lineTo(e,i-n/2),t.lineTo(e+n/2,i),r?t.fill():t.stroke()}function _(t,e,i,o){var r=o,n=r/(2*Math.sqrt(2));t.beginPath(),t.moveTo(e-n,i-n),t.lineTo(e+n,i+n),t.moveTo(e-n,i+n),t.lineTo(e+n,i-n),t.moveTo(e,i-r/2),t.lineTo(e,i+r/2),t.moveTo(e-r/2,i),t.lineTo(e+r/2,i),t.stroke()}function k(t,e,i,o,r,n,a,s,h,l,u,d){if(void 0!==e&&void 0!==i)switch(t.strokeStyle=s,t.fillStyle=s,t.lineWidth=u,t.moveTo(o.p2c(e)+n,r.p2c(i)+a),h){case"circle":f(t,o.p2c(e),r.p2c(i),l,d);break;case"square":p(t,o.p2c(e),r.p2c(i),l,d);break;case"triangle_n":g(t,o.p2c(e),r.p2c(i),l,d);break;case"triangle_s":m(t,o.p2c(e),r.p2c(i),l,d);break;case"triangle_e":v(t,o.p2c(e),r.p2c(i),l,d);break;case"triangle_w":b(t,o.p2c(e),r.p2c(i),l);break;case"cross_v":y(t,o.p2c(e),r.p2c(i),l);break;case"cross_d":x(t,o.p2c(e),r.p2c(i),l);break;case"diamond":w(t,o.p2c(e),r.p2c(i),l,d);break;case"asterisk":_(t,o.p2c(e),r.p2c(i),l)}}function T(t,e,i,o,r,n,a){var s=!1,h=Math.round(t.xaxis.p2c(e)),l=Math.round(t.yaxis.p2c(i)),u={x:h,y:l},d=a.get(u);if(d){for(var c=0;c<d.length;c++)d[c].color===o&&d[c].shape===r&&d[c].size===n&&(s=!0);d.push({color:o,size:n,shape:r}),a.set(u,d)}else a.set(u,[{color:o,size:n,shape:r}]);return s}function R(t,e,i){var o,r;if(i.data&&Array.isArray(i.data)&&0!==i.data.length){var n=new Map,a=t.getPlotOffset();e.save(),e.translate(a.left,a.top);for(var h=0;h<S;h++){var u,f,p,g,m;z?(u=i.data[0][h].x,f=i.data[0][h].y,p=s(i.data[0][h].color),g=l(i.data[0][h].shape),m=d(i.data[0][h].size)):E?(u=i.data[0].x[h],f=i.data[0].y[h],p=s(i.data[0].color?i.data[0].color[h]:void 0),g=l(i.data[0].shape?i.data[0].shape[h]:void 0),m=d(i.data[0].size?i.data[0].size[h]:void 0)):P&&(u=i.data[0][h][0],f=i.data[0][h][1],p=s(i.data[0][h][2]),g=l(i.data[0][h][3]),m=d(i.data[0][h][4])),"transparent"===p.toLowerCase()||"none"===g.toLowerCase()||0===m||!L.series.scattergraph.drawLines&&T(i,u,f,p,g,m,n)||(k(e,u,f,i.xaxis,i.yaxis,0,0,p,g,m,L.series.scattergraph.lineWidth,L.series.scattergraph.filled),h>0&&L.series.scattergraph.drawLines&&c(e,i.xaxis,i.yaxis,o,r,u,f,i.color),o=u,r=f)}e.restore()}}var S,L=null,z=!1,P=!1,E=!1;o.hooks.processOptions.push(n)}}var o=new i;e.plot.plugins.push({init:o.init,options:o.defaultOptions,name:o.pluginName,version:o.pluginVersion}),e.plot.scattergraph=o}(0,jQuery),function(t){function e(t){t.addEventListener("mousemove",i,!1),t.addEventListener("touchmove",i,!1),t.addEventListener("mouseup",o,!1),t.addEventListener("touchend",o,!1)}function i(t){if(g){if(0===t.buttons)return void o(t);var e=c(t),i=n(t),r=a(i),s=r.eventHolder;if(g.selectedElement.constraintFunction){var l=g.selectedElement.constraintFunction(e.X,e.Y,g.x,g.y),d=_slicedToArray(l,2);e.X=d[0],e.Y=d[1]}var f=g.selectedElement.getCTM(),p=e.X-g.x,m=e.Y-g.y;f.e+=p,f.f+=m,g.selectedElement.transform.baseVal.getItem(0).setMatrix(f),g.x=e.X,g.y=e.Y,h(g.selectedElement),t.preventDefault(),t.stopPropagation(),u("thumbmove",t,s)}}function o(t){var e=n(t),i=a(e),o=i.eventHolder;g&&(g=null,i.style.pointerEvents="none",o.dispatchEvent(new CustomEvent("thumbmoveend",{detail:t})))}function r(t){var e=n(t),i=a(e),o=i.eventHolder;if(g=null,e&&-1!==e.getAttribute("class").indexOf("draggable")){var r=c(t),s=e.getBoundingClientRect(),h=document.documentElement,l=(window.pageXOffset||h.scrollLeft)-(h.clientLeft||0),d=(window.pageYOffset||h.scrollTop)-(h.clientTop||0);g={selectedElement:e,x:r.X,y:r.Y,deltaHandlingX:r.X-(s.left+s.right)/2-l,deltaHandlingY:r.Y-(s.top+s.bottom)/2-d},i.style.pointerEvents="all"}g&&u("thumbmovestart",t,o)}function n(t){var e=t.target,i=e.getAttribute("class");return i&&i.includes("interactionLayer")?e.parentNode:e}function a(t){return"svg"===t.tagName?t:"g"===t.tagName?t.parentNode:null}function s(t){var e=n(t),i=[];e&&-1!==e.getAttribute("class").indexOf("thumb")&&(i=l(e),i.length>0&&h(i[0]))}function h(t){t.parentNode.appendChild(t)}function l(t){var e=t.getBoundingClientRect(),i=e.left,o=e.right,r=e.top,n=e.bottom,a=t.parentNode;return Array.prototype.slice.call(a.childNodes,0).filter(function(t){var e=t.getBoundingClientRect(),a=e.left,s=e.right,h=e.top,l=e.bottom;return e.width>0&&e.height>0&&(i<s&&o>a&&r<l&&n>h)})}function u(t,e,i){var o=c(e),r=new CustomEvent(t,{detail:e});r.pageX=o.X-g.deltaHandlingX,r.pageY=o.Y-g.deltaHandlingY,r.selectedThumb=g.selectedElement,i.dispatchEvent(r)}function d(t){var e=document.documentElement;return{X:t.clientX+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),Y:t.clientY+(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}}function c(t){return t.touches?{X:t.touches[0].pageX,Y:t.touches[0].pageY}:d(t)}function f(t){Array.prototype.forEach.call(t.childNodes,function(t){t.classList.contains("thumb")&&(t.removeEventListener("mousedown",r),t.removeEventListener("touchstart",r))}),t.removeEventListener("mousemove",i),t.removeEventListener("touchmove",i),t.removeEventListener("mouseup",o),t.removeEventListener("touchend",o)}function p(t,e){var i=e-8,o=window.getComputedStyle(t).fontSize.replace("px",""),r=t.textContent,n=r.trim().split(/\s+/);if(n.length>1){t.textContent="";var a=document.createElementNS("http://www.w3.org/2000/svg","tspan");a.setAttribute("x",t.getAttribute("x")),a.setAttribute("y",t.getAttribute("y")),a.setAttribute("pointer-events","none"),a.setAttribute("font-size",o),a.textContent=n[0],t.appendChild(a);for(var s=1;s<n.length;s++){var h=a.firstChild.textContent.length;a.firstChild.textContent+=" "+n[s],a.getComputedTextLength()>i&&(a.firstChild.textContent=a.firstChild.textContent.slice(0,h),a=a.cloneNode(!0),t.appendChild(a),a.textContent=n[s])}for(var l=0;l<t.children.length;l++){var u=-(o*(t.children.length/2-l)-o/2);t.children[l].setAttribute("dy",u)}}}t.thumb={};var g;t.thumb.createSVGLayer=function(t,i){if(t&&t.find(".flot-thumbs")[0])return t.find(".flot-thumbs")[0].firstChild;var o=document.createElement("div");o.className="flot-thumbs",o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.height="100%",o.style.pointerEvents="none",t?t.append(o):document.body.appendChild(o);var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"width","100%"),r.setAttributeNS(null,"height","100%");var n=window.getComputedStyle(o).getPropertyValue("--customIcon");n=(n||"").trim();var a=window.getComputedStyle(o).getPropertyValue("--customIconTextBoundary");a=(a||"").trim();var s=n||'<symbol id="round" viewBox="0 0 50 50"><polyline points="25,0 40,20 10,20 25,0"></polyline><circle cx="25" cy="25" r="20"/></symbol>',h=a;""===a&&""===n&&(h='<symbol id="round" viewBox="0 0 50 50"><circle cx="25" cy="25" r="20"/></symbol>'),""===h&&(h=s);var l='<defs xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+s+h+'<symbol id="l_round" viewBox="0 0 50 50"><use xlink:href="#round" x="0" y="0" width="50" height="50" transform="rotate(90 25 25)"/></symbol><symbol id="r_round" viewBox="0 0 50 50"><use xlink:href="#round" x="0" y="0" width="50" height="50" transform="rotate(270 25 25)"/></symbol><symbol id="b_round" viewBox="0 0 50 50"><use xlink:href="#round" x="0" y="0" width="50" height="50" transform="rotate(0 25 25)"/></symbol><symbol id="t_round" viewBox="0 0 50 50"><use xlink:href="#round" x="0" y="0" width="50" height="50" transform="rotate(180 25 25)"/></symbol><symbol id="l_tb" viewBox="0 0 50 50"><use xlink:href="#tb" x="0" y="0" width="50" height="50" transform="rotate(90 25 25)" /></symbol><symbol id="r_tb" viewBox="0 0 50 50"><use xlink:href="#tb" x="0" y="0" width="50" height="50" transform="rotate(270 25 25)" /></symbol><symbol id="b_tb" viewBox="0 0 50 50"><use xlink:href="#tb" x="0" y="0" width="50" height="50" transform="rotate(0 25 25)" /></symbol><symbol id="t_tb" viewBox="0 0 50 50"><use xlink:href="#tb" x="0" y="0" width="50" height="50" transform="rotate(180 25 25)" /></symbol></defs>',u=(new DOMParser).parseFromString(l,"image/svg+xml"),d=document.importNode(u.documentElement,!0);return d.children[0].setAttribute("id","round"),d.children[1].setAttribute("id","tb"),r.appendChild(d),o.appendChild(r),r.eventHolder=i||document,e(r),r},t.thumb.createThumb=function(e){function i(t,e){t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),t.setAttributeNS("http://www.w3.org/1999/xlink","href",e)}var o={size:e.size||20,x:e.x||0,y:e.y||0,svgRoot:e.svgRoot,shape:e.shape||"bottom",abbreviation:e.abbreviation||"",constraintFunction:e.constraintFunction,classList:e.classList?e.classList.slice():["draggable"],offset:e.offset||"0",fill:e.fill},n=document.createElementNS("http://www.w3.org/2000/svg","use"),a=document.createElementNS("http://www.w3.org/2000/svg","text"),h=document.createElementNS("http://www.w3.org/2000/svg","use"),l=document.createElementNS("http://www.w3.org/2000/svg","g"),u=document.createElementNS("http://www.w3.org/2000/svg","rect"),d=o.svgRoot,c=o.size,f=o.x,g=o.y,m="",v=0,b=0;switch(o.shape){case"left":m="y",o.classList.push("left"),l.shape="left",i(n,"#l_round"),i(h,"#l_tb"),v="-"===o.offset[0]?o.offset.substr(1):"-"+o.offset;break;case"right":m="y",o.classList.push("right"),l.shape="right",i(n,"#r_round"),i(h,"#r_tb"),v=o.offset;break;case"bottom":m="x",o.classList.push("bottom"),l.shape="bottom",i(n,"#b_round"),i(h,"#b_tb"),b=o.offset;break;case"top":m="x",o.classList.push("top"),l.shape="top",i(n,"#t_round"),i(h,"#t_tb"),b="-"===o.offset[0]?o.offset.substr(1):"-"+o.offset}if(n.setAttributeNS(null,"width",2*c),n.setAttributeNS(null,"height",2*c),n.setAttributeNS(null,"transform","translate("+-c+" "+-c+")"),n.setAttributeNS(null,"x",v),n.setAttributeNS(null,"y",b),n.setAttribute("class","thumbIcon"),n.style.fill=o.fill,h.setAttributeNS(null,"width",2*c),h.setAttributeNS(null,"height",2*c),h.setAttributeNS(null,"transform","translate("+-c+" "+-c+")"),h.setAttributeNS(null,"x",v),h.setAttributeNS(null,"y",b),a.setAttributeNS(null,"text-anchor","middle"),a.setAttributeNS(null,"dominant-baseline","middle"),a.setAttributeNS(null,"lengthAdjust","spacingAndGlyphs"),a.setAttribute("class","thumbLabel"),a.textContent=o.abbreviation,a.style.pointerEvents="none",l.appendChild(n),l.appendChild(h),l.appendChild(a),l.setAttributeNS(null,"transform","translate("+f+" "+g+")"),l.setAttribute("class","thumb"),l.classList.add(m),o.classList)for(var y=0;y<o.classList.length;y++)""!==o.classList[y]&&l.classList.add(o.classList[y]);l.style.pointerEvents="all",l.addEventListener("mousedown",r,!1),l.addEventListener("touchstart",r,!1),t(l).click(s),l.constraintFunction=o.constraintFunction,d.appendChild(l);var x=n.getBBox();u.setAttributeNS(null,"width",x.width),u.setAttributeNS(null,"height",x.height),u.setAttributeNS(null,"x",x.x),u.setAttributeNS(null,"y",x.y),u.setAttributeNS(null,"transform","translate("+-c+" "+-c+")"),u.setAttribute("pointer-events","all"),u.classList.add("interactionLayer"),u.style.fill="transparent",u.style.stroke="transparent",l.appendChild(u);var w=h.getBBox(),_=w.x+w.width/2,k=w.y+w.height/2;return l.removeChild(h),a.setAttributeNS(null,"x",_),a.setAttributeNS(null,"y",k),a.setAttributeNS(null,"transform","translate("+-c+" "+-c+")"),/word/.test(window.getComputedStyle(a).getPropertyValue("--wrap"))?p(a,2*c):a.setAttributeNS(null,"textLength",c),l},t.thumb.updateComputedXPosition=function(t,e){var i=t.getCTM(),o="matrix("+i.a+" "+i.b+" "+i.c+" "+i.d+" "+e+" "+i.f+")";t.setAttribute("transform",o)},t.thumb.updateComputedYPosition=function(t,e){var i=t.getCTM(),o="matrix("+i.a+" "+i.b+" "+i.c+" "+i.d+" "+i.e+" "+e+")";t.setAttribute("transform",o)},t.thumb.setHidden=function(t,e){t.style.display=e?"none":"inline"},t.thumb.shutdown=function(t){g=null,f(t)}}(jQuery),function(t){function e(e){function s(t){var e=h();return l(e,t),i(t,e)}function h(){return{name:"unnamed "+ot.length,position:{relativeX:.5,relativeY:.5,x:void 0,y:void 0},mousePosition:{relativeX:void 0,relativeY:void 0},x:0,y:0,valign:"below",halign:"right",show:!0,selected:!1,highlighted:!1,mode:"xy",showIntersections:!1,showLabel:!1,showValues:!0,color:"gray",fontSize:"10px",fontFamily:"sans-serif",fontStyle:"",fontWeight:"",lineWidth:1,movable:!0,dashes:[],intersectionColor:"darkgray",intersectionLabelPosition:"bottom-right",snapToPlot:void 0,interpolate:!1,defaultxaxis:1,defaultyaxis:1,symbolSize:8,showThumbs:"none",thumbAbbreviation:"C"+ot.length,thumbClassList:["draggable"],thumbs:[],thumbColor:void 0,horizontalThumbConstrain:void 0,verticalThumbConstrain:void 0}}function l(t,e){g(t,e),v(t,e)}function u(t,e){return"x"===t&&-1!==e.search(/[lr]/)||("y"===t&&-1!==e.search(/[tb]/)||"xy"===t&&-1!==e.search(/l\s*r|r\s*l|t\s*b|b\s*t/))}function f(t,e){if(e.mode&&e.showThumbs){if(u(e.mode,e.showThumbs)){switch(console.log("showThumbs ".concat(e.showThumbs," doesn't match mode ").concat(e.mode,".")),e.mode){case"x":e.showThumbs="t";break;case"y":e.showThumbs="r";break;case"xy":e.showThumbs="tr"}console.log("showThumbs is coerced to ".concat(e.showThumbs))}}else e.mode?u(e.mode,t.showThumbs)&&(console.log("mode doesn't match the existing showThumbs. It will be ignored"),delete e.mode):e.showThumbs&&u(t.mode,e.showThumbs)&&(console.log("showThumbs doesn't match the existing mode. It will be ignored"),delete e.showThumbs)}function g(t,e){if("none"!==e.showThumbs&&(f(t,e),e.showThumbs))for(var i,o=e.showThumbs.split("").map(function(t){return A[t]}),r=0;r<t.thumbs.length;r++)o.includes(t.thumbs[r].shape)||(i=t.thumbs[r],t.thumbs[r]=null,t._createThumbs=!0,T("thumbWillBeRemoved",{current:i}),it.removeChild(i),st.delete(i))}function v(t,e){if(0!==t.thumbs.length){var i=void 0!==e.show?e.show:t.show,o=void 0!==e.showThumbs?e.showThumbs:t.showThumbs,r=void 0!==e.show&&e.show!==t.show,n=void 0!==e.showThumbs&&(e.showThumbs!==t.showThumbs&&("none"===e.showThumbs||"none"===t.showThumbs));t.triggerThumbVisibilityChanged=r&&"none"!==o||n&&i}}function T(t,i){var o=new CustomEvent(t,{detail:i});e.getPlaceholder()[0].dispatchEvent(o)}function R(t,e){t.triggerThumbVisibilityChanged&&t.thumbs.forEach(function(t){T("thumbVisibilityChanged",{visible:e,current:t})})}function P(){nt=O.relative,ot.forEach(function(t){if(!isNaN(t.x)&&!isNaN(t.y)){var i={relativeX:t.position.relativeX||t.x/e.width(),relativeY:t.position.relativeY||t.y/e.height(),x:void 0,y:void 0};isNaN(i.relativeX)||isNaN(i.relativeY)||(t.position=i)}})}function M(){nt=O.axis,ot.forEach(function(t){if(t.mousePosition={},void 0===t.position.x){var i=b(e,t);t.position.x=i.c2p?i.c2p(t.x):void 0}if(void 0===t.position.y){var o=y(e,t);t.position.y=o.c2p?o.c2p(t.y):void 0}t.position.relativeX=void 0,t.position.relativeY=void 0})}function C(t,e){var i={cursor:e.name,points:[]};return e.interpolate?H(t,e,i):N(t,e,i),i}function N(t,e,i){var o,r;nt===O.axis?(o=e.x,r=e.y):(o=e.mousePosition.relativeX*t.width(),r=e.mousePosition.relativeY*t.height());var n=t.findNearbyItem(o,r,function(t){return-1===e.snapToPlot||t===e.snapToPlot},Number.MAX_VALUE,function(t,e){return at===I.x?t:t*t+e*e*.025});if(n){var a=t.getData(),s=a[n.seriesIndex].datapoints.pointsize,h=n.dataIndex*s;i.points.push({x:n.datapoint[0],y:n.datapoint[1],leftPoint:[h-s,h-s+1],rightPoint:[h,h+1],seriesIndex:n.seriesIndex})}}function H(t,e,i){var o=t.c2p({left:e.x,top:e.y}),r=t.getAxes();if(!(o.x<r.xaxis.min||o.x>r.xaxis.max||o.y<r.yaxis.min||o.y>r.yaxis.max)){var n=t.findNearbyInterpolationPoint(o.x,o.y,function(t){return-1===e.snapToPlot||t===e.snapToPlot});n&&i.points.push({x:n.datapoint[0],y:n.datapoint[1],leftPoint:n.leftPoint,rightPoint:n.rightPoint,seriesIndex:n.seriesIndex})}}function D(t){function i(t){return t.getAttribute("class").includes("draggable")}function o(t){var e=t,i=t.getAttribute("class");return i.includes("interactionLayer")&&(e=t.parentNode,i=e.getAttribute("class")),i.includes("thumb")?e:null}lt(ot)||ut(ot).filter(function(t){return!0===t.movable}).forEach(function(r){r.thumbs.filter(i).filter(function(e){return e===o(t.detail.target)}).forEach(function(i){var o=r;o&&(i.classList.contains("x")?o.dragmode="x":o.dragmode="y",o.selected=!0,o.thumbmove=!0,"x"===o.mode?e.getPlaceholder().css("cursor","ew-resize"):"y"===o.mode&&e.getPlaceholder().css("cursor","ns-resize"),e.getPlaceholder().css("cursor","move"),e.getPlaceholder().trigger("cursordragstart",o),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())})})}function Y(t,i,o){var r=lt(ot);if(r){j(r,i,o);var n,a=t.selectedThumb;n=a.classList.contains("x")?r.x+e.getPlotOffset().left:r.y+e.getPlotOffset().top,st.set(a,n),e.getPlaceholder().trigger("cursordrag",r),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault()}}function X(t,i,o,r,n){var a=lt(ot);a&&(j(a,i,o),e.getPlaceholder().trigger("cursordrag",a),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}function B(t,i,o,r,n){var a=lt(ot);a&&0===t.buttons&&(a.selected=!1,e.triggerRedrawOverlay()),ut(ot).forEach(function(t){V(r,n,e,t)})}function V(t,e,i,o){o.movable&&(S(t,e,i,o)?(o.highlighted||(o.highlighted=!0,i.triggerRedrawOverlay()),i.getPlaceholder().css("cursor","pointer")):L(t,e,i,o)?(o.highlighted||(o.highlighted=!0,i.triggerRedrawOverlay()),i.getPlaceholder().css("cursor","col-resize")):z(t,e,i,o)?(o.highlighted||(o.highlighted=!0,i.triggerRedrawOverlay()),i.getPlaceholder().css("cursor","row-resize")):o.highlighted&&(o.highlighted=!1,i.getPlaceholder().css("cursor","default"),i.triggerRedrawOverlay()))}function F(t,i,o,r,n){var a=lt(ot);if(at=I.xy,a)e.getPlaceholder().css("cursor","default"),a.x=i,a.y=o,a.position.relativeX=i/e.width(),a.position.relativeY=o/e.height(),e.triggerRedrawOverlay();else{var s,h;ut(ot).forEach(function(t){t.movable&&(S(r,n,e,t)?(s=t,h="xy"):z(r,n,e,t)?(s=t,h="y"):L(r,n,e,t)&&(s=t,h="x"),V(r,n,e,t))}),s&&(s.thumbmove=!1,s.selected=!0,s.dragmode=h,"x"===s.mode?e.getPlaceholder().css("cursor","ew-resize"):"y"===s.mode?e.getPlaceholder().css("cursor","ns-resize"):e.getPlaceholder().css("cursor","move"),e.getPlaceholder().css("cursor","move"),e.getPlaceholder().trigger("cursordragstart",s),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}a=lt(ot)}function W(t,i,o,r,n){var a=lt(ot);a&&(isFinite(i)&&isFinite(o)&&j(a,i,o),a.selected=!1,a.thumbmove=!1,e.getPlaceholder().css("cursor","default"),e.getPlaceholder().trigger("cursordragend",a),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}function j(t,i,o){var r=b(e,t),n=y(e,t);-1!==t.dragmode.indexOf("x")&&(t.x=i,t.position.x=r.c2p?r.c2p(i):void 0,t.position.relativeX=i/e.width(),t.mousePosition.relativeX=i/e.width()),-1!==t.dragmode.indexOf("y")&&(t.y=o,t.position.y=n.c2p?n.c2p(o):void 0,t.position.relativeY=o/e.height(),t.mousePosition.relativeY=o/e.height())}function G(t,i){if(et)return et(t,i);var o=e.offset();return[Math.max(0,Math.min(t-o.left,e.width())),Math.max(0,Math.min(i-o.top,e.height()))]}function U(e){e.thumbs.forEach(function(e){t.thumb.setHidden(e,!0)})}function q(e,i,o){it=t.thumb.createSVGLayer(i.getPlaceholder(),i.getEventHolder());var r,n,a,s,h=0,l={size:E.thumbRadius,svgRoot:it,abbreviation:e.thumbAbbreviation||e.name[0],classList:e.thumbClassList,offset:e.thumbOffset,fill:e.thumbColor};$(e)&&!e.thumbs[0]&&(h=1,n=e.x+o.left,a=-1!==e.showThumbs.indexOf("b")?i.height()+o.top+E.thumbRadius:o.top-E.thumbRadius,s=e.horizontalThumbConstrain?e.horizontalThumbConstrain:function(t,e,o,r){var n=i.offset().left;return[Math.max(n,Math.min(t,i.width()+n)),r]},l.shape=-1!==e.showThumbs.indexOf("b")?"bottom":"top",l.x=n,l.y=a,l.constraintFunction=s,r=t.thumb.createThumb(l),e.thumbs[0]=r,st.set(r,n),T("thumbCreated",{current:r})),tt(e)&&!e.thumbs[h]&&(n=-1!==e.showThumbs.indexOf("l")?o.left-E.thumbRadius:o.left+i.width()+E.thumbRadius,a=e.y+o.top,s=e.verticalThumbConstrain?e.verticalThumbConstrain:function(t,e,o,r){var n=i.offset();return[o,Math.max(n.top,Math.min(e,i.height()+n.top))]},l.shape=-1!==e.showThumbs.indexOf("l")?"left":"right",l.x=n,l.y=a,l.constraintFunction=s,r=t.thumb.createThumb(l),e.thumbs[h]=r,st.set(r,a),T("thumbCreated",{current:r}))}function J(e,i,o){var r;if($(i)){r=i.thumbs[0];var n=i.x+o.left,a=st.get(r),s=K(r);d(e,i.x)?(a<o.left?Q("thumbIntoRange",{target:r,edge:s?"topleft":"bottomleft",orientation:"horizontal",position:n},e.getEventHolder()):a>o.left+e.width()&&Q("thumbIntoRange",{target:r,edge:s?"topright":"bottomright",orientation:"horizontal",position:n},e.getEventHolder()),t.thumb.setHidden(r,!1),t.thumb.updateComputedXPosition(r,n)):(d(e,a-o.left)&&i.x<0?Q("thumbOutOfRange",{target:r,edge:s?"topleft":"bottomleft",orientation:"horizontal"},e.getEventHolder()):d(e,a-o.left)&&i.x>e.width()&&Q("thumbOutOfRange",{target:r,edge:s?"topright":"bottomright",orientation:"horizontal"},e.getEventHolder()),t.thumb.setHidden(r,!0)),st.set(r,n)}if(tt(i)){var h=$(i)?1:0;r=i.thumbs[h];var l=i.y+o.top,u=st.get(r),f=Z(r);c(e,i.y)?(u<o.top?Q("thumbIntoRange",{target:r,edge:f?"topleft":"topright",orientation:"vertical",position:l},e.getEventHolder()):u>o.top+e.height()&&Q("thumbIntoRange",{target:r,edge:f?"bottomleft":"bottomright",orientation:"vertical",position:l},e.getEventHolder()),t.thumb.setHidden(r,!1),t.thumb.updateComputedYPosition(r,l)):(c(e,u-o.top)&&(i.y<0?Q("thumbOutOfRange",{target:r,edge:f?"topleft":"topright",orientation:"vertical"},e.getEventHolder()):i.y>e.height()&&Q("thumbOutOfRange",{target:r,
edge:f?"bottomleft":"bottomright",orientation:"vertical"},e.getEventHolder())),t.thumb.setHidden(r,!0)),st.set(r,l)}}function Q(t,e,i){var o=new CustomEvent(t,{detail:e});i.dispatchEvent(o)}function K(t){return t.classList.contains("top")}function Z(t){return t.classList.contains("left")}function $(t){return-1!==t.showThumbs.indexOf("b")||-1!==t.showThumbs.indexOf("t")}function tt(t){return-1!==t.showThumbs.indexOf("l")||-1!==t.showThumbs.indexOf("r")}var et,it,ot=[],rt=[],nt=O.axis,at=I.xy,st=new Map;e.hooks.processOptions.push(function(t){t.getOptions().cursors.forEach(function(e){t.addCursor(e)})}),e.hooks.processOffset.push(function(t,e){ht(ot,t,e)}),e.getCursors=function(){return ot},e.addCursor=function(t){var i=s(t);r(e,i,i.position,nt),ot.push(i),e.triggerRedrawOverlay()},e.removeCursor=function(t){var i=ot.indexOf(t);-1!==i&&(t.thumbs.forEach(function(t){T("thumbWillBeRemoved",{current:t}),it.removeChild(t),st.delete(t)}),ot.splice(i,1)),e.triggerRedrawOverlay()},e.setCursor=function(t,o){var n=ot.indexOf(t);-1!==n&&(l(t,o),i(o,ot[n]),r(e,ot[n],ot[n].position),t._createThumbs?(e.setupGrid(),e.draw()):e.triggerRedrawOverlay())},e.getIntersections=function(t){var e=ot.indexOf(t);return-1!==e?ot[e].intersections:[]},e.formatCursorPosition=x,e.setPlotPositionConstrain=function(t){if("function"!=typeof t)throw new Error("plot position constrain should be a function");et=t};var ht=function(t,e,i){var o,r,n,a,s=["left","right","top","bottom"],h=[],l=0,u=2*E.thumbRadius;h=s.map(function(i,a){return o=t.some(function(t){return-1!==t.showThumbs.indexOf(i[0])}),n=a>1?e.getXAxes():e.getYAxes(),r=n.some(function(t){return t.options.position===i}),o&&!r?u:0});for(a in i)i[a]+=h[l++]},lt=function(t){var e;return t.forEach(function(t){t.selected&&(e||(e=t))}),e},ut=function(t){return t.filter(function(t){return t.show})},dt={start:function(t){var e=G(t.detail.touches[0].pageX,t.detail.touches[0].pageY),i=_slicedToArray(e,2);F(t,i[0],i[1],t.detail.touches[0].pageX,t.detail.touches[0].pageY)},drag:function(t){var e=G(t.detail.touches[0].pageX,t.detail.touches[0].pageY),i=_slicedToArray(e,2);X(t,i[0],i[1],t.detail.touches[0].pageX,t.detail.touches[0].pageY)},end:function(t){W(t)}},ct={start:function(t){var e=G(t.detail.touches[0].pageX,t.detail.touches[0].pageY),i=_slicedToArray(e,2);F(t,i[0],i[1],t.detail.touches[0].pageX,t.detail.touches[0].pageY)},drag:function(t){var e=G(t.detail.touches[0].pageX,t.detail.touches[0].pageY),i=_slicedToArray(e,2);X(t,i[0],i[1],t.detail.touches[0].pageX,t.detail.touches[0].pageY)},end:function(t){W(t)}},ft={start:function(t){D(t)},drag:function(t){var e=G(t.pageX,t.pageY),i=_slicedToArray(e,2);Y(t,i[0],i[1])},end:function(t){W(t)}},pt={start:function(e){var i=t.plot.browser.getPageXY(e),o=G(i.X,i.Y),r=_slicedToArray(o,2);F(e,r[0],r[1],i.X,i.Y)},drag:function(e){var i=t.plot.browser.getPageXY(e),o=G(i.X,i.Y),r=_slicedToArray(o,2);X(e,r[0],r[1],i.X,i.Y)},mouseover:function(e){var i=t.plot.browser.getPageXY(e),o=G(i.X,i.Y),r=_slicedToArray(o,2);B(e,r[0],r[1],i.X,i.Y)},end:function(e){var i=t.plot.browser.getPageXY(e),o=G(i.X,i.Y),r=_slicedToArray(o,2);W(e,r[0],r[1],i.X,i.Y)}};e.hooks.bindEvents.push(function(t,e){e[0].addEventListener("panstart",dt.start,!1),e[0].addEventListener("pandrag",dt.drag,!1),e[0].addEventListener("panend",dt.end,!1),e[0].addEventListener("pinchstart",ct.start,!1),e[0].addEventListener("pinchdrag",ct.drag,!1),e[0].addEventListener("pinchend",ct.end,!1),t.getPlaceholder().bind("plotpan",M),t.getPlaceholder().bind("plotzoom",M),e[0].addEventListener("thumbmovestart",ft.start,!1),e[0].addEventListener("thumbmove",ft.drag,!1),e[0].addEventListener("thumbmoveend",ft.end,!1),t.addEventHandler("dragstart",pt.start,e,10),t.addEventHandler("drag",pt.drag,e,10),t.addEventHandler("dragend",pt.end,e,10),e.bind("mousemove",pt.mouseover)}),e.hooks.processRawData.push(function(t,e,i,o){e.historyBuffer&&(P(),at=I.x)}),e.hooks.drawOverlay.push(function(t,e){var i=function(t){return void 0!==t.relativeX&&void 0!==t.relativeY};rt=[],ot.forEach(function(s){var h;if(o(t,s),r(t,s,s.position),i(s.mousePosition)||(s.mousePosition.relativeX=s.x/t.width(),s.mousePosition.relativeY=s.y/t.height()),h=C(t,s),n(t,s,h),s.intersections=h,h.target=s,rt.push(h),s.show){var l=t.getPlotOffset();e.save(),e.translate(l.left,l.top),a(t,e,s),_(t,e,s),p(t,e,s),m(t,e,s),w(t,e,s),"none"!==s.symbol&&k(t,e,s),e.restore(),"none"!==s.showThumbs?0===s.thumbs.length||s._createThumbs?(q(s,t,l),s._createThumbs=!1):s.thumbmove||(J(t,s,l),R(s,!0)):(U(s),R(s,!1))}else U(s),R(s,!1)}),rt.length>0&&t.getPlaceholder().trigger("cursorupdates",[rt])}),e.hooks.resize.push(function(e,i,o){ot.forEach(function(r){var n=e.getPlotOffset(),a=0,s=r.thumbs[0];if($(r)&&s&&(a=1,-1!==r.showThumbs.indexOf("b"))){var h=o-n.bottom+E.thumbRadius;t.thumb.updateComputedYPosition(s,h)}var l=r.thumbs[a];if(tt(r)&&l&&-1!==r.showThumbs.indexOf("r")){var u=i-n.right+E.thumbRadius;t.thumb.updateComputedXPosition(l,u)}})}),e.hooks.shutdown.push(function(e,i){i[0].removeEventListener("panstart",dt.start),i[0].removeEventListener("pandrag",dt.drag),i[0].removeEventListener("panend",dt.end),i[0].removeEventListener("pinchstart",ct.start),i[0].removeEventListener("pinchdrag",ct.drag),i[0].removeEventListener("pinchend",ct.end),i[0].removeEventListener("thumbmovestart",ft.start),i[0].removeEventListener("thumbmove",ft.drag),i[0].removeEventListener("thumbmoveend",ft.end),i.unbind("dragstart",pt.start),i.unbind("drag",pt.drag),i.unbind("dragend",pt.end),i.unbind("mousemove",pt.mouseover),i.unbind("cursorupdates");var o=e.getPlaceholder();o.unbind("plotpan",M),o.unbind("plotzoom",M),o.css("cursor","default"),o.find(".flot-thumbs")[0]&&t.thumb.shutdown(o.find(".flot-thumbs")[0].firstChild),ot=[],st.clear(),rt=[]})}function i(t,e){return Object.keys(t).forEach(function(i){e[i]=t[i]}),e}function o(t,e){var i=b(t,e),o=y(t,e),r=e.position;void 0!==r.x&&void 0!==r.y||!i.c2p||!o.c2p||0===i.min&&1===i.max&&0===o.min&&1===o.max||(r.x=i.c2p(r.relativeX*t.width()),r.y=o.c2p(r.relativeY*t.height())),(void 0===r.relativeX||void 0===r.relativeY)&&i.p2c&&o.p2c&&void 0!==r.x&&void 0!==r.y&&(r.relativeX=i.p2c(r.x)/t.width(),r.relativeY=o.p2c(r.y)/t.height())}function r(t,e,i){var o,r,n=b(t,e),a=y(t,e);o=void 0!==i.x&&n.p2c?n.p2c(i.x):i.relativeX*t.width(),r=void 0!==i.y&&a.p2c?a.p2c(i.y):i.relativeY*t.height(),e.x=o,e.y=r}function n(t,e,i){if(e.snapToPlot>=-1){var o=i.points[0];if(o){var n=t.getData()[o.seriesIndex],a=n.xaxis.p2c(o.x)/t.width(),s=n.yaxis.p2c(o.y)/t.height();r(t,e,{x:o.x,y:o.y}),e.position.x=o.x,e.position.y=o.y,e.position.relativeX=a,e.position.relativeY=s,i.x=o.x,i.y=o.y}}}function a(t,e,i){var o=t.width(),r=t.height(),n=i.y,a=i.x,s=0,l=0,u=h(i),d=Number(i.fontSize.substring(0,i.fontSize.length-2));if(e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,i.showLabel&&(s=Math.max(s,e.measureText(i.name).width)),i.showValues){var c=x(t,i),f=c.xTextValue+", "+c.yTextValue;s=Math.max(s,e.measureText(f).width)}"right"===i.halign&&a+s>.95*o?i.halign="left":"left"===i.halign&&a-s<.05*o&&(i.halign="right"),l=u*(d+E.labelPadding),"below"===i.valign&&n+l>.95*r?i.valign="above":"above"===i.valign&&n-l<.05*r&&(i.valign="below")}function s(t,e,i,o){var r="left",n=Number(e.fontSize.substring(0,e.fontSize.length-2)),a=e.y,s=e.x;return"left"===e.halign?(s-=E.labelPadding,r="right"):s+=E.labelPadding,"above"===e.valign?a-=E.labelPadding*(o-i)+n*(o-1-i):a+=E.labelPadding*(i+1)+n*(i+1),{x:s,y:a,textAlign:r}}function h(t){return(t.showLabel?1:0)+(t.showValues?1:0)}function l(t){return 0}function u(t){return t.showLabel?1:0}function d(t,e){return e>=0&&Math.round(e)<=t.width()}function c(t,e){return e>=0&&Math.round(e)<=t.height()}function f(t,e){return d(t,e.x)&&c(t,e.y)}function p(t,e,i){if(i.showLabel&&f(t,i)){e.beginPath();var o=s(t,i,l(i),h(i));e.fillStyle=i.color,e.textAlign=o.textAlign,e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,e.fillText(i.name,o.x,o.y),e.textAlign="left",e.stroke()}}function g(t,e,i,o,r,n,a,s,h){var l,u=Number(s.substring(0,s.length-2));switch(r){case"left":l=t.measureText(e).width,i=i-l-E.iRectSize;break;case"bottom-left":l=t.measureText(e).width,i=i-l-E.iRectSize,o+=u;break;case"top-left":l=t.measureText(e).width,i=i-l-E.iRectSize,o-=E.iRectSize;break;case"top-right":i+=E.iRectSize,o-=E.iRectSize;break;case"right":i+=E.iRectSize;break;case"bottom-right":default:i+=E.iRectSize,o+=u}t.textBaseline="middle",t.font=n+" "+a+" "+s+" "+h,t.fillText(e,i,o)}function m(t,e,i){if(i.showIntersections&&T(i)){if(e.beginPath(),void 0===i.intersections)return;i.intersections.points.forEach(function(o,r){if("object"!==_typeof(i.showIntersections)||-1!==i.showIntersections.indexOf(r)){var n=t.p2c(o);e.fillStyle=i.intersectionColor,e.fillRect(Math.floor(n.left)-E.iRectSize/2,Math.floor(n.top)-E.iRectSize/2,E.iRectSize,E.iRectSize);var a;a="function"==typeof i.formatIntersectionData?i.formatIntersectionData(o):o.y.toFixed(2),g(e,a,n.left,n.top,i.intersectionLabelPosition,i.fontStyle,i.fontWeight,i.fontSize,i.fontFamily)}}),e.stroke()}}function v(t,e,i){var o="x"===e.direction?i+1:i-1,r=e.c2p(i),n=e.c2p(o);return t.computeValuePrecision(r,n,e.direction,1)}function b(t,e){var i=t.getData(),o=t.getXAxes(),r=e.defaultxaxis-1;if(e.snapToPlot>=-1){if(e.intersections&&e.intersections.points[0]){var n=i[e.intersections.points[0].seriesIndex];return n?n.xaxis:o[r]}return o[r]}return o[r]}function y(t,e){var i=t.getData(),o=t.getYAxes(),r=e.defaultyaxis-1;if(e.snapToPlot>=-1){if(e.intersections&&e.intersections.points[0]){var n=i[e.intersections.points[0].seriesIndex];return n?n.yaxis:o[r]}return o[r]}return o[r]}function x(t,e){var i=b(t,e),o=y(t,e),r=v(t,i,e.x),n=i.tickFormatter(i.c2p(e.x),i,r,t),a=v(t,o,e.y),s=o.tickFormatter(o.c2p(e.y),o,a,t);return n=n.replace("<br>"," "),n=n.replace("&nbsp;"," "),s=s.replace("<br>"," "),s=s.replace("&nbsp;"," "),{xTextValue:n,yTextValue:s}}function w(t,e,i){if(i.showValues&&f(t,i)){var o=x(t,i),r=o.xTextValue+", "+o.yTextValue,n=s(t,i,u(i),h(i));e.fillStyle=i.color,e.textAlign=n.textAlign,e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,e.fillText(r,n.x,n.y)}}function _(t,e,i){if(0!==i.lineWidth){var o=i.lineWidth%2?.5:0;if(e.strokeStyle=i.color,e.lineWidth=i.lineWidth,e.lineJoin="round",e.beginPath(),e.setLineDash(i.dashes),-1!==i.mode.indexOf("x")&&d(t,i.x)){var r=Math.floor(i.x)+o;e.moveTo(r,Math.min(t.height(),Math.max(0,i.y-i.symbolSize/2))),e.lineTo(r,0),e.moveTo(r,Math.min(t.height(),Math.max(0,i.y+i.symbolSize/2))),e.lineTo(r,t.height())}if(-1!==i.mode.indexOf("y")&&c(t,i.y)){var n=Math.floor(i.y)+o;e.moveTo(Math.min(t.width(),Math.max(0,i.x-i.symbolSize/2)),n),e.lineTo(0,n),e.moveTo(Math.min(t.width(),Math.max(0,i.x+i.symbolSize/2)),n),e.lineTo(t.width(),n)}e.stroke(),e.setLineDash([])}}function k(t,e,i){if(f(t,i)){var o=i.lineWidth%2?.5:0;e.beginPath(),i.highlighted?e.strokeStyle="orange":e.strokeStyle=i.color,i.symbol&&t.drawSymbol&&t.drawSymbol[i.symbol]?(e.fillStyle=i.color,t.drawSymbol[i.symbol](e,Math.floor(i.x)+o,Math.floor(i.y)+o,i.symbolSize/2,0)):e.fillRect(Math.floor(i.x)+o-i.symbolSize/2,Math.floor(i.y)+o-i.symbolSize/2,i.symbolSize,i.symbolSize),e.stroke()}}function T(t){return-1!==t.mode.indexOf("x")}function R(t){return-1!==t.mode.indexOf("y")}function S(t,e,i,o){var r=i.offset(),n=Math.max(0,Math.min(t-r.left,i.width())),a=Math.max(0,Math.min(e-r.top,i.height())),s=o.symbolSize+E.mouseGrabMargin;return n>o.x-s&&n<o.x+s&&a>o.y-s&&a<o.y+s&&"none"!==o.symbol}function L(t,e,i,o){var r=i.offset(),n=Math.max(0,Math.min(t-r.left,i.width())),a=Math.max(0,Math.min(e-r.top,i.height()));return T(o)&&n>o.x-E.mouseGrabMargin&&n<o.x+E.mouseGrabMargin&&a>0&&a<i.height()}function z(t,e,i,o){var r=i.offset(),n=Math.max(0,Math.min(t-r.left,i.width())),a=Math.max(0,Math.min(e-r.top,i.height()));return R(o)&&a>o.y-E.mouseGrabMargin&&a<o.y+E.mouseGrabMargin&&n>0&&n<i.width()}var P={cursors:[]},E={iRectSize:8,mouseGrabMargin:12,textHeight:10,labelPadding:10,thumbRadius:17},O=Object.freeze({axis:0,relative:1}),I=Object.freeze({xy:0,x:1}),A=Object.freeze({t:"top",b:"bottom",l:"left",r:"right"});t.plot.plugins.push({init:e,options:P,name:"cursors",version:"0.2"})}(jQuery),function(t){function e(e){function i(){return{position:.5,absolutePosition:void 0,show:!0,orientation:"vertical",location:"far",axisIndex:0,radius:o,handleLabel:M.length.toString(),handleClassList:["draggable"],fill:void 0,horizontalHandleConstrain:void 0,verticalHandleConstrain:void 0,positionInPixel:void 0,selected:!1,thumbmove:!1,thumb:void 0}}function a(t){"vertical"!==t.orientation&&"horizontal"!==t.orientation&&(console.log("orientation is invalid. it will be coerced to vertical"),t.orientation="vertical");var i="vertical"===t.orientation?e.getYAxes():e.getXAxes();(t.axisIndex<0||t.axisIndex>i.length-1)&&(console.log("axisIndex is invalid. it will be coerced to 0"),t.axisIndex=0)}function s(t,e,i){var o=t.filter(function(t){return"far"===t.location}),n={},a=e.getXAxes(),s=e.getYAxes();o.forEach(function(t){R(t)?n[r[a[t.axisIndex].options.position]]=2*t.radius:n[r[s[t.axisIndex].options.position]]=2*t.radius}),Object.keys(n).forEach(function(t){i[t]+=Math.max(0,n[t]-i[t])})}function h(t){var e=t.filter(function(t){return t.selected});return e.length>0?e[0]:void 0}function l(t){return t.filter(function(t){return t.show})}function u(t){return 0===t.button||t.touches}function d(t,i){var o=L(e,i);Number.isNaN(t.x)&&(t.x=0),Number.isNaN(t.y)&&(t.y=0);var r=o.options,a=t[o.direction],s=Y.previousDelta[o.direction]-t[o.direction];if(0!==a){var h=n.saturate(o.c2p(o.p2c(o.min)-s)-o.c2p(o.p2c(o.min))),l=n.saturate(o.c2p(o.p2c(o.max)-s)-o.c2p(o.p2c(o.max)));isFinite(h)||(h=0),isFinite(l)||(l=0),r.offset={below:n.saturate(h+(r.offset.below||0)),above:n.saturate(l+(r.offset.above||0))}}Y.previousDelta=t,e.setupGrid(!0),e.draw(),e.getPlaceholder().trigger("axisHandlePan",[t,o,Y,i])}function c(t,i){if(A)return A(t,i);var o=e.offset();return[Math.max(0,Math.min(t-o.left,e.width())),Math.max(0,Math.min(i-o.top,e.height()))]}function f(t){function i(t){var e=t,i=t.getAttribute("class");return i.includes("interactionLayer")&&(e=t.parentNode,i=e.getAttribute("class")),i.includes("thumb")?e:null}if(u(t.detail)){var o=c(t.pageX,t.pageY),r=_slicedToArray(o,2);Y.startX=r[0],Y.startY=r[1];if(!h(M)){var n=l(M).find(function(e){return e.thumb===i(t.detail.target)});n.selected=!0,n.thumbmove=!0,t.stopImmediatePropagation(),t.preventDefault(),e.getPlaceholder().trigger("axisHandlePanStart",[n])}}}function p(t){if(!O){var i=h(M);if(i){var o=c(t.pageX,t.pageY),r=_slicedToArray(o,2),n=r[0],a=r[1];O=window.requestAnimationFrame(function(){d({x:Y.startX-n,y:Y.startY-a},i),O=void 0});var s=i.positionInPixel+(R(i)?e.getPlotOffset().left:e.getPlotOffset().top);H.set(t.selectedThumb,s),t.stopImmediatePropagation(),t.preventDefault()}}}function g(t){O&&(window.cancelAnimationFrame(O),O=void 0);var i=h(M);i&&(Y.previousDelta={x:0,y:0},i.selected=!1,i.thumbmove=!1,y(i,e.getPlotOffset()),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault(),e.getPlaceholder().trigger("axisHandlePanEnd",[i]))}function m(e,i,o){I=t.thumb.createSVGLayer(i.getPlaceholder(),i.getEventHolder());var r,n,a,s,h={size:e.radius,svgRoot:I,abbreviation:e.handleLabel,classList:e.handleClassList.slice(),fill:e.fill};R(e)?(n=e.positionInPixel+o.left,a="near"===e.location?i.height()+o.top+e.radius:o.top-e.radius,s=e.horizontalHandleConstrain?e.horizontalHandleConstrain:function(t,e,o,r){var n=i.offset().left;return[Math.max(n,Math.min(t,i.width()+n)),r]},h.shape="near"===e.location?"bottom":"top",h.x=n,h.y=a,h.constraintFunction=s,r=t.thumb.createThumb(h),H.set(r,n)):(n="near"===e.location?o.left-e.radius:o.left+i.width()+e.radius,a=e.positionInPixel+o.top,s=e.verticalHandleConstrain?e.verticalHandleConstrain:function(t,e,o,r){var n=i.offset();return[o,Math.max(n.top,Math.min(e,i.height()+n.top))]},h.shape="near"===e.location?"left":"right",h.x=n,h.y=a,h.constraintFunction=s,r=t.thumb.createThumb(h),H.set(r,a)),e.thumb=r,T("thumbCreated",{current:r})}function v(t){var i=Math.round(t);return i>=0&&i<=e.width()}function b(t){var i=Math.round(t);return i>=0&&i<=e.height()}function y(i,o){var r;if(R(i)){r=i.thumb;var n=i.positionInPixel+o.left,a=H.get(r),s=w(r);v(i.positionInPixel)?(a<o.left?k("thumbIntoRange",{target:r,edge:s?"topleft":"bottomleft",orientation:"horizontal",position:n},e.getEventHolder()):a>o.left+e.width()&&k("thumbIntoRange",{target:r,edge:s?"topright":"bottomright",orientation:"horizontal",position:n},e.getEventHolder()),t.thumb.setHidden(r,!1),t.thumb.updateComputedXPosition(r,n)):(v(a-o.left)&&n<o.left?k("thumbOutOfRange",{target:r,edge:s?"topleft":"bottomleft",orientation:"horizontal"},e.getEventHolder()):v(a-o.left)&&n>e.width()+o.left&&k("thumbOutOfRange",{target:r,edge:s?"topright":"bottomright",orientation:"horizontal"},e.getEventHolder()),t.thumb.setHidden(r,!0)),H.set(r,n)}else{r=i.thumb;var h=i.positionInPixel+o.top,l=H.get(r),u=_(r);b(i.positionInPixel)?(l<o.top?k("thumbIntoRange",{target:r,edge:u?"topleft":"topright",orientation:"vertical",position:h},e.getEventHolder()):l>o.top+e.height()&&k("thumbIntoRange",{target:r,edge:u?"bottomleft":"bottomright",orientation:"vertical",position:h},e.getEventHolder()),t.thumb.setHidden(r,!1),t.thumb.updateComputedYPosition(r,h)):(b(l-o.top)&&(h<o.top?k("thumbOutOfRange",{target:r,edge:u?"topleft":"topright",orientation:"vertical"},e.getEventHolder()):h>e.height()+o.top&&k("thumbOutOfRange",{target:r,edge:u?"bottomleft":"bottomright",orientation:"vertical"},e.getEventHolder())),t.thumb.setHidden(r,!0)),H.set(r,h)}}function x(e,i,o,r){if(e.thumb){var n=i.getPlotOffset();if(R(e)){var a="near"===e.location?r-n.bottom+e.radius:n.top-e.radius;t.thumb.updateComputedYPosition(e.thumb,a)}else{var s="near"===e.location?n.left-e.radius:o-n.right+e.radius;t.thumb.updateComputedXPosition(e.thumb,s)}}}function w(t){return"top"===t.shape}function _(t){return"left"===t.shape}function k(t,e,i){var o=new CustomEvent(t,{detail:e});i.dispatchEvent(o)}function T(t,i){var o=new CustomEvent(t,{detail:i});e.getPlaceholder()[0].dispatchEvent(o)}function R(t){return"horizontal"===t.orientation}function S(t,e){var i=L(t,e),o=R(e)?t.width():t.height();if(isFinite(e.absolutePosition)&&i.p2c)return e.positionInPixel=i.p2c(e.absolutePosition),void(e.position=e.positionInPixel/o);e.positionInPixel=void 0!==e.position?e.position*o:void 0,!isFinite(e.absolutePosition)&&isFinite(e.positionInPixel)&&i.c2p&&(e.absolutePosition=i.c2p(e.positionInPixel))}function L(t,e){return R(e)?t.getXAxes()[e.axisIndex]:t.getYAxes()[e.axisIndex]}function z(t,e){return t.filter(function(t){return!e.includes(t)})}function P(t,i){var o=Object.keys(t),r=z(o,C),n=!1,a=isFinite(t.absolutePosition),s=isFinite(t.position)||t.orientation;if(!a&&s&&(i.absolutePosition=void 0),r.forEach(function(e){!n&&N.includes(e)&&i[e]!==t[e]&&(n=!0),"show"===e&&i[e]!==t[e]&&(i.triggerThumbVisibilityChanged=!0),i[e]=t[e]}),i.thumb)if(i.thumb.classList.toggle("draggable",i.handleClassList.includes("draggable")),n)T("thumbWillBeRemoved",{current:i.thumb}),H.delete(i.thumb),I.removeChild(i.thumb),i.thumb=null,e.setupGrid(),e.draw();else{var h=i.thumb.getElementsByClassName("thumbLabel")[0];h.textContent=i.handleLabel;var l=i.thumb.getElementsByClassName("thumbIcon")[0];l.style.fill=i.fill}return i}function E(t){t.triggerThumbVisibilityChanged&&T("thumbVisibilityChanged",{current:t.thumb,visible:t.show})}var O,I,A,M=[],C=["positionInPixel","selected","thumbmove","thumb"],N=["orientation","location","radius"],H=new Map,D={start:function(t){f(t)},drag:function(t){p(t)},end:function(t){g(t)}},Y={startX:void 0,startY:void 0,previousDelta:{x:0,y:0}};e.getAxisHandles=function(){return M},e.addAxisHandle=function(t){var o=P(t,i());a(o),S(e,o),M.push(o),e.triggerRedrawOverlay()},e.removeAxisHandle=function(t){var i=M.indexOf(t);-1!==i&&(t.thumb&&(T("thumbWillBeRemoved",{current:t.thumb}),I.removeChild(t.thumb),H.delete(t.thumb),t.thumb=null),M.splice(i,1)),e.triggerRedrawOverlay()},e.setAxisHandle=function(t,i){var o=M.indexOf(t);-1!==o&&(P(i,M[o]),a(M[o]),S(e,M[o]),e.triggerRedrawOverlay())},e.setAxisHandlePlotPositionConstrain=function(t){if("function"!=typeof t)throw new Error("constrain should be a function");A=t},e.hooks.processOptions.push(function(t){t.getOptions().axisHandles.forEach(function(e){t.addAxisHandle(e)})}),e.hooks.processOffset.push(function(t,e){s(M,t,e)}),e.hooks.drawOverlay.push(function(e,i){var o=e.getPlotOffset();M.forEach(function(i){S(e,i),i.show?i.thumb?i.thumbmove||(y(i,o),E(i)):m(i,e,o):i.thumb&&(t.thumb.setHidden(i.thumb,!0),E(i))}),e.getPlaceholder().trigger("axisHandleUpdates",[M])}),e.hooks.resize.push(function(t,e,i){M.forEach(function(o){x(o,t,e,i)})}),e.hooks.bindEvents.push(function(t,e){e[0].addEventListener("thumbmovestart",D.start,!1),e[0].addEventListener("thumbmove",D.drag,!1),e[0].addEventListener("thumbmoveend",D.end,!1)}),e.hooks.shutdown.push(function(e,i){i[0].removeEventListener("thumbmovestart",D.start),i[0].removeEventListener("thumbmove",D.drag),i[0].removeEventListener("thumbmoveend",D.end),I=void 0,M=[],H.clear();var o=e.getPlaceholder();o.find(".flot-thumbs")[0]&&t.thumb.shutdown(o.find(".flot-thumbs")[0].firstChild)})}var i={axisHandles:[]},o=17,r=Object.freeze({left:"right",right:"left",bottom:"top",top:"bottom"}),n=t.plot.saturated;t.plot.plugins.push({init:e,options:i,name:"axis-handle",version:"2.0.3"})}(jQuery),function(t){function e(t){var e;t.hooks.processOptions.push(function(t){t.getOptions().parkingLot&&(e=new r(t,{offset:t.getOptions().parkingLot.offset,show:t.getOptions().parkingLot.show}))}),t.hooks.processOffset.push(function(t,i){if(e&&e._show){var o=e.reserveSpace();Object.keys(i).forEach(function(t){i[t]+=o[t]})}}),t.hooks.drawOverlay.push(function(t,i){e&&e.render(t)}),t.hooks.bindEvents.push(function(t,i){e&&e.bindEvents(t)}),t.hooks.shutdown.push(function(t,i){e&&e.dispose(t)}),t.getParkingLot=function(){return e}}var i=function(t){function e(){var t,i;_classCallCheck(this,e);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return i=_possibleConstructorReturn(this,(t=_getPrototypeOf(e)).call.apply(t,[this].concat(r))),i.setChangedListeners=[],i}return _inherits(e,t),_createClass(e,[{key:"add",value:function(t){var i=this.size,o=_get(_getPrototypeOf(e.prototype),"add",this).call(this,t);return this.size!==i&&this.onSetChanged("add"),o}},{key:"delete",value:function(t){var i=_get(_getPrototypeOf(e.prototype),"delete",this).call(this,t);return i&&this.onSetChanged("remove"),i}},{key:"clear",value:function(){var t=this.size;_get(_getPrototypeOf(e.prototype),"clear",this).call(this),t>0&&this.onSetChanged("reset")}},{key:"onSetChanged",value:function(t){if(void 0!==this.setChangedListeners){this.setChangedListeners.slice().forEach(function(e){e(t)})}}},{key:"addSetChangedListener",value:function(t){if("function"!=typeof t)throw new Error("listener is not a callable object");this.setChangedListeners.push(t)}},{key:"removeSetChangedListener",value:function(t){var e=this.setChangedListeners.findIndex(t);-1!==e&&this.setChangedListeners.splice(e,1)}}],[{key:Symbol.species,get:function(){return Set}}]),e}(_wrapNativeSuper(Set)),o=Object.freeze({topLeft:"topleft",topRight:"topright",bottomLeft:"bottomleft",bottomRight:"bottomright"}),r=function(){function e(t,i){_classCallCheck(this,e),this._offset=i.offset||35,this._thumbRadius=i.thumbRadius||17,this._show=!1!==i.show,this._initialize(t)}return _createClass(e,[{key:"_initialize",value:function(t){this.thumbs=new Set;var e=function(e){"reset"!==e&&t.triggerRedrawOverlay()};this.topLeftHorizontalDocker=new i,this.topLeftHorizontalDocker.addSetChangedListener(e),this.topLeftVerticalDocker=new i,this.topLeftVerticalDocker.addSetChangedListener(e),this.topRightHorizontalDocker=new i,this.topRightHorizontalDocker.addSetChangedListener(e),this.topRightVerticalDocker=new i,this.topRightVerticalDocker.addSetChangedListener(e),this.bottomRightHorizontalDocker=new i,this.bottomRightHorizontalDocker.addSetChangedListener(e),this.bottomRightVerticalDocker=new i,this.bottomRightVerticalDocker.addSetChangedListener(e),this.bottomLeftHorizontalDocker=new i,this.bottomLeftHorizontalDocker.addSetChangedListener(e),this.bottomLeftVerticalDocker=new i,this.bottomLeftVerticalDocker.addSetChangedListener(e),this._attachConstrains(t),this._onThumbMoveStart=this._onThumbMoveStart.bind(this),this._onThumbCreated=this._onThumbCreated.bind(this,t),this._onThumbWillBeRemoved=this._onThumbWillBeRemoved.bind(this,t),this._onThumbVisibilityChanged=this._onThumbVisibilityChanged.bind(this,t),this._onThumbIntoRange=this._onThumbIntoRange.bind(this,t),this._onThumbOutOfRange=this._onThumbOutOfRange.bind(this)}},{key:"dispose",value:function(t){this.topLeftHorizontalDocker.clear(),this.bottomLeftHorizontalDocker.clear(),this.topRightHorizontalDocker.clear(),this.bottomRightHorizontalDocker.clear(),this.topLeftVerticalDocker.clear(),this.bottomLeftVerticalDocker.clear(),this.topRightVerticalDocker.clear(),this.bottomRightVerticalDocker.clear(),this._unbindEvents(t)}},{key:"reserveSpace",value:function(){var t=this;return["left","right","bottom","top"].reduce(function(e,i){return e[i]=t._offset,e},{})}},{key:"_createThumbConstrain",value:function(e){var i=this;return{horizontal:function(o,r,n,a){var s=i.thumbMoveState.selectedElement,h=e.getPlotOffset(),l=o;if(i.thumbMoveState.inParkingLot){var u=e.offset();if(o>=u.left&&o<=u.left+e.width()){t.thumb.setHidden(s,!1);var d={target:s,edge:i.thumbMoveState.parkingLotLocation,orientation:"horizontal",position:o-u.left+h.left};i.thumbMoveState.axisHandle&&(d.axisHandle=i.thumbMoveState.axisHandle),i._dispatchThumbEvent("thumbIntoRange",d,e.getEventHolder()),l=n,i.thumbMoveState.inParkingLot=!1}}else{var c=i._willHorizontalThumbBeMovedOffGraph(s,o,e),f=_slicedToArray(c,2);i.thumbMoveState.inParkingLot=f[0],i.thumbMoveState.parkingLotLocation=f[1]}return[l,a]},vertical:function(o,r,n,a){var s=i.thumbMoveState.selectedElement,h=e.getPlotOffset(),l=r;if(i.thumbMoveState.inParkingLot){var u=e.offset();if(r>=u.top&&r<=u.top+e.height()){t.thumb.setHidden(s,!1);var d={target:s,edge:i.thumbMoveState.parkingLotLocation,orientation:"vertical",position:r-u.top+h.top};i.thumbMoveState.axisHandle&&(d.axisHandle=i.thumbMoveState.axisHandle),i._dispatchThumbEvent("thumbIntoRange",d,e.getEventHolder()),l=a,i.thumbMoveState.inParkingLot=!1}}else{var c=i._willVerticalThumbBeMovedOffGraph(s,r,e),f=_slicedToArray(c,2);i.thumbMoveState.inParkingLot=f[0],i.thumbMoveState.parkingLotLocation=f[1]}return[n,l]}}}},{key:"_createAxisHandleThumbConstrain",value:function(t,e){var i=this;return{horizontal:function(){return i.thumbMoveState.axisHandle=e,t.horizontal.apply(t,arguments)},vertical:function(){return i.thumbMoveState.axisHandle=e,t.vertical.apply(t,arguments)}}}},{key:"_willVerticalThumbBeMovedOffGraph",value:function(e,i,r){var n,a=r.offset(),s=!1;return i<a.top?(n="left"===e.shape?o.topLeft:o.topRight,s=!0):i>a.top+r.height()&&(n="left"===e.shape?o.bottomLeft:o.bottomRight,s=!0),s&&(t.thumb.setHidden(e,!0),this._dispatchThumbEvent("thumbOutOfRange",{target:e,edge:n,orientation:"vertical"},r.getEventHolder())),[s,n]}},{key:"_willHorizontalThumbBeMovedOffGraph",value:function(e,i,r){var n,a=r.offset(),s=!1;return i<a.left?(n="top"===e.shape?o.topLeft:o.bottomLeft,s=!0):i>a.left+r.width()&&(n="top"===e.shape?o.topRight:o.bottomRight,s=!0),s&&(t.thumb.setHidden(e,!0),this._dispatchThumbEvent("thumbOutOfRange",{target:e,edge:n,orientation:"horizontal"},r.getEventHolder())),[s,n]}},{key:"_dispatchThumbEvent",value:function(t,e,i){var o=new CustomEvent(t,{detail:e});i.dispatchEvent(o)}},{key:"_createPlotValueConstrain",value:function(t){return function(e,i){var o=t.offset();return[Math.max(-1,Math.min(e-o.left,t.width()+1)),Math.max(-1,Math.min(i-o.top,t.height()+1))]}}},{key:"render",value:function(t){this._lazyInitializeForRender(t),this._renderDockers(t)}},{key:"_lazyInitializeForRender",value:function(e){var i=this;if(!this.svgRoot){this.svgRoot=t.thumb.createSVGLayer(e.getPlaceholder(),e.getEventHolder());var r=(new DOMParser).parseFromString('<defs xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <symbol id="left-arrow" viewBox="0 0 40 50">\n                            <rect x="0" y="0" width="40" height="50"/>\n                            <polyline points="20,10 10,25 20,40" fill="none"/>\n                            <polyline points="10,25 30,25" fill="none"/>\n                        </symbol>\n                        <symbol id="up-arrow" viewBox="0 0 50 40">\n                            <rect x="0" y="0" width="50" height="40" />\n                            <polyline points="10,20 25,10 40,20" fill="none"/>\n                            <polyline points="25,10 25,30" fill="none"/>\n                        </symbol>\n                        <symbol id="right-arrow" viewBox="0 0 40 50">\n                            <use xlink:href="#left-arrow" x="0" y="0" width="40" height="50" transform="rotate(180,20,25)"/>\n                        </symbol>\n                        <symbol id="down-arrow" viewBox="0 0 50 40">\n                            <use xlink:href="#up-arrow" x="0" y="0" width="50" height="40" transform="rotate(180,25,20)"/>\n                        </symbol>\n                     </defs>',"image/svg+xml"),n=document.importNode(r.documentElement,!0);this.svgRoot.appendChild(n);var a=function(t,e){t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),t.setAttributeNS("http://www.w3.org/1999/xlink","href",e)},s={topLeft:{horizontal:"#left-arrow",vertical:"#up-arrow"},topRight:{horizontal:"#right-arrow",vertical:"#up-arrow"},bottomLeft:{horizontal:"#left-arrow",vertical:"#down-arrow"},bottomRight:{horizontal:"#right-arrow",vertical:"#down-arrow"}};this._dockerIndicators={},this._dockerBorders={},Object.keys(o).forEach(function(t){i._dockerIndicators[t]={},i._dockerBorders[t]={},["horizontal","vertical"].forEach(function(e){var o=document.createElementNS("http://www.w3.org/2000/svg","use");a(o,s[t][e]),"horizontal"===e?(o.setAttributeNS(null,"height","".concat(2*i._thumbRadius)),o.setAttributeNS(null,"width","".concat(2*i._thumbRadius*.8))):(o.setAttributeNS(null,"width","".concat(2*i._thumbRadius)),o.setAttributeNS(null,"height","".concat(2*i._thumbRadius*.8))),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"display","none"),o.style.pointerEvents="none",o.classList.add("parkingLot-dockerArrow"),i.svgRoot.appendChild(o),i._dockerIndicators[t][e]=o;var r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttributeNS(null,"display","none"),r.style.pointerEvents="none",r.classList.add("parkingLot-docker"),i._dockerBorders[t][e]=r,i.svgRoot.appendChild(r)})})}}},{key:"_renderDockers",value:function(t){this._renderTopLeftHorizontalDocker(),this._renderTopLeftVerticalDocker();var e=t.getPlotOffset(),i=t.width()+e.left+e.right,o=t.height()+e.top+e.bottom;this._renderTopRightHorizontalDocker(i),this._renderTopRightVerticalDocker(i),this._renderBottomLeftHorizontalDocker(o),this._renderBottomLeftVerticalDocker(o),this._renderBottomRightHorizontalDocker(i,o),this._renderBottomRightVerticalDocker(i,o)}},{key:"_renderBottomRightVerticalDocker",value:function(e,i){var o=this;if(this._show&&this.bottomRightVerticalDocker.size>0){var r=0,n=0===this.bottomRightHorizontalDocker.size,a=n?0:2*this._thumbRadius;this.bottomRightVerticalDocker.forEach(function(n){var s="matrix(1 0 0 1 ".concat(e-o._thumbRadius," ").concat(i-(a+o._thumbRadius+2*o._thumbRadius*r++),")");n.setAttribute("transform",s),t.thumb.setHidden(n,!1)});var s=this.bottomRightVerticalDocker.size*this._thumbRadius*2;this._updateBorderAttributes(this._dockerBorders.bottomRight.vertical,e-2*this._thumbRadius,i-(s+a),2*this._thumbRadius,s),
this._updateArrowPosition(this._dockerIndicators.bottomRight.vertical,e-2*this._thumbRadius,i-(s+a+2*this._thumbRadius*.8))}else this._dockerBorders.bottomRight.vertical.setAttributeNS(null,"display","none"),this._dockerIndicators.bottomRight.vertical.setAttributeNS(null,"display","none")}},{key:"_renderBottomRightHorizontalDocker",value:function(e,i){var o=this;if(this._show&&this.bottomRightHorizontalDocker.size>0){var r=0;this.bottomRightHorizontalDocker.forEach(function(n){var a="matrix(1 0 0 1 ".concat(e-o._thumbRadius-2*o._thumbRadius*r++," ").concat(i-o._thumbRadius,")");n.setAttribute("transform",a),t.thumb.setHidden(n,!1)});var n=this.bottomRightHorizontalDocker.size*this._thumbRadius*2;this._updateBorderAttributes(this._dockerBorders.bottomRight.horizontal,e-n,i-2*this._thumbRadius,n,2*this._thumbRadius),this._updateArrowPosition(this._dockerIndicators.bottomRight.horizontal,e-n-2*this._thumbRadius*.8,i-2*this._thumbRadius)}else this._dockerBorders.bottomRight.horizontal.setAttributeNS(null,"display","none"),this._dockerIndicators.bottomRight.horizontal.setAttributeNS(null,"display","none")}},{key:"_renderBottomLeftVerticalDocker",value:function(e){var i=this;if(this._show&&this.bottomLeftVerticalDocker.size>0){var o=0,r=0===this.bottomLeftHorizontalDocker.size,n=r?0:2*this._thumbRadius;this.bottomLeftVerticalDocker.forEach(function(r){var a="matrix(1 0 0 1 ".concat(i._thumbRadius," ").concat(e-(n+i._thumbRadius+2*i._thumbRadius*o++),")");r.setAttribute("transform",a),t.thumb.setHidden(r,!1)});var a=this.bottomLeftVerticalDocker.size*this._thumbRadius*2;this._updateBorderAttributes(this._dockerBorders.bottomLeft.vertical,0,e-(a+n),2*this._thumbRadius,a),this._updateArrowPosition(this._dockerIndicators.bottomLeft.vertical,0,e-(a+n+2*this._thumbRadius*.8))}else this._dockerBorders.bottomLeft.vertical.setAttributeNS(null,"display","none"),this._dockerIndicators.bottomLeft.vertical.setAttributeNS(null,"display","none")}},{key:"_renderBottomLeftHorizontalDocker",value:function(e){var i=this;if(this._show&&this.bottomLeftHorizontalDocker.size>0){var o=0;this.bottomLeftHorizontalDocker.forEach(function(r){var n="matrix(1 0 0 1 ".concat(i._thumbRadius+2*i._thumbRadius*o++," ").concat(e-i._thumbRadius,")");r.setAttribute("transform",n),t.thumb.setHidden(r,!1)}),this._updateBorderAttributes(this._dockerBorders.bottomLeft.horizontal,0,e-2*this._thumbRadius,this.bottomLeftHorizontalDocker.size*this._thumbRadius*2,2*this._thumbRadius),this._updateArrowPosition(this._dockerIndicators.bottomLeft.horizontal,this.bottomLeftHorizontalDocker.size*this._thumbRadius*2,e-2*this._thumbRadius)}else this._dockerBorders.bottomLeft.horizontal.setAttributeNS(null,"display","none"),this._dockerIndicators.bottomLeft.horizontal.setAttributeNS(null,"display","none")}},{key:"_renderTopRightVerticalDocker",value:function(e){var i=this;if(this._show&&this.topRightVerticalDocker.size>0){var o=0,r=0===this.topRightHorizontalDocker.size,n=r?0:2*this._thumbRadius;this.topRightVerticalDocker.forEach(function(r){var a="matrix(1 0 0 1 ".concat(e-i._thumbRadius," ").concat(n+i._thumbRadius+2*i._thumbRadius*o++,")");r.setAttribute("transform",a),t.thumb.setHidden(r,!1)}),this._updateBorderAttributes(this._dockerBorders.topRight.vertical,e-2*this._thumbRadius,n,2*this._thumbRadius,this.topRightVerticalDocker.size*this._thumbRadius*2),this._updateArrowPosition(this._dockerIndicators.topRight.vertical,e-2*this._thumbRadius,n+this.topRightVerticalDocker.size*this._thumbRadius*2)}else this._dockerBorders.topRight.vertical.setAttributeNS(null,"display","none"),this._dockerIndicators.topRight.vertical.setAttributeNS(null,"display","none")}},{key:"_renderTopRightHorizontalDocker",value:function(e){var i=this;if(this._show&&this.topRightHorizontalDocker.size>0){var o=0;this.topRightHorizontalDocker.forEach(function(r){var n="matrix(1 0 0 1 ".concat(e-i._thumbRadius-2*i._thumbRadius*o++," ").concat(i._thumbRadius,")");r.setAttribute("transform",n),t.thumb.setHidden(r,!1)});var r=this.topRightHorizontalDocker.size*this._thumbRadius*2;this._updateBorderAttributes(this._dockerBorders.topRight.horizontal,e-r,0,r,2*this._thumbRadius),this._updateArrowPosition(this._dockerIndicators.topRight.horizontal,e-r-2*this._thumbRadius*.8,0)}else this._dockerBorders.topRight.horizontal.setAttributeNS(null,"display","none"),this._dockerIndicators.topRight.horizontal.setAttributeNS(null,"display","none")}},{key:"_renderTopLeftVerticalDocker",value:function(){var e=this;if(this._show&&this.topLeftVerticalDocker.size>0){var i=0,o=0===this.topLeftHorizontalDocker.size,r=o?0:2*this._thumbRadius;this.topLeftVerticalDocker.forEach(function(o){var n="matrix(1 0 0 1 ".concat(e._thumbRadius," ").concat(r+e._thumbRadius+2*e._thumbRadius*i++,")");o.setAttribute("transform",n),t.thumb.setHidden(o,!1)}),this._updateBorderAttributes(this._dockerBorders.topLeft.vertical,0,r,2*this._thumbRadius,this.topLeftVerticalDocker.size*this._thumbRadius*2),this._updateArrowPosition(this._dockerIndicators.topLeft.vertical,0,this.topLeftVerticalDocker.size*this._thumbRadius*2+r)}else this._dockerBorders.topLeft.vertical.setAttributeNS(null,"display","none"),this._dockerIndicators.topLeft.vertical.setAttributeNS(null,"display","none")}},{key:"_renderTopLeftHorizontalDocker",value:function(){var e=this;if(this._show&&this.topLeftHorizontalDocker.size>0){var i=0;this.topLeftHorizontalDocker.forEach(function(o){var r="matrix(1 0 0 1 ".concat(e._thumbRadius+2*e._thumbRadius*i++," ").concat(e._thumbRadius,")");o.setAttribute("transform",r),t.thumb.setHidden(o,!1)}),this._updateBorderAttributes(this._dockerBorders.topLeft.horizontal,0,0,this.topLeftHorizontalDocker.size*this._thumbRadius*2,2*this._thumbRadius),this._updateArrowPosition(this._dockerIndicators.topLeft.horizontal,this.topLeftHorizontalDocker.size*this._thumbRadius*2,0)}else this._dockerBorders.topLeft.horizontal.setAttributeNS(null,"display","none"),this._dockerIndicators.topLeft.horizontal.setAttributeNS(null,"display","none")}},{key:"_updateBorderAttributes",value:function(t,e,i,o,r){t.setAttributeNS(null,"x",e.toString()),t.setAttributeNS(null,"y",i.toString()),t.setAttributeNS(null,"width",o.toString()),t.setAttributeNS(null,"height",r.toString()),t.setAttributeNS(null,"display","inline")}},{key:"_updateArrowPosition",value:function(t,e,i){t.setAttributeNS(null,"transform","matrix(1 0 0 1 ".concat(e," ").concat(i,")")),t.setAttributeNS(null,"display","inline")}},{key:"_attachConstrains",value:function(t){var e=this,i=this._createPlotValueConstrain(t),o=this._createThumbConstrain(t),r=t.getOptions();r.cursors&&(t.setPlotPositionConstrain(i),t.getCursors().forEach(function(t){t.horizontalThumbConstrain=o.horizontal,t.verticalThumbConstrain=o.vertical})),r.axisHandles&&(t.setAxisHandlePlotPositionConstrain(i),t.getAxisHandles().forEach(function(t){var i=e._createAxisHandleThumbConstrain(o,t);t.horizontalHandleConstrain=i.horizontal,t.verticalHandleConstrain=i.vertical}))}},{key:"bindEvents",value:function(t){var e=t.getEventHolder();e.addEventListener("thumbIntoRange",this._onThumbIntoRange,!1),e.addEventListener("thumbOutOfRange",this._onThumbOutOfRange,!1);var i=t.getPlaceholder()[0];i.addEventListener("thumbCreated",this._onThumbCreated,!1),i.addEventListener("thumbWillBeRemoved",this._onThumbWillBeRemoved,!1),i.addEventListener("thumbVisibilityChanged",this._onThumbVisibilityChanged,!1)}},{key:"_onThumbCreated",value:function(t,e){var i=e.detail.current;i.addEventListener("mousedown",this._onThumbMoveStart,!1),i.addEventListener("touchstart",this._onThumbMoveStart,!1),this.thumbs.add(i),this._addThumbIfWithinParkingLot(i,t)}},{key:"_onThumbWillBeRemoved",value:function(t,e){var i=e.detail.current;i.removeEventListener("mousedown",this._onThumbMoveStart),i.removeEventListener("touchstart",this._onThumbMoveStart),this.thumbs.delete(i),this._removeThumbIfOutsideParkingLot(i,t)}},{key:"_onThumbVisibilityChanged",value:function(t,e){var i=e.detail.current;e.detail.visible?this._addThumbIfWithinParkingLot(i,t):this._removeThumbIfOutsideParkingLot(i,t)}},{key:"_removeThumbIfOutsideParkingLot",value:function(t,e){var i=this._getThumbXYCoordinates(t),o=_slicedToArray(i,2),r=o[0],n=o[1],a=e.getPlotOffset();switch(t.shape){case"top":n<a.top-2*this._thumbRadius&&(this.topLeftHorizontalDocker.delete(t),this.topRightHorizontalDocker.delete(t));break;case"bottom":n>a.top+e.height()+2*this._thumbRadius&&(this.bottomLeftHorizontalDocker.delete(t),this.bottomRightHorizontalDocker.delete(t));break;case"left":r<a.left-2*this._thumbRadius&&(this.topLeftVerticalDocker.delete(t),this.bottomLeftVerticalDocker.delete(t));break;case"right":r>a.left+e.width()+2*this._thumbRadius&&(this.topRightVerticalDocker.delete(t),this.bottomRightVerticalDocker.delete(t))}}},{key:"_addThumbIfWithinParkingLot",value:function(t,e){var i=this._getThumbXYCoordinates(t),o=_slicedToArray(i,2),r=o[0],n=o[1],a=e.getPlotOffset();switch(t.shape){case"top":r<a.left?this.topLeftHorizontalDocker.add(t):r>a.left+e.width()&&this.topRightHorizontalDocker.add(t);break;case"bottom":r<a.left?this.bottomLeftHorizontalDocker.add(t):r>a.left+e.width()&&this.bottomRightHorizontalDocker.add(t);break;case"left":n<a.top?this.topLeftVerticalDocker.add(t):n>a.top+e.height()&&this.bottomLeftVerticalDocker.add(t);break;case"right":n<a.top?this.topRightVerticalDocker.add(t):n>a.top+e.height()&&this.bottomRightVerticalDocker.add(t)}}},{key:"_onThumbOutOfRange",value:function(t){var e=t.detail.orientation,i=t.detail.edge,r=t.detail.target;switch(i){case o.topLeft:"horizontal"===e?this.topLeftHorizontalDocker.add(r):this.topLeftVerticalDocker.add(r);break;case o.topRight:"horizontal"===e?this.topRightHorizontalDocker.add(r):this.topRightVerticalDocker.add(r);break;case o.bottomLeft:"horizontal"===e?this.bottomLeftHorizontalDocker.add(r):this.bottomLeftVerticalDocker.add(r);break;case o.bottomRight:"horizontal"===e?this.bottomRightHorizontalDocker.add(r):this.bottomRightVerticalDocker.add(r)}}},{key:"_onThumbIntoRange",value:function(t,i){var r=i.detail.orientation,n=i.detail.edge,a=i.detail.target,s=i.detail.position,h=t.getPlotOffset();switch(n){case o.topLeft:"horizontal"===r?(this.topLeftHorizontalDocker.delete(a),e._updateThumbPosition(a,s,h.top-this._thumbRadius)):(this.topLeftVerticalDocker.delete(a),e._updateThumbPosition(a,h.left-this._thumbRadius,s));break;case o.topRight:"horizontal"===r?(this.topRightHorizontalDocker.delete(a),e._updateThumbPosition(a,s,h.top-this._thumbRadius)):(this.topRightVerticalDocker.delete(a),e._updateThumbPosition(a,h.left+t.width()+this._thumbRadius,s));break;case o.bottomLeft:"horizontal"===r?(this.bottomLeftHorizontalDocker.delete(a),e._updateThumbPosition(a,s,h.top+t.height()+this._thumbRadius)):(this.bottomLeftVerticalDocker.delete(a),e._updateThumbPosition(a,h.left-this._thumbRadius,s));break;case o.bottomRight:"horizontal"===r?(this.bottomRightHorizontalDocker.delete(a),e._updateThumbPosition(a,s,h.top+t.height()+this._thumbRadius)):(this.bottomRightVerticalDocker.delete(a),e._updateThumbPosition(a,h.left+t.width()+this._thumbRadius,s))}if(i.detail.axisHandle){var l=i.detail.axisHandle,u="horizontal"===l.orientation?t.getXAxes()[l.axisIndex]:t.getYAxes()[l.axisIndex];if(l.absolutePosition>=u.min&&l.absolutePosition<=u.max)return;var d=s-("horizontal"===l.orientation?h.left:h.top),c=u.c2p(d),f=l.absolutePosition-c,p=u.options.offset;u.options.offset={below:p.below+f,above:p.above+f},t.setupGrid(!0),t.draw()}}},{key:"_onThumbMoveStart",value:function(t){this.thumbMoveState=null;var i=e._getThumb(t.target);if(i.classList.contains("draggable")){var o,r=!1;i.classList.contains("top")?this.topLeftHorizontalDocker.has(i)?(r=!0,o="topleft"):this.topRightHorizontalDocker.has(i)&&(r=!0,o="topright"):i.classList.contains("bottom")?this.bottomLeftHorizontalDocker.has(i)?(r=!0,o="bottomleft"):this.bottomRightHorizontalDocker.has(i)&&(r=!0,o="bottomright"):i.classList.contains("left")?this.bottomLeftVerticalDocker.has(i)?(r=!0,o="bottomleft"):this.topLeftVerticalDocker.has(i)&&(r=!0,o="topleft"):i.classList.contains("right")&&(this.bottomRightVerticalDocker.has(i)?(r=!0,o="bottomright"):this.topRightVerticalDocker.has(i)&&(r=!0,o="topright")),this.thumbMoveState={selectedElement:i,inParkingLot:r,parkingLotLocation:o}}}},{key:"_unbindEvents",value:function(t){var e=this;t.getEventHolder().removeEventListener("thumbIntoRange",this._onThumbIntoRange),t.getEventHolder().removeEventListener("thumbOutOfRange",this._onThumbOutOfRange);var i=t.getPlaceholder()[0];i.removeEventListener("thumbCreated",this._onThumbCreated),i.removeEventListener("thumbWillBeRemoved",this._onThumbWillBeRemoved),i.removeEventListener("thumbVisibilityChanged",this._onThumbVisibilityChanged),this.thumbs.forEach(function(t){t.removeEventListener("mousedown",e._onThumbMoveStart),t.removeEventListener("touchstart",e._onThumbMoveStart)}),this.thumbs.clear()}},{key:"_getThumbXYCoordinates",value:function(t){var e=t.getCTM();return[e.e,e.f]}}],[{key:"_updateThumbPosition",value:function(t,e,i){var o=t.getCTM(),r="matrix(".concat(o.a," ").concat(o.b," ").concat(o.c," ").concat(o.d," ").concat(e," ").concat(i,")");t.setAttribute("transform",r)}},{key:"_getThumb",value:function(t){for(var e=t;!e.classList.contains("thumb");)e=e.parentNode;return e}}]),e}();t.plot.plugins.push({init:e,name:"parkingLot",version:"1.1.1"})}(jQuery),function(t){function e(e){function n(t){return i(t,{name:"unnamed "+z.length,type:"range-cursor",position:t.position||{relativeXStart:.45,relativeXEnd:.55,xstart:void 0,xend:void 0,relativeYStart:.45,relativeYEnd:.55,ystart:void 0,yend:void 0},mousePosition:{relativeXStart:void 0,relativeXEnd:void 0,relativeYStart:void 0,relativeYEnd:void 0},xstart:void 0,xend:void 0,ystart:void 0,yend:void 0,startMovePosition:{x:0,y:0},show:!0,selected:!1,highlighted:!1,orientation:"vertical",halign:"top",dragLocation:"",transparentRange:"outside",showLabel:!1,showValue:!1,showBorders:!0,color:"gray",fillColor:"#4F4F4F4F",fontSize:"10px",fontFamily:"sans-serif",fontStyle:"",fontWeight:"",lineWidth:1,movable:!0,mouseButton:"all",dashes:[],defaultxaxis:1,defaultyaxis:1,constrainToEdge:!0})}function l(){P=!1,z.forEach(function(t){if(!isNaN(t.start)&&!isNaN(t.end)){var i={relativeXStart:t.position.relativeXStart||t.xstart/e.width(),relativeYStart:t.position.relativeYStart||t.ystart/e.height(),relativeXEnd:t.position.relativeXEnd||t.xend/e.width(),relativeYEnd:t.position.relativeYEnd||t.yend/e.width()};isNaN(i.relativeStart)||isNaN(i.relativeEnd)||(t.position=i)}})}function u(){P=!0,z.forEach(function(t){var i=d(e,t),o=c(e,t);t.mousePosition={},void 0===t.position.xstart&&(t.position.xstart=i.c2p?i.c2p(t.xstart):void 0),void 0===t.position.ystart&&(t.position.ystart=o.c2p?o.c2p(t.ystart):void 0),void 0===t.position.xend&&(t.position.xend=i.c2p?i.c2p(t.xend):void 0),void 0===t.position.yend&&(t.position.yend=o.c2p?o.c2p(t.yend):void 0),t.position.relativeXStart=void 0,t.position.relativeXEnd=void 0,t.position.relativeYStart=void 0,t.position.relativeYEnd=void 0})}function p(t,i,o,r,n){var a=E(z);a&&""!==a.dragLocation?(R(a,i,o),a.startMovePosition.x=i,a.startMovePosition.y=o,e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault()):(a&&""!==a.dragLocation&&(a.selected=!1,a.dragLocation="",e.triggerRedrawOverlay()),O(z).forEach(function(t){var i={shape:""};t.movable&&(""!==x(r,n,e,t,i)?(t.highlighted||(t.highlighted=!0,e.triggerRedrawOverlay()),e.getPlaceholder().css("cursor",i.shape)):y(r,n,e,t)?(t.highlighted||(t.highlighted=!0,e.triggerRedrawOverlay()),e.getPlaceholder().css("cursor","move")):t.highlighted&&(t.highlighted=!1,e.getPlaceholder().css("cursor","default"),e.triggerRedrawOverlay()))}))}function v(t,i,o,r,n){var a=E(z);if(a&&""!==a.dragLocation)e.getPlaceholder().css("cursor","default"),R(a,i,o),e.triggerRedrawOverlay();else{var s,h;O(z).forEach(function(t){var a={shape:""};t.movable&&(""!==(h=x(r,n,e,t,a))?s=t:y(r,n,e,t)&&(s=t,h="between",t.startMovePosition.x=i,t.startMovePosition.y=o))}),s&&(s.selected=!0,s.dragLocation=h,e.getPlaceholder().css("cursor","move"),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}}function b(t,i,o,r,n){var a=E(z);a&&(a.selected=!1,R(a,i,o),e.getPlaceholder().css("cursor","default"),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}function w(t,i,o,r,n){var a=E(z);a&&0===t.buttons&&(a.selected=!1,e.triggerRedrawOverlay()),O(z).forEach(function(t){k(r,n,e,t)})}function _(t){t.highlighted||(t.highlighted=!0,e.triggerRedrawOverlay())}function k(t,e,i,o){var r={shape:""};o.movable&&(""!==x(t,e,i,o,r)?(_(o),i.getPlaceholder().css("cursor",r.shape)):y(t,e,i,o)?(_(o),i.getPlaceholder().css("cursor","move")):o.highlighted&&(o.highlighted=!1,i.getPlaceholder().css("cursor","default"),i.triggerRedrawOverlay()))}function T(t,i,o,r,n){var a,s;a=d(e,t),s=c(e,t),void 0!==i&&(t.mousePosition.relativeXStart=i/e.width(),t.position.relativeXStart=i/e.width(),t.position.xstart=a.c2p?a.c2p(i):void 0),void 0!==o&&(t.mousePosition.relativeXEnd=o/e.width(),t.position.relativeXEnd=o/e.width(),t.position.xend=a.c2p?a.c2p(o):void 0),void 0!==r&&(t.mousePosition.relativeYStart=r/e.height(),t.position.relativeYStart=r/e.height(),t.position.ystart=s.c2p?s.c2p(r):void 0),void 0!==n&&(t.mousePosition.relativeYEnd=n/e.height(),t.position.relativeYEnd=n/e.height(),t.position.yend=s.c2p?s.c2p(n):void 0)}function R(t,e,i){"edge-w"===t.dragLocation?(t.xstart=e,T(t,t.xstart,t.xend,t.ystart,t.yend)):"edge-e"===t.dragLocation?(t.xend=e,T(t,t.xstart,t.xend,t.ystart,t.yend)):"edge-n"===t.dragLocation?(t.ystart=i,T(t,t.xstart,t.xend,t.ystart,t.yend)):"edge-s"===t.dragLocation?(t.yend=i,T(t,t.xstart,t.xend,t.ystart,t.yend)):"between"===t.dragLocation&&("horizontal"!==t.orientation&&(t.xstart=t.xstart+e-t.startMovePosition.x,t.xend=t.xend+e-t.startMovePosition.x),"vertical"!==t.orientation&&(t.ystart=t.ystart+i-t.startMovePosition.y,t.yend=t.yend+i-t.startMovePosition.y),T(t,t.xstart,t.xend,t.ystart,t.yend))}function S(t){var i=e.offset();return Math.max(0,Math.min(t-i.left,e.width()))}function L(t){var i=e.offset();return Math.max(0,Math.min(t-i.top,e.height()))}var z=[],P=!0;e.hooks.processOptions.push(function(t){t.getOptions().rangecursors&&t.getOptions().rangecursors.forEach(function(e){t.addRangeCursor(e)})}),e.getRangeCursors=function(){return z},e.addRangeCursor=function(t){var i=n(t);r(e,i,i.position),z.push(i),e.triggerRedrawOverlay()},e.removeRangeCursor=function(t){var i=z.indexOf(t);-1!==i&&z.splice(i,1),e.triggerRedrawOverlay()},e.setRangeCursor=function(t,o){var n=z.indexOf(t);-1!==n&&(i(o,z[n]),r(e,z[n],z[n].position),e.triggerRedrawOverlay())},e.formatCursorRange=f;var E=function(t){var e;return t.forEach(function(t){t.selected&&(e||(e=t))}),e},O=function(t){return t.filter(function(t){return t.show})},I={start:function(t){v(t,S(t.detail.touches[0].pageX),L(t.detail.touches[0].pageY),t.detail.touches[0].pageX,t.detail.touches[0].pageY)},drag:function(t){p(t,S(t.detail.touches[0].pageX),L(t.detail.touches[0].pageY),t.detail.touches[0].pageX,t.detail.touches[0].pageY)},end:function(t){var e=E(z);e&&(e.selected=!1)}},A={start:function(t){v(t,S(t.detail.touches[0].pageX),L(t.detail.touches[0].pageY),t.detail.touches[0].pageX,t.detail.touches[0].pageY)},drag:function(t){p(t,S(t.detail.touches[0].pageX),L(t.detail.touches[0].pageY),t.detail.touches[0].pageX,t.detail.touches[0].pageY)},end:function(t){var e=E(z);e&&(e.selected=!1)}},M={start:function(e){var i=t.plot.browser.getPageXY(e);v(e,S(i.X),L(i.Y),i.X,i.Y)},drag:function(e){var i=t.plot.browser.getPageXY(e);p(e,S(i.X),L(i.Y),i.X,i.Y)},mouseover:function(e){var i=t.plot.browser.getPageXY(e);w(e,S(i.X),L(i.Y),i.X,i.Y)},end:function(e){var i=t.plot.browser.getPageXY(e);b(e,S(i.X),L(i.Y),i.X,i.Y)}};e.hooks.bindEvents.push(function(t,e){e[0].addEventListener("panstart",I.start,!1),e[0].addEventListener("pandrag",I.drag,!1),e[0].addEventListener("panend",I.end,!1),e[0].addEventListener("pinchstart",A.start,!1),e[0].addEventListener("pinchdrag",A.drag,!1),e[0].addEventListener("pinchend",A.end,!1),t.getPlaceholder().bind("plotpan",u),t.getPlaceholder().bind("plotzoom",u),t.addEventHandler("dragstart",M.start,e,10),t.addEventHandler("drag",M.drag,e,10),t.addEventHandler("dragend",M.end,e,10),e.bind("mousemove",M.mouseover)}),e.hooks.processRawData.push(function(t,e,i,o){e.historyBuffer&&l()}),e.hooks.drawOverlay.push(function(t,e){var i=[],n=function(t){return void 0!==t.relativeXStart&&void 0!==t.relativeXEnd&&void 0!==t.relativeYStart&&void 0!==t.relativeYEnd};z.forEach(function(l){if(o(t,l),r(t,l,l.position),T(l,l.xstart,l.xend,l.ystart,l.yend),n(l.mousePosition)||(l.mousePosition.relativeXStart=l.xstart/t.width(),l.mousePosition.relativeXEnd=l.xend/t.width(),l.mousePosition.relativeYStart=l.ystart/t.height(),l.mousePosition.relativeYEnd=l.yend/t.height()),l.show){var u=t.getPlotOffset();e.save(),e.translate(u.left,u.top),l.showBorders&&g(t,e,l),m(t,e,l),a(t,e,l),h(t,e,l),s(t,e,l),e.restore(),i.push({rangecursor:l.name,target:l,positionMode:P,position:l.position})}}),i.length>0&&t.getPlaceholder().trigger("cursorupdates",[i])}),e.hooks.shutdown.push(function(t,e){e[0].removeEventListener("panstart",I.start),e[0].removeEventListener("pandrag",I.drag),e[0].removeEventListener("panend",I.end),e[0].removeEventListener("pinchstart",A.start),e[0].removeEventListener("pinchdrag",A.drag),e[0].removeEventListener("pinchend",A.end);var i=t.getPlaceholder();i.unbind("plotpan",u),i.unbind("plotzoom",u),e.unbind("mousedown",M.start),e.unbind("mousemove",M.move),e.unbind("mouseup",M.end),i.css("cursor","default")})}function i(t,e){return Object.keys(t).forEach(function(i){e[i]=t[i]}),e}function o(t,e){var i=d(t,e),o=c(t,e),r=e.position;void 0!==r.xstart&&void 0!==r.xend||!i.c2p||0===i.min&&1===i.max||("horizontal"!==e.orientation?(r.xstart=i.c2p(r.relativeXStart*t.width()),r.xend=i.c2p(r.relativeXEnd*t.width())):(r.xstart=i.c2p(0),r.xend=i.c2p(t.width()))),void 0!==r.ystart&&void 0!==r.yend||!o.c2p||0===o.min&&1===o.max||("vertical"!==e.orientation?(r.ystart=o.c2p(r.relativeYStart*t.height()),r.yend=o.c2p(r.relativeYEnd*t.height())):(r.ystart=o.c2p(0),r.yend=o.c2p(t.height()))),void 0!==r.relativeXStart&&void 0!==r.relativeXEnd||!i.p2c||void 0===r.xstart||void 0===r.xend||("horizontal"!==e.orientation?(r.relativeXStart=i.p2c(r.xstart)/t.width(),r.relativeXEnd=i.p2c(r.xend)/t.width()):(r.relativeXStart=0,r.relativeXEnd=1)),void 0!==r.relativeYStart&&void 0!==r.relativeYEnd||!o.p2c||void 0===r.ystart||void 0===r.yend||("vertical"!==e.orientation?(r.relativeYStart=o.p2c(r.ystart)/t.height(),r.relativeYEnd=o.p2c(r.yend)/t.height()):(r.relativeYStart=0,r.relativeYEnd=1))}function r(t,e,i){var o=d(t,e),r=c(t,e),n=void 0!==i.xstart?o.p2c?o.p2c(i.xstart):void 0:i.relativeXStart*t.width(),a=void 0!==i.xend?o.p2c?o.p2c(i.xend):void 0:i.relativeXEnd*t.width(),s=void 0!==i.ystart?r.p2c?r.p2c(i.ystart):void 0:i.relativeYStart*t.height(),h=void 0!==i.yend?r.p2c?r.p2c(i.yend):void 0:i.relativeYEnd*t.height(),l=t.width(),u=Math.abs(a-n);u>l&&(u=l);var f=t.height(),p=Math.abs(h-s);p>f&&(p=f),n>a&&!o.inverted&&(n=a-u),e.constrainToEdge&&(a>l&&(a=l,n=l-u),n<0&&(n=0,a=u),h>f&&(h=f,s=f-p),s<0&&(s=0,h=p)),"vertical"===e.orientation?(e.ystart=0,e.yend=t.height(),e.xstart=n,e.xend=a):"horizontal"===e.orientation?(e.xstart=0,e.xend=t.width(),e.ystart=s,e.yend=h):(e.xstart=n,e.xend=a,e.ystart=s,e.yend=h)}function n(t,e,i,o){var r="left",n=Number(e.fontSize.substring(0,e.fontSize.length-2)),a=e.xstart+(e.xend-e.xstart)/2,s=e.ystart+(e.yend-e.ystart)/2;if("vertical"===e.orientation?"top"===i?(s-=_.labelPadding,r="center",s-=n,e.showLabel&&e.showValue&&0===o&&(s-=n)):(s+=_.labelPadding,r="center",s+=n,1===o&&(s+=n)):"horizontal"===e.orientation?"top"===i?(a+=_.labelPadding,1===o&&(s+=n)):(a-=_.labelPadding,r="right",1===o&&(s+=n)):(r="center",1===o&&(s+=n)),!(a<0||a>t.width()||s<0||s>t.height()))return{x:a,y:s,textAlign:r}}function a(t,e,i){if(i.showLabel){var o=n(t,i,i.halign,0);if(!o)return;e.beginPath(),e.fillStyle=i.color,e.textAlign=o.textAlign,e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,e.fillText(i.name,o.x,o.y),e.textAlign="left",e.stroke()}}function s(t,e,i){if(i.showValue){var o=f(t,i),r=n(t,i,i.halign,i.showLabel?1:0);if(!r)return;e.fillStyle=i.color,e.textAlign=r.textAlign,e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,e.fillText(o,r.x,r.y)}}function h(t,e,i){if(i.showBorders){var o=p(t,i);if(!o)return;if(e.beginPath(),e.strokeStyle=i.color,e.lineWidth=i.lineWidth,"vertical"===i.orientation){var r=o.xstart,n=o.xend;e.moveTo(r,t.height()/2),e.lineTo(n,t.height()/2),Math.abs(r-n)>Number.EPSILON&&l(e,i,"left",i.xstart,t.height()/2),Math.abs(n-r)>Number.EPSILON&&l(e,i,"right",i.end,t.height()/2)}else if("horizontal"===i.orientation){var r=o.ystart,n=o.yend;e.moveTo(t.width()/2,r),e.lineTo(t.width()/2,n),Math.abs(r-n)>Number.EPSILON&&l(e,i,"up",t.width()/2,i.ystart),Math.abs(n-r)>Number.EPSILON&&l(e,i,"down",t.width()/2,i.yend)}e.stroke()}}function l(t,e,i,o,r){switch(i){case"left":t.moveTo(o,r),t.lineTo(o+_.arrowHeadLength,r-_.arrowHeadLength/2),t.moveTo(o,r),t.lineTo(o+_.arrowHeadLength,r+_.arrowHeadLength/2);break;case"right":t.moveTo(o,r),t.lineTo(o-_.arrowHeadLength,r-_.arrowHeadLength/2),t.moveTo(o,r),t.lineTo(o-_.arrowHeadLength,r+_.arrowHeadLength/2);break;case"up":t.moveTo(o,r),t.lineTo(o-_.arrowHeadLength/2,r+_.arrowHeadLength),t.moveTo(o,r),t.lineTo(o+_.arrowHeadLength/2,r+_.arrowHeadLength);break;case"down":t.moveTo(o,r),t.lineTo(o-_.arrowHeadLength/2,r-_.arrowHeadLength),t.moveTo(o,r),t.lineTo(o+_.arrowHeadLength/2,r-_.arrowHeadLength)}}function u(t,e,i){var o="x"===e.direction?i+1:i-1,r=e.c2p(i),n=e.c2p(o);return t.computeValuePrecision(r,n,e.direction,1)}function d(t,e){return t.getXAxes()[e.defaultxaxis-1]}function c(t,e){return t.getYAxes()[e.defaultyaxis-1]}function f(t,e){var i=d(t,e),o=c(t,e),r=u(t,i,e.xstart),n=i.tickFormatter(i.c2p(e.xend)-i.c2p(e.xstart),i,r,t);n=n.replace("<br>"," "),n=n.replace("&nbsp;"," ");var a=u(t,o,e.ystart),s=o.tickFormatter(o.c2p(e.yend)-o.c2p(e.ystart),o,a,t);return s=s.replace("<br>"," "),s=s.replace("&nbsp;"," "),"box"===e.orientation?"["+n+" "+s+"]":"vertical"===e.orientation?n:s}function p(t,e){var i=e.mousePosition.relativeXStart,o=e.mousePosition.relativeXEnd,r=e.mousePosition.relativeYStart,n=e.mousePosition.relativeYEnd;if(!(i<=0&&o<=0||r<=0&&n<=0||r>=1&&n>=1||i>=1&&o>=1))return i=i<0?0:e.xstart,r=r<0?0:e.ystart,o=o>1?t.width():e.xend,n=n>1?t.height():e.yend,{xstart:i,xend:o,ystart:r,yend:n}}function g(t,e,i){if(0!==i.lineWidth){var o=i.lineWidth%2?.5:0;e.strokeStyle=i.color,e.lineWidth=i.lineWidth,e.lineJoin="round",e.beginPath(),i.dashes.length&&e.setLineDash(i.dashes);var r=Math.floor(i.xstart)+o,n=Math.floor(i.xend)+o,a=Math.floor(i.ystart)+o,s=Math.floor(i.yend)+o;"box"===i.orientation?e.strokeRect(r,a,n-r,s-a):"vertical"===i.orientation?(e.moveTo(r,a),e.lineTo(r,s),e.moveTo(n,a),e.lineTo(n,s),e.stroke()):(e.moveTo(r,a),e.lineTo(n,a),e.moveTo(r,s),e.lineTo(n,s),e.stroke())}}function m(t,e,i){e.fillStyle=i.fillColor;var o=p(t,i);if(o){var r=o.xstart,n=o.xend,a=o.ystart,s=o.yend;"outside"===i.transparentRange?e.fillRect(r,a,n-r,s-a):(e.fillRect(0,0,t.width(),a),e.fillRect(0,a,r,s-a),e.fillRect(n,a,t.width()-n,s-a),e.fillRect(0,s,t.width(),t.height()-s))}}function v(t,e,i,o,r,n){var a=i.offset(),s=Math.max(0,Math.min(t-a.left,i.width())),h=Math.max(0,Math.min(e-a.top,i.height()));return s>o-_.mouseGrabMargin&&s<o+_.mouseGrabMargin&&h>r&&h<n}function b(t,e,i,o,r,n){var a=i.offset(),s=Math.max(0,Math.min(t-a.left,i.width())),h=Math.max(0,Math.min(e-a.top,i.height()));return h>o-_.mouseGrabMargin&&h<o+_.mouseGrabMargin&&s>r&&s<n}function y(t,e,i,o){var r=i.offset(),n=Math.max(0,Math.min(t-r.left,i.width())),a=Math.max(0,Math.min(e-r.top,i.height())),s=p(i,o);if(s){var h=s.xstart,l=s.xend,u=s.ystart,d=s.yend;return a>u+_.mouseGrabMargin&&a<d-_.mouseGrabMargin&&n>h+_.mouseGrabMargin&&n<l+_.mouseGrabMargin}}function x(t,e,i,o,r){return"horizontal"!==o.orientation&&v(t,e,i,o.xstart,o.ystart,o.yend)?(r.shape="ew-resize","edge-w"):"horizontal"!==o.orientation&&v(t,e,i,o.xend,o.ystart,o.yend)?(r.shape="ew-resize","edge-e"):"vertical"!==o.orientation&&b(t,e,i,o.yend,o.xstart,o.xend)?(r.shape="ns-resize","edge-s"):"vertical"!==o.orientation&&b(t,e,i,o.ystart,o.xstart,o.xend)?(r.shape="ns-resize","edge-n"):""}var w={cursors:[]},_={mouseGrabMargin:12,arrowHeadLength:10,labelPadding:2};t.plot.plugins.push({init:e,options:w,name:"cursors",version:"0.2"})}(jQuery),function(t,e){function i(t){return t.options.type===o.ColorScaleType}function o(){function t(t,e,i,o){!0===t.getOptions().series.intensitygraph.show&&i[0].length>0&&(o.pointsize=2,o.points.length=0,o.points.push(0,0),o.points.push(i.length||0,i[0]?i[0].length:0))}this.pluginName="intensitygraph",this.pluginVersion="0.2",this.defaultOptions={series:{intensitygraph:{data:[],show:!1,lowColor:"rgba(0,0,0,1)",highColor:"rgba(255,255,255,1)",min:0,max:1}}};var r=[{value:0,color:"#3182bd"},{value:.5,color:"#9ecae1"},{value:1,color:"#deebf7"}],n={centerX:20,centerY:0};this.init=function(a){function s(e,i){if(i.series.intensitygraph.show){i.series.intensitygraph.gradient||(i.series.intensitygraph.gradient=r);var a=e.getYAxes(),s=a.filter(function(t){return o.prototype.isColorScale(t)})[0];!s||s.boxPosition&&0!==s.boxPosition.centerX||(s.boxPosition=n),e.hooks.drawSeries.push(l),e.hooks.processRawData.push(t),f=i,i.series.intensitygraph.palette=h(i)}}function h(t){var i,o,r=document.createElement("canvas");r.width="1",r.height="256";var n,a=r.getContext("2d"),s=a.createLinearGradient(0,0,0,256),h=t.series.intensitygraph.gradient,l=h[0].value,u=h[h.length-1].value;if(u===l)s.addColorStop(0,h[0].color),s.addColorStop(1,h[0].color);else for(i=0;i<h.length;i++)o=h[i].value,(n=(o-l)/(u-l))>=0&&n<=1&&s.addColorStop(n,h[i].color);a.fillStyle=s,a.fillRect(0,0,1,256);var d=[],c=a.getImageData(0,0,1,256).data;for(i=0;i<c.length;i++)d[i]=c[i];var f=t.series.intensitygraph.lowColor,p=t.series.intensitygraph.highColor,g=e.color.parse(f),m=e.color.parse(p);return d.push(0|g.r),d.push(0|g.g),d.push(0|g.b),d.push(255*g.a|0),d.push(0|m.r),d.push(0|m.g),d.push(0|m.b),d.push(255*m.a|0),d}function l(t,e,r){function n(t,e,i,o,r,n,a,s,h,l,u,d,c,f){var p,g,m,v,b,y,x,w,_,k,T,R,S=c-d;for(p=0;p<n;p++)for(m=0|s(e+p/f),g=a-1;g>=0;g--){for(v=0|h(o-g/f),_=u[m][v],x=0|Math.min(s(e+p/f+1),u.length),w=0|Math.min(h(o-g/f-1),u[0].length),b=m;b<x;b++)for(y=v;y<w;y++)(k=u[b][y])>_&&(_=k);for(b=m;b<x;b++)(k=u[b][v])>_&&(_=k);for(y=v;y<w;y++)(k=u[m][y])>_&&(_=k);T=_<d?1024:_>c?1028:4*Math.round(255*(_-d)/S),R=4*(a-g-1)*n+4*p,t.data[R+0]=l[T+0],t.data[R+1]=l[T+1],t.data[R+2]=l[T+2],t.data[R+3]=l[T+3]}}function a(t,e,i,o,r,n,a,s,h,l,u,d,c){var f,p,g,m,v,b,y,x,w,_,k,T,R=c-d;for(f=0;f<n;f++)for(g=e+f*s|0,p=0;p<a;p++){for(m=o+p*h|0,w=u[g][m],y=0|Math.floor(Math.min(g+s,u.length)),x=0|Math.floor(Math.min(m+h,u[0].length)),v=g;v<y;v++)for(b=m;b<x;b++)(_=u[v][b])>w&&(w=_);k=w<d?1024:w>c?1028:4*Math.round(255*(w-d)/R),T=4*(a-p-1)*n+4*f,t.data[T+0]=l[k+0],t.data[T+1]=l[k+1],t.data[T+2]=l[k+2],t.data[T+3]=l[k+3]}}function s(t,e,i,o,r,n,a,s,h,l,u){var d,c,f,p,g,m=u-l;for(d=e;d<i;d++)for(c=o;c<r;c++)f=h[d][c],p=f<l?1024:f>u?1028:4*Math.round(255*(f-l)/m),g=4*(r-c-1)*n+4*(d-e),t.data[g+0]=s[p+0],t.data[g+1]=s[p+1],t.data[g+2]=s[p+2],t.data[g+3]=s[p+3]}function h(t,e,i){return u&&u.width===e&&u.height===i||(u=t.createImageData(e,i)),u}function l(t,e){return d||(d=document.createElement("canvas"),d.className="tempCanvas",d.style.visibility="hidden",c=null),c&&d.width===t&&d.height===e||(d.width=t,d.style.width=t+"px",d.height=e,d.style.height=e+"px",c=d.getContext("2d").createImageData(t,e)),c}var p=t.getPlotOffset(),g=t.getSurface().pixelRatio,m=t.getYAxes(),v=m.filter(function(t){return i(t)
})[0],b=v&&"none"!==v.options.autoScale?v.min:r.intensitygraph.min,y=v&&"none"!==v.options.autoScale?v.max:r.intensitygraph.max;r.data.length>0&&r.data[0].length>0&&(e.save(),e.beginPath(),e.rect(p.left,p.top,t.width(),t.height()),e.clip(),function(t){return!(r.xaxis.options.mode&&"linear"!==r.xaxis.options.mode||r.yaxis.options.mode&&"linear"!==r.yaxis.options.mode)}(r)?function(e,i){var r,n,u,c=0|Math.floor(Math.max(e.xaxis.min,0)),f=0|Math.ceil(Math.min(e.data.length,e.xaxis.max)),m=0|Math.floor(Math.max(e.yaxis.min,0)),v=0|Math.ceil(Math.min(e.data[0].length,e.yaxis.max)),x=e.xaxis.p2c(c),w=e.xaxis.p2c(f),_=e.yaxis.p2c(m),k=e.yaxis.p2c(v),T=Math.abs((f-c)/(w-x))/g,R=Math.abs((v-m)/(k-_))/g,S=T>1&&R>1;if(t.getYAxes().filter(function(t){return o.prototype.isColorScale(t)})[0],S){var L=Math.floor(x*g),z=Math.floor(w*g),P=Math.floor(k*g),E=Math.floor(_*g);r=z-L,n=E-P,r>0&&n>0&&(u=h(i,r,n),a(u,c,f,m,v,r,n,T,R,e.intensitygraph.palette,e.data,b,y),i.putImageData(u,Math.ceil((x+p.left)*g),Math.ceil((k+p.top)*g)))}else r=f-c,n=v-m,r>0&&n>0&&(u=l(r,n),s(u,c,f,m,v,r,n,e.intensitygraph.palette,e.data,b,y),d.getContext("2d").putImageData(u,0,0),i.imageSmoothingEnabled=!1,i.webkitImageSmoothingEnabled=!1,i.msImageSmoothingEnabled=!1,i.drawImage(d,0,0,r,n,x+p.left,k+p.top,Math.max(w-x,1),Math.max(_-k,1)))}(r,e):function(t,e){var i=Math.max(t.xaxis.min,0),o=Math.min(t.data.length,t.xaxis.max),r=Math.max(t.yaxis.min,0),a=Math.min(t.data[0].length,t.yaxis.max),s=t.xaxis.p2c(i),l=t.xaxis.p2c(o),u=t.yaxis.p2c(r),d=t.yaxis.p2c(a),c=Math.floor(s*g),f=Math.floor(l*g),m=Math.floor(d*g),v=Math.floor(u*g),x=f-c,w=v-m;if(x>0&&w>0){var _=h(e,x,w);n(_,s,l,u,d,x,w,t.xaxis.c2p,t.yaxis.c2p,t.intensitygraph.palette,t.data,b,y,g),e.putImageData(_,Math.ceil((s+p.left)*g),Math.ceil((d+p.top)*g))}}(r,e),e.restore()),function(t,e,i){var r=i&&i.show?i.box.left+10:p.left+t.width()+20,n=f.series.intensitygraph.gradient,a=f.series.intensitygraph.lowColor,s=f.series.intensitygraph.highColor;i&&i.show&&o.prototype.drawLegend(e,r,p.top,10,t.height(),n,a,s)}(t,e,v)}var u,d,c,f=null;a.hooks.processOptions.push(s)}}var r=function(t,e,i,o,r,n,a,s){var h,l,u=t.createLinearGradient(0,i+r,0,i),d=n[0].value,c=n[n.length-1].value;for(l=0;l<n.length;l++)(h=(n[l].value-d)/(c-d))>=0&&h<=1&&u.addColorStop(h,n[l].color);t.fillStyle=u,t.fillRect(e,i,o,r),t.fillStyle=a,t.fillRect(e,i+r,o,7),t.strokeStyle="#000000",t.lineWidth=1,t.strokeRect(e-.5,i+r+.5,o+1,7),t.fillStyle=s,t.fillRect(e,i-7,o,7),t.strokeStyle="#000000",t.lineWidth=1,t.strokeRect(e-.5,i-7+.5,o+1,7)};o.ColorScaleType="colorScale",o.prototype.drawLegend=r,o.prototype.isColorScale=i;var n=new o;e.plot.plugins.push({init:n.init,options:n.defaultOptions,name:n.pluginName,version:n.pluginVersion}),e.plot.IntensityGraph=o}(0,jQuery),function(t){function e(){if(!(this instanceof e))return arguments.length>1||"number"!=typeof arguments[0]?e.apply(new e(arguments.length),arguments):new e(arguments[0]);if(0===arguments.length)throw new Error("Missing Argument: You must pass a valid buffer length");return this.size=this.start=0,this.overflow=null,arguments.length>1||"number"!=typeof arguments[0]?(this.data=new Array(arguments.length),this.end=(this.length=arguments.length)-1,this.push.apply(this,arguments)):(this.data=new Array(arguments[0]),this.end=(this.length=arguments[0])-1),this}function i(t,e){return t==e?0:t>e?1:-1}e.prototype={constructor:e,pop:function(){var t;if(0!==this.size)return t=this.data[this.end],delete this.data[this.end],this.end=(this.end-1+this.length)%this.length,this.size--,t},push:function(t){return this.data[(this.end+1)%this.length]=t,this.size<this.length&&this.size++,this.end=(this.end+1)%this.length,this.start=(this.length+this.end-this.size+1)%this.length,this.size},reverse:function(){for(var t,e=0;e<~~(this.size/2);e++)t=this.data[(this.start+e)%this.length],this.data[(this.start+e)%this.length]=this.data[(this.start+(this.size-e-1))%this.length],this.data[(this.start+(this.size-e-1))%this.length]=t;return this},rotateLeft:function(t){if(void 0===t&&(t=1),"number"!=typeof t)throw new Error("Argument must be a number");for(;--t>=0;)this.push(this.shift());return this},rotateRight:function(t){if(void 0===t&&(t=1),"number"!=typeof t)throw new Error("Argument must be a number");for(;--t>=0;)this.unshift(this.pop());return this},shift:function(){var t;if(0!==this.size)return t=this.data[this.start],this.start=(this.start+1)%this.length,this.size--,t},sort:function(t){return this.data.sort(t||i),this.start=0,this.end=this.size-1,this},unshift:function(){var t=0;if(this.overflow&&this.size+arguments.length>this.length)for(;t<this.size+arguments.length-this.length;t++)this.overflow(this.data[this.end-t%this.length],this);for(t=0;t<arguments.length;t++)this.data[(this.length+this.start-t%this.length-1)%this.length]=arguments[t];return this.length-this.size-t<0&&(this.end+=this.length-this.size-t,this.end<0&&(this.end=this.length+this.end%this.length)),this.size<this.length&&(this.size+t>this.length?this.size=this.length:this.size+=t),this.start-=arguments.length,this.start<0&&(this.start=this.length+this.start%this.length),this.size},indexOf:function(t,e){for(e||(e=0);e<this.size;e++)if(this.data[(this.start+e)%this.length]===t)return e;return-1},lastIndexOf:function(t,e){for(e||(e=this.size-1);e>=0;e--)if(this.data[(this.start+e)%this.length]===t)return e;return-1},sortedIndex:function(t,e,o){e=e||i;var r=this.start,n=this.size-1;for(r&&e.call(o,t,this.data[n])>0&&(r=0,n=this.end);r<n;){var a=r+n>>>1;e.call(o,t,this.data[a])>0?r=a+1:n=a}return((r-this.start)%this.size+this.size)%this.size},every:function(t,e){for(var i=0;i<this.size;i++)if(!t.call(e,this.data[(this.start+i)%this.length],i,this))return!1;return!0},forEach:function(t,e){for(var i=0;i<this.size;i++)t.call(e,this.data[(this.start+i)%this.length],i,this)},some:function(t,e){for(var i=0;i<this.size;i++)if(t.call(e,this.data[(this.start+i)%this.length],i,this))return!0;return!1},avg:function(){return 0==this.size?0:this.sum()/this.size},sum:function(){for(var t=this.size,e=0;t--;)e+=this.data[t];return e},median:function(){if(0===this.size)return 0;var t=this.slice().sort(i),e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2},empty:function(){return this.size=this.start=0,this.end=this.length-1,this},fill:function(t){var e=0;if("function"==typeof t)for(;this.data[e]=t(),++e<this.length;);else for(;this.data[e]=t,++e<this.length;);return this.start=0,this.end=this.length-1,this.size=this.length,this},first:function(){return this.data[this.start]},last:function(){return this.data[this.end]},get:function(t){return this.data[(this.start+t)%this.length]},isFull:function(t){return this.length===this.size},set:function(t,e){return this.data[(this.start+t)%this.length]=e},toArray:function(){return this.slice()},slice:function(t,e){var i=this.size;if((t=+t||0)<0){if(t>=e)return[];t=-t>i?0:i+t}null==e||e>i?e=i:e<0?e+=i:e=+e||0,i=t<e?e-t:0;for(var o=Array(i),r=0;r<i;r++)o[r]=this.data[(this.start+t+r)%this.length];return o}},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e:t.CBuffer=e}(window),function(t){var e=function(t,e){this.hb=new HistoryBufferNumeric(t,e),this.hbType="numeric"};e.prototype.setType=function(t){var e=this;if(t!==this.hbType){if("numeric"===t){var i=this.hb.callbacks;this.hb.callbacks=void 0,this.hb=new HistoryBufferNumeric(this.capacity,this.width),i.forEach(function(t,i){e.hb.registerOnChange(i,t)}),this.hbType="numeric",this.hb.callOnChange()}if("analogWaveform"===t){var i=this.hb.callbacks;this.hb.callbacks=void 0,this.hb=new HistoryBufferWaveform(this.capacity,this.width),i.forEach(function(t,i){e.hb.registerOnChange(i,t)}),this.hbType="analogWaveform",this.hb.callOnChange()}}},e.prototype.clear=function(){this.hb.clear()},e.prototype.setCapacity=function(t){this.hb.setCapacity(t)},e.prototype.setWidth=function(t){this.hb.setWidth(t)},e.prototype.push=function(t){this.hb.push(t)},e.prototype.startIndex=function(){return this.hb.startIndex()},e.prototype.lastIndex=function(){return this.hb.lastIndex()},e.prototype.get=function(t){return this.hb.get(t)},e.prototype.appendArray=function(t){this.hb.appendArray(t)},e.prototype.toArray=function(){return this.hb.toArray()},e.prototype.toDataSeries=function(t){return this.hb.toDataSeries(t)},e.prototype.registerOnChange=function(t,e){this.hb.registerOnChange(t,e)},e.prototype.deregisterOnChange=function(t,e){this.hb.deregisterOnChange(t,e)},e.prototype.query=function(t,e,i,o){return this.hb.query(t,e,i,o)},e.prototype.rangeX=function(t){return this.hb.rangeX(t)},e.prototype.rangeY=function(t,e,i){return this.hb.rangeY(t,e,i)},e.prototype.toJSON=function(){return this.hb.toJSON()},Object.defineProperty(e.prototype,"width",{get:function(){return this.hb.width}}),Object.defineProperty(e.prototype,"count",{get:function(){return this.hb.count},set:function(t){this.hb.count=t}}),Object.defineProperty(e.prototype,"capacity",{get:function(){return this.hb.capacity}}),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e:t.HistoryBuffer=e}(window),function(t){var e=function(t,e){this.capacity=t||1024,this.width=e||1,this.lastUpdatedIndex=0,this.firstUpdatedIndex=0,this.branchFactor=32,this.buffers=[],this.trees=[];for(var i=0;i<this.width;i++)this.buffers.push(new CBuffer(t)),this.trees.push(new SegmentTree(this,this.buffers[i]));this.buffer=this.buffers[0],this.tree=this.trees[0],this.count=0,this.callbacks=new Map,this.changed=!1};e.prototype.callOnChange=function(t){this.callbacks.forEach(function(e){e(t)})},e.prototype.setBranchingFactor=function(t){this.branchFactor=t,this.rebuildSegmentTrees()},e.prototype.getDefaultBranchingFactor=function(){return 32},e.prototype.rebuildSegmentTrees=function(){this.trees=[];for(var t=0;t<this.width;t++)this.trees.push(new SegmentTree(this,this.buffers[t]));this.tree=this.trees[0],this.firstUpdatedIndex=this.startIndex(),this.lastUpdatedIndex=this.firstUpdatedIndex,this.updateSegmentTrees()},e.prototype.clear=function(){for(var t=0;t<this.width;t++)this.buffers[t].empty();this.count=0,this.rebuildSegmentTrees(),this.changed=!0,this.callOnChange&&this.callOnChange()},e.prototype.setCapacity=function(t){if(t!==this.capacity){this.capacity=t,this.buffers=[];for(var e=0;e<this.width;e++)this.buffers.push(new CBuffer(t));this.buffer=this.buffers[0],this.count=0,this.rebuildSegmentTrees(),this.changed=!0,this.callOnChange&&this.callOnChange()}},e.prototype.setWidth=function(t){if(t!==this.width){this.width=t,this.buffers=[];for(var e=0;e<this.width;e++)this.buffers.push(new CBuffer(this.capacity));this.buffer=this.buffers[0],this.count=0,this.rebuildSegmentTrees(),this.changed=!0,this.callOnChange&&this.callOnChange()}},e.prototype.getWidth=function(){return this.width},e.prototype.pushNoStatsUpdate=function(t){if("number"==typeof t&&1===this.width)this.buffer.push(t);else if(Array.isArray(t)&&t.length===this.width)for(var e=0;e<this.width;e++)this.buffers[e].push(t[e])},e.prototype.push=function(t){this.pushNoStatsUpdate(t),this.count++,this.changed=!0,this.callOnChange&&this.callOnChange()},e.prototype.startIndex=function(){return Math.max(0,this.count-this.capacity)},e.prototype.lastIndex=function(){return this.startIndex()+this.buffer.size},e.prototype.get=function(t){if(t-=this.startIndex(),1===this.width)return this.buffer.get(t);for(var e=[],i=0;i<this.width;i++)e.push(this.buffers[i].get(t));return e},e.prototype.appendArray=function(t){for(var e=0;e<t.length;e++)this.pushNoStatsUpdate(t[e]);this.count+=t.length,this.changed=!0,this.callOnChange&&this.callOnChange()},e.prototype.toArray=function(){if(1===this.width)return this.buffer.toArray();for(var t=this.startIndex(),e=this.lastIndex(),i=[],o=t;o<e;o++)i.push(this.get(o));return i},e.prototype.updateSegmentTrees=function(){var t=this.buffer;this.trees.forEach(function(t){t.updateSegmentTree()}),this.firstUpdatedIndex=this.startIndex(),this.lastUpdatedIndex=this.firstUpdatedIndex+t.size},e.prototype.toDataSeries=function(t){for(var e=this.buffer,i=[],o=this.startIndex(),r=0;r<e.size;r++)i.push([r+o,this.buffers[t||0].get(r)]);return i},e.prototype.registerOnChange=function(t,e){if(this.callbacks.has(t))return void console.log("Callback with the given key has already been registered.");this.callbacks.set(t,e)},e.prototype.deregisterOnChange=function(t){this.callbacks.delete(t)},e.prototype.query=function(t,e,i,o){return void 0===o&&(o=0),this.changed&&(this.updateSegmentTrees(),this.changed=!1),this.trees[o].query(t,e,i)},e.prototype.rangeX=function(t){var e=this.startIndex(),i=this.lastIndex()-1;return i===e-1?{}:{xmin:e,xmax:i,deltamin:1}},e.prototype.rangeY=function(t,e,i){null!==t&&void 0!==t||(t=this.startIndex()),null!==e&&void 0!==e||(e=this.lastIndex()-1),null!==i&&void 0!==i||(i=0),this.changed&&(this.updateSegmentTrees(),this.changed=!1);var o=this.query(t,e,e-t,i),r=o.length;if(r>0){for(var n={ymin:1/0,ymax:-1/0},a=0;a<r;a+=2)null==o[a+1]||o[a+1]===1/0||o[a+1]===-1/0||isNaN(o[a+1])||(n.ymin=Math.min(n.ymin,o[a+1]),n.ymax=Math.max(n.ymax,o[a+1]));return n}return{}},e.prototype.toJSON=function(){var t={data:[],width:this.width,capacity:this.capacity,valueType:"HistoryBuffer",startIndex:this.startIndex(),count:this.count};if(1===this.width)t.data=this.buffer.toArray();else for(var e=0;e<this.width;e++)t.data.push(this.buffers[e].toArray());return t},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e:t.HistoryBufferNumeric=e}(window),function(t){function e(t,e,i){if(0===t.Y.length)return!1;var o=new NITimestamp(t.t0),r=o.valueOf(),n=o.valueOf()+t.Y.length*t.dt;return!(r<e&&n<e)&&!(r>i&&n>i)}function i(t,e){if(1==t.Y.length||1==e.Y.length)return!1;var i=new NITimestamp(t.t0).add(t.dt*(t.Y.length-1)).valueOf();return new NITimestamp(e.t0).valueOf()-i>=2*t.dt}function o(t,e,i,o){for(var r,n=t.Y,a=t.t0,s=new NITimestamp(a),h=0;h<n.length;h++)r=s.valueOf(),r>=e-t.dt&&r<=i+t.dt&&(o.push(r),o.push(n[h])),s.add(t.dt)}function r(t,e){for(var i,o=t.Y,r=t.t0,n=new NITimestamp(r),a=0;a<o.length;a++)i=n.valueOf(),e.push([i,o[a]]),n.add(t.dt)}function n(t,e,i,o){var r,n,a,s=t.Y,h=new NITimestamp(t.t0);if(0!==s.length&&(r=h.valueOf(),n=new NITimestamp(h).add(t.dt*t.Y.length).valueOf(),!(r>o||n<i)))for(var l=0;l<s.length;l++)(a=new NITimestamp(h).add(t.dt*l).valueOf())<i||a>o||null==s[l]||s[l]===1/0||s[l]===-1/0||isNaN(s[l])||(s[l]>e.max&&(e.max=s[l]),s[l]<e.min&&(e.min=s[l]))}var a=function(t,e){this.capacity=t||1024,this.width=e||1,this.buffers=[];for(var i=0;i<this.width;i++)this.buffers.push(new CBuffer(t));this.buffer=this.buffers[0],this.count=0,this.callbacks=new Map,this.changed=!1};a.prototype.__proto__=HistoryBufferNumeric.prototype,a.prototype.rebuildSegmentTrees=function(){},a.prototype.pushNoStatsUpdate=function(t){if(1===this.width)this.buffer.push(t);else if(Array.isArray(t)&&t.length===this.width)for(var e=0;e<this.width;e++)this.buffers[e].push(t[e])},a.prototype.getTreeNodes=function(t,e,i){},a.prototype.updateSegmentTrees=function(){},a.prototype.query=function(t,r,n,a){void 0===a&&(a=0);var s=[],h=this.buffers[a].toArray(),l=h[0];return h.forEach(function(n){e(n,t,r)&&(i(l,n)&&(s.push(null),s.push(null)),l=n,o(n,t,r,s))}),s},a.prototype.toDataSeries=function(t){void 0===t&&(t=0);var e=[],o=this.buffers[t].toArray(),n=o[0];return o.forEach(function(t){i(n,t)&&e.push([null,null]),n=t,r(t,e)}),e},a.prototype.rangeX=function(t){var e,i,o,r=1/0,n=-1/0,a=1/0;void 0===t&&(t=0);var s=this.buffers[t].toArray();if(0===s.length)return{};if(s.forEach(function(t){e=new NITimestamp(t.t0),i=e.valueOf(),o=new NITimestamp(e).add(t.dt*(t.Y.length-1)).valueOf(),i<r&&(r=i),o>n&&(n=o),a>Math.abs(t.dt)&&(a=Math.abs(t.dt))}),0===a&&(a=1),r>n){var h=r;r=n,n=h}return{xmin:r,xmax:n,deltamin:a}},a.prototype.rangeY=function(t,e,i){var o={min:1/0,max:-1/0};null!==i&&void 0!==i||(i=0);var r=this.buffers[i].toArray();if(0===r.length)return{};if(null!==t&&void 0!==t||(t=new NITimestamp(r[0].t0).valueOf()),null===e||void 0===e){var a=r[r.length-1];e=new NITimestamp(a.t0).add(a.dt*a.Y.length).valueOf()}return r.forEach(function(i){n(i,o,t,e)}),{ymin:o.min,ymax:o.max}},a.prototype.toJSON=function(){return{data:this.toArray(),width:this.width,capacity:this.capacity,valueType:"HistoryBuffer",startIndex:this.startIndex(),count:this.count}},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=a:t.HistoryBufferWaveform=a}(window),function(t){function e(t,e,i){e<i.min&&(i.min=e,i.minIndex=t),e>i.max&&(i.max=e,i.maxIndex=t)}function i(t,e){t.min<e.min&&(e.min=t.min,e.minIndex=t.minIndex),t.max>e.max&&(e.max=t.max,e.maxIndex=t.maxIndex)}function o(t,e){return e*Math.floor(t/e)}var r=function(){this.init()},n=function(t,e){this.historyBuffer=t,this.cbuffer=e,this.tree=this.buildEmptySegmentTree()};r.prototype.init=function(){this.maxIndex=0,this.minIndex=0,this.max=Math.Nan,this.min=Math.Nan};var a=function(t,e){this.level=e,this.step=Math.pow(t.branchFactor,e),this.capacity=Math.ceil(t.capacity/Math.pow(t.branchFactor,e))+1,this.startIndex=0,this.nodes=new CBuffer(this.capacity)};a.prototype.rotate=function(){this.startIndex+=this.step;var t=this.nodes.shift();t.init(),this.nodes.push(t)},a.prototype.init=function(t){this.startIndex=t,this.nodes.forEach(function(t){t.init()})},n.prototype.get=function(t){return t-=this.historyBuffer.startIndex(),this.cbuffer.get(t)},n.prototype.getTreeNode=function(t,e){var i=this.tree.levels[t],o=i.step,r=Math.floor((e-i.startIndex)/o);return r<0||r>=i.capacity?null:i.nodes.get(r)},n.prototype.buildEmptySegmentTree=function(){var t=this.historyBuffer,e=Math.ceil(Math.log(t.capacity)/Math.log(t.branchFactor))-1;e<1&&(e=1);for(var i={depth:e,levels:[]},o=0;o<e;o++){var n=new a(t,o+1);i.levels.push(n);for(var s=0;s<n.capacity;s++){var h=new r;n.nodes.push(h)}}return i},n.prototype.populateTreeLevel=function(t,e){var i,r,n,a,s,h=this.historyBuffer,l=this.cbuffer,u=h.startIndex(),d=h.lastIndex(),c=0,f=0,p=!0,g={step:1,startIndex:u},m=0===e?g:this.tree.levels[e-1],v=this.tree.levels[e];for(t=o(t,v.step),m.startIndex>t&&(t=m.startIndex,c=t/m.step%h.branchFactor),f=t;f<d;f+=m.step){if(0===e){var b=l.get(f-u);p?(r=b,n=f,a=b,s=f,p=!1):(b>r&&(r=b,n=f),b<a&&(a=b,s=f))}else{var y=this.getTreeNode(e-1,f);p?(r=y.max,n=y.maxIndex,a=y.min,s=y.minIndex,p=!1):(y.max>r&&(r=y.max,n=y.maxIndex),y.min<a&&(a=y.min,s=y.minIndex))}c++,c===h.branchFactor&&(c=0,p=!0,i=this.getTreeNode(e,f),i.max=r,i.maxIndex=n,i.min=a,i.minIndex=s)}0!==c&&(i=this.getTreeNode(e,f),i.max=r,i.maxIndex=n,i.min=a,i.minIndex=s)},n.prototype.rotateTreeLevel=function(t){var r=this.historyBuffer,n=r.startIndex(),a=this.tree.levels[t],s=o(n,a.step);if(s-a.startIndex>r.capacity)a.init(s);else for(;a.startIndex<s;)a.rotate();if(n!==s){var h,l={minIndex:n,min:this.get(n),maxIndex:n,max:this.get(n)},u=a.nodes.get(0);if(0===t)for(h=n;h<s+r.branchFactor;h++)e(h,this.get(h),l);else for(h=n;h<s+a.step;h+=a.step/r.branchFactor)i(this.getTreeNode(t-1,h),l);u.minIndex=l.minIndex,u.min=l.min,u.maxIndex=l.maxIndex,u.max=l.max}},n.prototype.updateSegmentTree=function(){var t;for(t=0;t<this.tree.depth;t++)this.rotateTreeLevel(t);for(t=0;t<this.tree.depth;t++)this.populateTreeLevel(this.historyBuffer.lastUpdatedIndex,t)},n.prototype.readMinMax=function(t,r,n){var a,s=r-t,h=this.historyBuffer,l=h.startIndex(),u=this.cbuffer,d=Math.floor(Math.log(s)/Math.log(h.branchFactor));if(d<=0){for(a=t;a<r;a++)e(a,u.get(a-l),n);return n}d>this.tree.levels.length&&(d=this.tree.levels.length);var c=Math.pow(h.branchFactor,d),f=Math.ceil(t/c)*c,p=o(r,c);t!==f&&this.readMinMax(t,f,n);var g=o(l,c),m=(f-g)/c,v=(p-g)/c;for(a=m;a<v;a++)i(this.tree.levels[d-1].nodes.get(a),n);return r!==p&&this.readMinMax(p,r,n),n},n.prototype.query=function(t,e,i){var o,n=this.historyBuffer;t=Math.floor(t),e=Math.ceil(e);var a=[],s=n.startIndex(),h=n.lastIndex();if(t<s&&(t=s),t>h&&(t=h),e<s&&(e=s-1),e>h-1&&(e=h-1),i<4)for(o=t;o<=e;o++)a.push(o),a.push(this.get(o));else{var l,u,d=new r;for(o=t;o<=e;o=Math.round(o+i)){var c=Math.min(e+1,Math.round(o+i));d.max=Number.NEGATIVE_INFINITY,d.min=Number.POSITIVE_INFINITY,d.minIndex=0,d.maxIndex=0,d=this.readMinMax(o,c,d),l=d.maxIndex,u=d.minIndex,u===l?(a.push(u),a.push(d.min)):u<l?(a.push(u),a.push(d.min),a.push(l),a.push(d.max)):(a.push(l),a.push(d.max),a.push(u),a.push(d.min))}}return a},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=n:t.SegmentTree=n}(window),function(t){function e(t,e,r,n){var a;if(e.historyBuffer){var s=e.historyBuffer;a=s.indexMap;var h,l=t.getData().indexOf(e);l<s.width?(h=i(s,l),e.index=l):h=[];for(var u=n.points,d=0;d<h.length;d+=2)u[d]=a?a[h[d]]:h[d],u[d+1]=h[d+1];u.length=h.length,n.pointsize=2,e.decimate=o,e.decimatePoints=o}}function i(t,e){var i=t.rangeX(e),o=[];return void 0===i.xmin||void 0===i.xmax||void 0===i.deltamin?[]:(o[0]=i.xmin,o[2]=i.xmax,o[4]=i.xmax-i.deltamin,o[1]=0,o[3]=1,o[5]=2,o)}function o(t,e,i,o){var r,n=t.historyBuffer,a=i-e,s=n.indexMap,h=t.datapoints,l=Math.floor(a/o),u=t.index;if(u<n.width)var r=t.historyBuffer.query(e,i,l,u);else r=[];for(var d=h.points,c=0;c<r.length;c+=2)d[c]=s?s[r[c]]:r[c],d[c+1]=r[c+1];return d.length=r.length,h.pointsize=2,d}function r(t,e){for(var i=t.getData(),o=0;o<e.width;o++)"object"===_typeof(i[o])?(i[o].data=[],i[o].datapoints=void 0):i[o]={data:[]};t.setData(i)}function n(t,e,i){e.datapoints.points&&(i.xmin=e.datapoints.points[0])}function a(t,e){if("y"===e.direction&&"none"!==e.options.autoScale){var i,o,r,n,a,s=t.getData(),h=s.filter(function(t){return t.yaxis===e}),l=h.length;for(i=0;i<l;i++)a=h[i].index,o=h[i].xaxis.min?h[i].xaxis.min:h[i].xaxis.options.min,r=h[i].xaxis.max?h[i].xaxis.max:h[i].xaxis.options.max,i<h[i].historyBuffer.width&&(n=h[i].historyBuffer.rangeY(o,r,a),0===i?(e.datamin=n.ymin,e.datamax=n.ymax):(e.datamin=Math.min(e.datamin,n.ymin)||void 0,e.datamax=Math.max(e.datamax,n.ymax)||void 0))}}function s(t){t.setupGrid(!0),t.draw()}function h(t){function i(t,e){t.dataUpdateTriggered||(t.dataUpdateTriggered=requestAnimationFrame(function(){o||(r(t,e),s(t)),t.dataUpdateTriggered=null}))}var o=!1;t.hooks.processOptions.push(function(t){var s=t.getOptions().series.historyBuffer;s&&(t.hooks.processRawData.push(e),s.registerOnChange("setDataCallback",function(){i(t,s)}),r(t,s),t.hooks.adjustSeriesDataRange.push(n),t.hooks.setRange.push(a),t.hooks.shutdown.push(function(){s.deregisterOnChange("setDataCallback"),o=!0}))})}t.plot.plugins.push({init:h,name:"charting",version:"0.3"})}(jQuery);
//# sourceMappingURL=jquery.flot.plugins.js.map
